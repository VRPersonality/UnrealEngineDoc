<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unreal Engine 5.6 C++ API: Runtime/Engine/Public/GPUSortManager.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Unreal Engine 5.6 C++ API<span id="projectnumber">&#160;5.6.0</span>
   </div>
   <div id="projectbrief">C++ API documentation for Unreal Engine 5.6</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('GPUSortManager_8h_source.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">GPUSortManager.h</div></div>
</div><!--header-->
<div class="contents">
<a href="GPUSortManager_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright Epic Games, Inc. All Rights Reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">/*=============================================================================</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">    GPUSortManager.h: Interface manage sorting between different FXSystemInterface</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">=============================================================================*/</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="CoreMinimal_8h.html">CoreMinimal.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;<a class="code" href="RefCounting_8h.html">Templates/RefCounting.h</a>&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;RHI.h&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="RenderResource_8h.html">RenderResource.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"></span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">/**</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> * Copy one uint buffer into several overlapping targets.</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment"> * Each target is expected to be bigger than the previous one, so that copy resumes where it left.</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment"> * Ex : (ABCDEFGHIJK) -&gt; (ABC--, ---DEFGHI-, ---------JK---)</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment"> * This is essentially used to manage growable buffers in cases the</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment"> * binding needs to be set before the final size required is known. </span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment"> * In this scenario, the smaller buffers are temporary and only the final (biggest) buffer</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment"> * becomes persistent, this is why it has apparently unused space at the beginning but</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment"> * it will be used the next frame to hold all of the data.</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment"> * Note that required calls to RHICmdList.Transition need to be handled before and after this function.</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment"> *</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment"> * @param RHICmdList - The command list used to issue the dispatch.</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment"> * @param FeatureLevel - The current feature level, used to access the global shadermap.</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment"> * @param SourceSRV - The source uint buffer to be copied into the others.</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment"> * @param TargetUAVs - The destination overlapping uint buffers.</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment"> * @param TargetSizes - The copy size of each of the buffers. Once a buffer size is reached, the copy targets the next buffer.</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment"> * @param StartingOffset - The starting position at which the copy starts. Applies for both the source and targets.</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment"> * @param NumTargets - The number of elements in TargetUAVs and TargetSizes.</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment"> */</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a58ff6a6755410d24d26568cfaa590297">   33</a></span>ENGINE_API <span class="keywordtype">void</span> <a class="code hl_function" href="GPUSortManager_8h.html#a58ff6a6755410d24d26568cfaa590297">CopyUIntBufferToTargets</a>(FRHICommandList&amp; RHICmdList, ERHIFeatureLevel::Type FeatureLevel, FRHIShaderResourceView* SourceSRV, FRHIUnorderedAccessView*<span class="keyword">const</span>* TargetUAVs, <a class="code hl_typedef" href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a>* TargetSizes, <a class="code hl_typedef" href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> StartingOffset, <a class="code hl_typedef" href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> NumTargets);</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keyword">struct </span><a class="code hl_struct" href="structFGPUSortBuffers.html">FGPUSortBuffers</a>;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment"></span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment">/** Buffers in GPU memory used to sort particles. */</span></div>
<div class="foldopen" id="foldopen00038" data-start="{" data-end="};">
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html">   38</a></span><span class="keyword">class </span><a class="code hl_class" href="classFParticleSortBuffers.html">FParticleSortBuffers</a> : <span class="keyword">public</span> <a class="code hl_function" href="classFRenderResource.html#a06358014324697c0503b17b05a4b4130">FRenderResource</a></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>{</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="foldopen" id="foldopen00042" data-start="{" data-end="}">
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a4f3d7e57e1b217bf08dca81ede83a10d">   42</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classFParticleSortBuffers.html#a4f3d7e57e1b217bf08dca81ede83a10d">SetBufferSize</a>(<a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> InBufferSize)</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    {</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>        <a class="code hl_variable" href="classFParticleSortBuffers.html#a1b2a1a08c05186b7d6eb4690268e711f">BufferSize</a> = InBufferSize;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    }</div>
</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment"></span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="comment">    /** Initialize RHI resources. */</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#aefee70603ff21887c1dc12654baa27bd">   48</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classFParticleSortBuffers.html#aefee70603ff21887c1dc12654baa27bd">InitRHI</a>(FRHICommandListBase&amp; RHICmdList) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="comment"></span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="comment">    /** Release RHI resources. */</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a736de0cd883c656917ecfc49d1bfa8f5">   51</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classFParticleSortBuffers.html#a736de0cd883c656917ecfc49d1bfa8f5">ReleaseRHI</a>() <span class="keyword">override</span>;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="comment"></span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="comment">    /** Retrieve the UAV for writing particle sort keys. */</span></div>
<div class="foldopen" id="foldopen00054" data-start="{" data-end="}">
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#ac60fc6b7347060d8779bf519cc4ec94d">   54</a></span>    FRHIUnorderedAccessView* <a class="code hl_function" href="classFParticleSortBuffers.html#ac60fc6b7347060d8779bf519cc4ec94d">GetKeyBufferUAV</a>(<a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> BufferIndex)</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    {</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <a class="code hl_define" href="AssertionMacros_8h.html#a586e110623cde145b8a5bdefb429e144">check</a>((BufferIndex &amp; 0xFFFFFFFE) == 0);</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classFParticleSortBuffers.html#a217182207fe595cdb1a71ca29ab7d118">KeyBufferUAVs</a>[BufferIndex];</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    }</div>
</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="comment"></span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="comment">    /** Retrieve buffers needed to sort on the GPU. */</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a0fe5ca184a03f8659e86aa3a1b178d12">   61</a></span>    <a class="code hl_struct" href="structFGPUSortBuffers.html">FGPUSortBuffers</a> <a class="code hl_function" href="classFParticleSortBuffers.html#a0fe5ca184a03f8659e86aa3a1b178d12">GetSortBuffers</a>();</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="comment"></span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment">    /** Retrieve the sorted vertex buffer that results will always be located at. */</span></div>
<div class="foldopen" id="foldopen00064" data-start="{" data-end="}">
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#adaad67b529e407dc86f12b6eae03980d">   64</a></span>    FRHIBuffer* <a class="code hl_function" href="classFParticleSortBuffers.html#adaad67b529e407dc86f12b6eae03980d">GetSortedVertexBufferRHI</a>(<a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> BufferIndex)</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    {</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        <a class="code hl_define" href="AssertionMacros_8h.html#a586e110623cde145b8a5bdefb429e144">check</a>((BufferIndex &amp; 0xFFFFFFFE) == 0);</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classFParticleSortBuffers.html#ae8c17608aff8fc9e33b2f1ec2dc1b401">VertexBuffers</a>[BufferIndex];</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    }</div>
</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment"></span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment">    /** Get the size allocated for sorted vertex buffers. */</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a5b07e3de05ffa791912dcdeee6f6b110">   71</a></span>    <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_function" href="classFParticleSortBuffers.html#a5b07e3de05ffa791912dcdeee6f6b110">GetSize</a>() { <span class="keywordflow">return</span> <a class="code hl_variable" href="classFParticleSortBuffers.html#a1b2a1a08c05186b7d6eb4690268e711f">BufferSize</a>; }</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="comment"></span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="comment">    /** Vertex buffer storage for particle sort keys. */</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a745b605d4fba48da06342a36b8b8e7bb">   76</a></span>    FBufferRHIRef <a class="code hl_variable" href="classFParticleSortBuffers.html#a745b605d4fba48da06342a36b8b8e7bb">KeyBuffers</a>[2];<span class="comment"></span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment">    /** Shader resource view for particle sort keys. */</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a271ae2db1bb47f834757379c8ee8b1fa">   78</a></span>    FShaderResourceViewRHIRef <a class="code hl_variable" href="classFParticleSortBuffers.html#a271ae2db1bb47f834757379c8ee8b1fa">KeyBufferSRVs</a>[2];<span class="comment"></span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="comment">    /** Unordered access view for particle sort keys. */</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a217182207fe595cdb1a71ca29ab7d118">   80</a></span>    FUnorderedAccessViewRHIRef <a class="code hl_variable" href="classFParticleSortBuffers.html#a217182207fe595cdb1a71ca29ab7d118">KeyBufferUAVs</a>[2];</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="comment"></span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="comment">    /** Vertex buffer containing sorted particle vertices. */</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#ae8c17608aff8fc9e33b2f1ec2dc1b401">   83</a></span>    FBufferRHIRef <a class="code hl_variable" href="classFParticleSortBuffers.html#ae8c17608aff8fc9e33b2f1ec2dc1b401">VertexBuffers</a>[2];<span class="comment"></span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">    /** Shader resource view for sorting particle vertices. */</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#aceb932c3fae2ac17f7e2650d4f57f43c">   85</a></span>    FShaderResourceViewRHIRef <a class="code hl_variable" href="classFParticleSortBuffers.html#aceb932c3fae2ac17f7e2650d4f57f43c">VertexBufferSortSRVs</a>[2];<span class="comment"></span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="comment">    /** Unordered access view for sorting particle vertices. */</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a790c9ed149d67af1e71b94facdf4d561">   87</a></span>    FUnorderedAccessViewRHIRef <a class="code hl_variable" href="classFParticleSortBuffers.html#a790c9ed149d67af1e71b94facdf4d561">VertexBufferSortUAVs</a>[2];</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="comment"></span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="comment">    /** Size allocated for buffers. */</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="classFParticleSortBuffers.html#a1b2a1a08c05186b7d6eb4690268e711f">   90</a></span>    <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="classFParticleSortBuffers.html#a1b2a1a08c05186b7d6eb4690268e711f">BufferSize</a> = 0;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>};</div>
</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment"></span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="comment">/** Different sort flags used to define constraint for FGPUSortManager tasks. */</span></div>
<div class="foldopen" id="foldopen00094" data-start="{" data-end="};">
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">   94</a></span><span class="keyword">enum class</span> <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> : <a class="code hl_typedef" href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>{</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6adf97f83acf6453d4a6a4b1070f3754">   96</a></span>    <a class="code hl_enumvalue" href="UVEditorUVTransformOp_8h.html#ae6469b0c80e9815a96d759582301d517a6adf97f83acf6453d4a6a4b1070f3754">None</a>            = 0x00,<span class="comment"></span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment">     * Sorting happens on either 16 bit keys or 32 bit uint keys. Those can come from float point formats being converted to uint.</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">     * Because sort tasks are grouped into batches, the keys also have to start with the batch element index, which ends up either</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment">     * increasing the 16 bit keys or taking space in the 32 bit keys (by the number of bits required to store the element indices).</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">     * The more task are created, the more bits are required to encode the element index (up to a limit of 16^2 elements).</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="comment">     * Low precision keys have the advantage of being quicker on the GPU when performing the radix sort, which is affected by the number of bits.</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="comment">     */</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a2adfd6e2c47c97daaade0690f919dbf3">  104</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a2adfd6e2c47c97daaade0690f919dbf3">LowPrecisionKeys</a>    = 0x01,     <span class="comment">// Low precision keys ((EleIdx &lt;&lt; 16) | (16 bits key))</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a54737b6e1f1de6b175cac2ad38daf966">  105</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a54737b6e1f1de6b175cac2ad38daf966">HighPrecisionKeys</a>  = 0x02,     <span class="comment">// High precision keys ((EleIdx &lt;&lt; (32 - IdxBitCount)) | (32 bits key &gt;&gt; IdxBitCount))</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6878d59f868118ac98b3fc2f3ba3a106">  107</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6878d59f868118ac98b3fc2f3ba3a106">AnyKeyPrecision</a>      = 0x03,</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="comment"></span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="comment">     * The sort task are created in FPrimitiveSceneProxy::GetDynamicMeshElements() but have different requirements</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="comment">     * in terms of when the keys can be generated, and when the sorted values are required within the frame.</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="comment">     * Cascade renders the particles after GPU simulation (either in PreRender(), or in PostRenderOpaque() see ::CollisionDepthBuffer).</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="comment">     * Niagara, on the other hand, renders the particle before they get updated by simulation (either in PreInitViews() or PostRenderOpaque())</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="comment">     * For Niagara emitters updated in PreInitViews(), this happens before GetDynamicMeshElements() so doesn&#39;t impose any restriction in the end.</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span><span class="comment">     * This means each system has some flexibility on when the sort keys can be generated depending on the simulation point for each emitter.</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span><span class="comment">     */</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a00c5859ce439ee8aa1047a737e857152">  117</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a00c5859ce439ee8aa1047a737e857152">KeyGenAfterPreRender</a>            = 0x04,     <span class="comment">// Typically Cascade emitters simulated in PreRender() or any Niagara emitters.</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a5e001f1d59d743aa0ab94f080f01bd7b">  118</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a5e001f1d59d743aa0ab94f080f01bd7b">KeyGenAfterPostRenderOpaque</a>      = 0x08,     <span class="comment">// Typically any Cascade emitters, or Niagara emitters simulated in PreInitViews().</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9ae5e866cc673d8accd816936ba3e76525">  120</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9ae5e866cc673d8accd816936ba3e76525">AnyKeyGenLocation</a>              = 0x0C,</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment"></span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment">     * Once keys are generated, they must be sorted and the indices only need to be ready before the primitive are rendered.</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="comment">     * The (frame) location only depends on whether the emitter uses opaque materials or translucent materials.</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="comment">     * It is possible to have an incorrect setup if the keys can only be generated after PostRenderOpaque() but the sorting must be ready after PreRender().</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="comment">     * This happens with opaque Cascade emitters when simulation needs the depth buffer to do collision tests.</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="comment">     * A sort requests can have both SortIndicesAfterPreRender and SortIndicesAfterPostRenderOpaque when it is allowed to sort keys at either point.</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><span class="comment">     */</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a5be97b223105b17aa32b4f3cb53c9f73">  129</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a5be97b223105b17aa32b4f3cb53c9f73">SortAfterPreRender</a>            = 0x10,     <span class="comment">// Any Emitter since good for both opaque or translucent</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a36ace15a900e67ea470f504c487aa0da">  130</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a36ace15a900e67ea470f504c487aa0da">SortAfterPostRenderOpaque</a>  = 0x20,     <span class="comment">// Emitter using translucent material.</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9aa74778a62c6e7a091143dbba810a7fb6">  132</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9aa74778a62c6e7a091143dbba810a7fb6">AnySortLocation</a>              = 0x30,</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="comment"></span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span><span class="comment">     *  The sorted values can either be read as 1D or 2D, but doesn&#39;t otherwise affect the sorting implementation as long as the storage size is the same.</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span><span class="comment">     *  Currently it is 32 bits in both cases. Note that the sorting shader reads the indices as UInt32 (see FParticleSortBuffers::InitRHI()).</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="comment">     */</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a39ce58881e43fc13193dd50be8d8360a">  138</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a39ce58881e43fc13193dd50be8d8360a">ValuesAsG16R16F</a>  = 0x40,</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9aa893550952d7007756585f9a6e715693">  139</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9aa893550952d7007756585f9a6e715693">ValuesAsInt32</a>  = 0x80,</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a23a36eeaad01b1f76979d14135f652ea">  141</a></span>    <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a23a36eeaad01b1f76979d14135f652ea">AnyValueFormat</a>    = 0xC0,</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>};</div>
</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#aae86b6871b5c891dddfea43583674630">  144</a></span><a class="code hl_define" href="EnumClassFlags_8h.html#a80975a5eda8bee64896556c6df5807d7">ENUM_CLASS_FLAGS</a>(<a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a>)</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span><span class="comment">/**</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span><span class="comment"> * Callback used by the FGPUSortManager to make each client system initialize the sort keys for a specific sort batch.</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="comment"> * Sort batches are created when GPU sort tasks are registered in FGPUSortManager::AddTask().</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span><span class="comment"> * Note that the system that is getting this callback must only initialize the data for the elements is has registered in this batch.</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span><span class="comment"> * </span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="comment"> * @param RHICmdList - The command list used to initiate the keys and values on GPU.</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span><span class="comment"> * @param BatchId - The GPUSortManager batch id (regrouping several similar sort tasks).</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span><span class="comment"> * @param NumElementsInBatch - The number of elements grouped in the batch (each element maps to a sort task)</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="comment"> * @param Flags - Details about the key precision (see EGPUSortFlags::AnyKeyPrecision) and the keygen location (see EGPUSortFlags::AnyKeyGenLocation).</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span><span class="comment"> * @param KeysUAV - The UAV that holds all the initial keys used to sort the values.</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span><span class="comment"> * @param ValuesUAV - The UAV that holds the initial values to be sorted accordingly to the keys.</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span><span class="comment"> */</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="GPUSortManager_8h.html#a4a3e37551b3938a562a688580e6eac00">  158</a></span><a class="code hl_define" href="DelegateCombinations_8h.html#abb99a9c6443c4c1d3c3329fa9a147804">DECLARE_DELEGATE_SixParams</a>(FGPUSortKeyGenDelegate, FRHICommandListImmediate&amp;, <a class="code hl_typedef" href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a>, <a class="code hl_typedef" href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a>, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a>, FRHIUnorderedAccessView*, FRHIUnorderedAccessView*);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><span class="comment"></span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span><span class="comment">/**</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="comment"> * A manager that handles different GPU sort tasks. </span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span><span class="comment"> * Each task has different constraints about when the data can be generated and when the sorted results need to be available.</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span><span class="comment"> * The usecase involes registering a sort task through AddTask() and then initializing the sort data through the KeyGen callback.</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span><span class="comment"> * The sort manager can be enabled or disabled through &quot;fx.AllowGPUSorting&quot;</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00166" data-start="{" data-end="};">
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html">  166</a></span>class <a class="code hl_function" href="classFGPUSortManager.html#ae071f68c8ddda558e5e92e28e79d35ee">FGPUSortManager</a> : public <a class="code hl_function" href="classFRefCountedObject.html#a3ae3edbc4c5caf1b150c3b261185e9b3">FRefCountedObject</a></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>{</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span><span class="comment"></span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="comment">    /** Information about the bindings for a given sort task. */</span></div>
<div class="foldopen" id="foldopen00171" data-start="{" data-end="};">
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FAllocationInfo.html">  171</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structFGPUSortManager_1_1FAllocationInfo.html">FAllocationInfo</a></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    {<span class="comment"></span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span><span class="comment">        /** The buffer that will hold the final sorted values */</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FAllocationInfo.html#af404bd13f2b4a08747c79f74017439e6">  174</a></span>        FShaderResourceViewRHIRef <a class="code hl_variable" href="structFGPUSortManager_1_1FAllocationInfo.html#af404bd13f2b4a08747c79f74017439e6">BufferSRV</a>;<span class="comment"></span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span><span class="comment">        /** The offset within BufferSRV where the sort task data starts. */</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FAllocationInfo.html#a0778089558d1f21a0eb555154a7e4051">  176</a></span>        <a class="code hl_typedef" href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FAllocationInfo.html#a0778089558d1f21a0eb555154a7e4051">BufferOffset</a> = <a class="code hl_enumvalue" href="CoreMiscDefines_8h.html#aa4d6d990ee1dfe83152d54b747fd6bf2ad01831bececdd0e16bb9171d5278854d">INDEX_NONE</a>;<span class="comment"></span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="comment">        /** The batch Id in which the sort task is grouped. */</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FAllocationInfo.html#a6722e2e1e7b550da06a6fdb06e294c40">  178</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FAllocationInfo.html#a6722e2e1e7b550da06a6fdb06e294c40">SortBatchId</a> = <a class="code hl_enumvalue" href="CoreMiscDefines_8h.html#aa4d6d990ee1dfe83152d54b747fd6bf2ad01831bececdd0e16bb9171d5278854d">INDEX_NONE</a>;<span class="comment"></span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="comment">        /** The element index of the sort task within the batch. */</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FAllocationInfo.html#abf795bc397d8504ed63155c39e3d7a87">  180</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FAllocationInfo.html#abf795bc397d8504ed63155c39e3d7a87">ElementIndex</a> = <a class="code hl_enumvalue" href="CoreMiscDefines_8h.html#aa4d6d990ee1dfe83152d54b747fd6bf2ad01831bececdd0e16bb9171d5278854d">INDEX_NONE</a>;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    };</div>
</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="comment"></span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span><span class="comment">    /** A little helper to generate the batch element keys based on the number of elements in the batch and the sort precision. */</span></div>
<div class="foldopen" id="foldopen00184" data-start="{" data-end="};">
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FKeyGenInfo.html">  184</a></span>    <span class="keyword">struct </span><a class="code hl_function" href="structFGPUSortManager_1_1FKeyGenInfo.html#a40026c8f7c003fcc5a1061ed47870ac3">FKeyGenInfo</a></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FKeyGenInfo.html#a40026c8f7c003fcc5a1061ed47870ac3">  186</a></span>        ENGINE_API <a class="code hl_function" href="structFGPUSortManager_1_1FKeyGenInfo.html#a40026c8f7c003fcc5a1061ed47870ac3">FKeyGenInfo</a>(<a class="code hl_typedef" href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a> NumElements, <span class="keywordtype">bool</span> bHighPrecisionKeys);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span><span class="comment"></span> </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span><span class="comment">        /**</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span><span class="comment">         * ElementKey = (ElementIndex &amp; EmitterKeyMask) &lt;&lt; ElementKeyShift.</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span><span class="comment">         * SortKey = (Key32 &gt;&gt; SortKeyShift) &amp; SortKeyMask.</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span><span class="comment">         */</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FKeyGenInfo.html#aae42d92617357bca1585d659e0f88fc4">  192</a></span>        <a class="code hl_typedef" href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FKeyGenInfo.html#aae42d92617357bca1585d659e0f88fc4">ElementKeyMask</a>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FKeyGenInfo.html#ab31b17017e45238c4164da51881bcb30">  193</a></span>        <a class="code hl_typedef" href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FKeyGenInfo.html#ab31b17017e45238c4164da51881bcb30">ElementKeyShift</a>;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FKeyGenInfo.html#a5a01af617c512c002d5814832581df74">  194</a></span>        <a class="code hl_typedef" href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FKeyGenInfo.html#a5a01af617c512c002d5814832581df74">SortKeyMask</a>;<span class="comment"></span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="comment">        /** (SortKeyMask, SortKeyShift, SortKeySignBit, -) */</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FKeyGenInfo.html#a7a6c78ed141073f5cdd3f7bfe8849f39">  196</a></span>        <a class="code hl_typedef" href="MathFwd_8h.html#a6111b1eea8ef7f7e0ab87b4f4f7ce60c">FUintVector4</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FKeyGenInfo.html#a7a6c78ed141073f5cdd3f7bfe8849f39">SortKeyParams</a>; </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    };</div>
</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="comment"></span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="comment">    /** Holds data relative to client systems of the GPU sort manager. */</span></div>
<div class="foldopen" id="foldopen00202" data-start="{" data-end="};">
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FCallbackInfo.html">  202</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structFGPUSortManager_1_1FCallbackInfo.html">FCallbackInfo</a></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    {<span class="comment"></span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment">        /** A delegate used to initialize the keys and values. */</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FCallbackInfo.html#a9fec437870afbbaf32a60d989f344028">  205</a></span>        FGPUSortKeyGenDelegate <a class="code hl_variable" href="structFGPUSortManager_1_1FCallbackInfo.html#a9fec437870afbbaf32a60d989f344028">Delegate</a>;<span class="comment"></span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="comment">        /** The flag this client system might use when creating batches. */</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FCallbackInfo.html#ad7a7af2df38d604ed97dc0b208fe5dcd">  207</a></span>        <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FCallbackInfo.html#ad7a7af2df38d604ed97dc0b208fe5dcd">Flags</a> = <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6adf97f83acf6453d4a6a4b1070f3754">EGPUSortFlags::None</a>;<span class="comment"></span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="comment">        /** The name of this client system. Used for GPU markers. */</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FCallbackInfo.html#ad8467ad0d0d34765b89af0594a7cbc93">  209</a></span>        <a class="code hl_class" href="classFName.html">FName</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FCallbackInfo.html#ad8467ad0d0d34765b89af0594a7cbc93">Name</a>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    };</div>
</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#ade6ea6771ecfe7552b87d56e39cf999a">  212</a></span>    <span class="keyword">typedef</span> <a class="code hl_class" href="classTArray.html">TArray&lt;FCallbackInfo&gt;</a> <a class="code hl_typedef" href="classFGPUSortManager.html#ade6ea6771ecfe7552b87d56e39cf999a">FCallbackArray</a>;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="comment"></span> </div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span><span class="comment">    /** Different settings used to manage the buffer allocations. */</span></div>
<div class="foldopen" id="foldopen00215" data-start="{" data-end="};">
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSettings.html">  215</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structFGPUSortManager_1_1FSettings.html">FSettings</a></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    {<span class="comment"></span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span><span class="comment">        /** The union of all clients flags. */</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSettings.html#ad3053390b9fb161cd25fa797332b92f7">  218</a></span>        <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FSettings.html#ad3053390b9fb161cd25fa797332b92f7">AllowedFlags</a> = <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6adf97f83acf6453d4a6a4b1070f3754">EGPUSortFlags::None</a>;<span class="comment"></span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="comment">        /** The buffer slack when increasing or shrinking. See &quot;fx.GPUSort.BufferSlack&quot; */</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSettings.html#a885b98b9899a733544cee8e16da32a14">  220</a></span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="structFGPUSortManager_1_1FSettings.html#a885b98b9899a733544cee8e16da32a14">BufferSlack</a> = 2.f;<span class="comment"></span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span><span class="comment">        /** The number of frames before shrinking a buffer that is too big. See &quot;fx.GPUSort.FrameCountBeforeShrinking&quot; */</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSettings.html#a90b964d9d0313badc8725ccf25452197">  222</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FSettings.html#a90b964d9d0313badc8725ccf25452197">FrameCountBeforeShrinking</a> = 100;<span class="comment"></span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="comment">        /** The minimal size of the sort buffers. See &quot;fx.GPUSort.MinBufferSize&quot; */</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSettings.html#aacc6dc9146b5ffde22def533d71b38fa">  224</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FSettings.html#aacc6dc9146b5ffde22def533d71b38fa">MinBufferSize</a> = 8192;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    };</div>
</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span><span class="comment"></span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span><span class="comment">    /** A vertex buffer owning the final sorted values. */</span></div>
<div class="foldopen" id="foldopen00228" data-start="{" data-end="};">
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html">  228</a></span>    <span class="keyword">class </span><a class="code hl_function" href="classFGPUSortManager_1_1FValueBuffer.html#a80e6b3a4da3cc0e56c898edac24d45ca">FValueBuffer</a> : <span class="keyword">public</span> <a class="code hl_function" href="classFVertexBuffer.html#a8e4ad4b12601f9929aebd1106733a631">FVertexBuffer</a></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    {</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span><span class="comment"></span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="comment">        /**</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="comment">         * Create a value buffer of a given size. The render resource are created immediately.</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="comment">         *</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="comment">         * @param InAllocatedCount - The buffer size, allocated now.</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="comment">         * @param InUsedCount - An initial used count, typically the used size of the previous buffer in FDynamicValueBuffer::ValueBuffers.</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="comment">         * @param InSettings - The buffer allocation settings, in particular what data types are requires for SRV and UAV.</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span><span class="comment">         */</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#a80e6b3a4da3cc0e56c898edac24d45ca">  239</a></span>        <a class="code hl_function" href="classFGPUSortManager_1_1FValueBuffer.html#a80e6b3a4da3cc0e56c898edac24d45ca">FValueBuffer</a>(FRHICommandListBase&amp; RHICmdList, <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> InAllocatedCount, <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> InUsedCount, <span class="keyword">const</span> <a class="code hl_struct" href="structFGPUSortManager_1_1FSettings.html">FSettings</a>&amp; InSettings);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span> </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#a48f242771e1c18a1f0c6f78bcf1eb814">  241</a></span>        <a class="code hl_function" href="classFGPUSortManager_1_1FValueBuffer.html#a48f242771e1c18a1f0c6f78bcf1eb814">~FValueBuffer</a>() { <a class="code hl_function" href="classFGPUSortManager_1_1FValueBuffer.html#a33831485012182711d399406eb152c73">ReleaseRHI</a>(); }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="comment"></span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span><span class="comment">        /** Release the render resources. */</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#a33831485012182711d399406eb152c73">  244</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager_1_1FValueBuffer.html#a33831485012182711d399406eb152c73">ReleaseRHI</a>() override final;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span><span class="comment"></span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="comment">        /** Used for sorting */</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#a33c2049545909553e383c971ce1d9aae">  247</a></span>        FShaderResourceViewRHIRef <a class="code hl_variable" href="classFGPUSortManager_1_1FValueBuffer.html#a33c2049545909553e383c971ce1d9aae">UInt32SRV</a>;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#a08719ef265697f6748015902adc69c26">  248</a></span>        FUnorderedAccessViewRHIRef <a class="code hl_variable" href="classFGPUSortManager_1_1FValueBuffer.html#a08719ef265697f6748015902adc69c26">UInt32UAV</a>;<span class="comment"></span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment">        /** EGPUSortFlags::IndicesAsInt32 */</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#a2a75d0284c43dba0117d079dea8b0364">  250</a></span>        FShaderResourceViewRHIRef <a class="code hl_variable" href="classFGPUSortManager_1_1FValueBuffer.html#a2a75d0284c43dba0117d079dea8b0364">Int32SRV</a>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#ab8eee636c7179c3393d0814f89d20060">  251</a></span>        FUnorderedAccessViewRHIRef <a class="code hl_variable" href="classFGPUSortManager_1_1FValueBuffer.html#ab8eee636c7179c3393d0814f89d20060">Int32UAV</a>;<span class="comment"></span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span><span class="comment">        /** EGPUSortFlags::IndicesAsG16R16F */</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#a065d820d2a6bfdf0e29d45e996b6cdeb">  253</a></span>        FShaderResourceViewRHIRef <a class="code hl_variable" href="classFGPUSortManager_1_1FValueBuffer.html#a065d820d2a6bfdf0e29d45e996b6cdeb">G16R16SRV</a>;</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#a1a605d0d4295cbf6428f814a5a6c2eb5">  254</a></span>        FUnorderedAccessViewRHIRef <a class="code hl_variable" href="classFGPUSortManager_1_1FValueBuffer.html#a1a605d0d4295cbf6428f814a5a6c2eb5">G16R16UAV</a>;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment"></span> </div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment">        /** The actual buffer size. */</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#ad91233c3f52aa89128eaf15c6673da2a">  257</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="classFGPUSortManager_1_1FValueBuffer.html#ad91233c3f52aa89128eaf15c6673da2a">AllocatedCount</a> = 0;<span class="comment"></span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span><span class="comment">        /** The currently used size. */</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#aa50d978843e46aa8a43964e0c64b56b2">  259</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="classFGPUSortManager_1_1FValueBuffer.html#aa50d978843e46aa8a43964e0c64b56b2">UsedCount</a> = 0;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="comment"></span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="comment">        /**</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="comment">         * Allocate some space into the buffer. The buffer needs to be big enough to hold the allocation.</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="comment">         * </span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span><span class="comment">         * @param OutInfo - The details about the allocation bindings.</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><span class="comment">         * @param ValueCount - The number of elements to add to the buffer.</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span><span class="comment">         * @param Flags - Flag about what data format needs to be bound, see EGPUSortFlags::AnyValueFormat.</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="comment">         */</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno"><a class="line" href="classFGPUSortManager_1_1FValueBuffer.html#ae1fa1502b48b449a22dc6e28f274d103">  268</a></span>        <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager_1_1FValueBuffer.html#ae1fa1502b48b449a22dc6e28f274d103">Allocate</a>(<a class="code hl_struct" href="structFGPUSortManager_1_1FAllocationInfo.html">FAllocationInfo</a>&amp; OutInfo, <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="classFGPUSortManager.html#adaa0a93f31b20a048b4aa255b7a693bd">ValueCount</a>, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_enumvalue" href="ObjectMacros_8h.html#ab1b4d2b5a96eee3af0fdf40789726115a4ea7801f17a4e5485e8b050c052fb443">Flags</a>);</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    };</div>
</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a47e0a238600b8c21c2cf38fa52fbd611">  271</a></span>    typedef <a class="code hl_class" href="classTIndirectArray.html">TIndirectArray</a>&lt;<a class="code hl_class" href="classFGPUSortManager_1_1FValueBuffer.html">FValueBuffer</a>, <a class="code hl_typedef" href="ContainerAllocationPolicies_8h.html#a955ebaff17aade3efe4ecd32109bedea">TInlineAllocator</a>&lt;4&gt;&gt; <a class="code hl_typedef" href="classFGPUSortManager.html#a47e0a238600b8c21c2cf38fa52fbd611">FValueBufferArray</a>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span><span class="comment"></span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span><span class="comment">     * Encapsulates the idea of a growable FValueBuffer, that dynamically change in size depending on requirements.</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="comment">     * What is specific here is that even after being grown, previous references to the smaller version are still valid for a frame.</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span><span class="comment">     * This requirement comes client system registering GPU sort tasks in InitViews(), before the total size required for the frame is known.</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="comment">     */</span></div>
<div class="foldopen" id="foldopen00278" data-start="{" data-end="};">
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html">  278</a></span>    struct <a class="code hl_struct" href="structFGPUSortManager_1_1FDynamicValueBuffer.html">FDynamicValueBuffer</a></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    {</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a666dffd39909e20f5e846354b248f047">  280</a></span>        <a class="code hl_function" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a666dffd39909e20f5e846354b248f047">~FDynamicValueBuffer</a>() { <a class="code hl_function" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a10dc365fda1ce0bed2bebc81a467fe1d">ReleaseRHI</a>(); }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="comment"></span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="comment">        /** The current list of increasingly bigger value buffers. There will only be more than one element the frame the buffer grows. */</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a2dde24410f55bd442595e0ff58075846">  283</a></span>        <a class="code hl_typedef" href="classFGPUSortManager.html#a47e0a238600b8c21c2cf38fa52fbd611">FValueBufferArray</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a2dde24410f55bd442595e0ff58075846">ValueBuffers</a>;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span><span class="comment"></span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="comment">        /** A counter used to delay shrinking by several frames. */</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#ad612e4cdaf51d89f077c71fce76f1795">  286</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#ad612e4cdaf51d89f077c71fce76f1795">NumFramesRequiringShrinking</a> = 0;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="comment"></span> </div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span><span class="comment">        /** The last batch flags that used this buffer. Used to help rebind the same SortBatch between frames. */</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#ac0856303dec6eece7eca61ce1e1e3a20">  289</a></span>        <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#ac0856303dec6eece7eca61ce1e1e3a20">LastSortBatchFlags</a> = <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6adf97f83acf6453d4a6a4b1070f3754">EGPUSortFlags::None</a>;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="comment"></span> </div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span><span class="comment">        /** The sort batch using this buffer for this frame. */</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a3c4b4c680777c28ef5274832a6bb033d">  292</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a3c4b4c680777c28ef5274832a6bb033d">CurrentSortBatchId</a> = <a class="code hl_enumvalue" href="CoreMiscDefines_8h.html#aa4d6d990ee1dfe83152d54b747fd6bf2ad01831bececdd0e16bb9171d5278854d">INDEX_NONE</a>;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span><span class="comment"></span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><span class="comment">        /**</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span><span class="comment">         * Allocate some space into the buffer for this frame.</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span><span class="comment">         * </span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span><span class="comment">         * @param OutInfo - The details about the allocation bindings.</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><span class="comment">         * @param InSettings - Buffer allocation settings.</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span><span class="comment">         * @param ValueCount - The number of elements to add to the buffer.</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span><span class="comment">         * @param Flags - Flag about what data format needs to be bound, see EGPUSortFlags::AnyValueFormat.</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span><span class="comment">         */</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a1e096ba4fc44d86e84f3c48bf4382a22">  302</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a1e096ba4fc44d86e84f3c48bf4382a22">Allocate</a>(FRHICommandListBase&amp; RHICmdList, <a class="code hl_struct" href="structFGPUSortManager_1_1FAllocationInfo.html">FAllocationInfo</a>&amp; OutInfo, <span class="keyword">const</span> <a class="code hl_struct" href="structFGPUSortManager_1_1FSettings.html">FSettings</a>&amp; InSettings, <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="classFGPUSortManager.html#adaa0a93f31b20a048b4aa255b7a693bd">ValueCount</a>, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_enumvalue" href="ObjectMacros_8h.html#ab1b4d2b5a96eee3af0fdf40789726115a4ea7801f17a4e5485e8b050c052fb443">Flags</a>);</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span><span class="comment"></span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span><span class="comment">        /**</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span><span class="comment">         * Shrinks the buffer after it has been used this frame if applicable.</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="comment">         * Resets other data so that it can be reused on the next frame.</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="comment">         * This includes releasing the smaller buffers that where allocated </span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="comment">         * this frame if the buffer needed to be grown.</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="comment">         * </span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="comment">         * @param InSettings - Buffer allocation settings, in particular the number of frames required before actually shrinking.</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span><span class="comment">         */</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a8a871c5e982e6667d2a4ebcd0e22548b">  312</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a8a871c5e982e6667d2a4ebcd0e22548b">SkrinkAndReset</a>(FRHICommandListBase&amp; RHICmdList, <span class="keyword">const</span> <a class="code hl_struct" href="structFGPUSortManager_1_1FSettings.html">FSettings</a>&amp; InSettings);</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        <span class="comment"></span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span><span class="comment">        /** Release resources */</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a10dc365fda1ce0bed2bebc81a467fe1d">  315</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a10dc365fda1ce0bed2bebc81a467fe1d">ReleaseRHI</a>();<span class="comment"></span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span><span class="comment">        /** Get currently used size for this frame. */</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a784ee0a5981e32f03b1e395b3a7447ad">  317</a></span>        <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_function" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a784ee0a5981e32f03b1e395b3a7447ad">GetUsedCount</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a2dde24410f55bd442595e0ff58075846">ValueBuffers</a>.Num() ? <a class="code hl_variable" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a2dde24410f55bd442595e0ff58075846">ValueBuffers</a>.Last().UsedCount : 0; }<span class="comment"></span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span><span class="comment">        /** Get the buffer allocated size . */</span></div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a94c91068c57c7cea5db0069a82647882">  319</a></span>        <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_function" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a94c91068c57c7cea5db0069a82647882">GetAllocatedCount</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a2dde24410f55bd442595e0ff58075846">ValueBuffers</a>.Num() ? <a class="code hl_variable" href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a2dde24410f55bd442595e0ff58075846">ValueBuffers</a>.Last().AllocatedCount : 0; }</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    };</div>
</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#ab7ca044bb6af96a2a8600fd0f7d8073e">  322</a></span>    <span class="keyword">typedef</span> <a class="code hl_class" href="classTIndirectArray.html">TIndirectArray&lt;FDynamicValueBuffer, TInlineAllocator&lt;4&gt;</a>&gt; <a class="code hl_typedef" href="classFGPUSortManager.html#ab7ca044bb6af96a2a8600fd0f7d8073e">FDynamicValueBufferArray</a>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="comment"></span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span><span class="comment">     * Defines the order in which sort batches are processed every frame.  </span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span><span class="comment">     * KeyGenAfterPreRenderAndSortAfterPostRenderOpaque is the most complex case since</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span><span class="comment">     * the KeyGen is called after PreRendeR() while the sort only happens after PostRenderOpaque().</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span><span class="comment">     * This creates a situation where the FParticleSortBuffers need to be keep bound to the batch</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span><span class="comment">     * and can not be reused by other batches with this processing order.</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span><span class="comment">     * Note also that KeyGenAfterPreRenderAndSortAfterPostRenderOpaque could include KeyGen after PostRenderOpaque().</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span><span class="comment">     */</span></div>
<div class="foldopen" id="foldopen00332" data-start="{" data-end="};">
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18b">  332</a></span>    <span class="keyword">enum class</span> <a class="code hl_enumeration" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18b">ESortBatchProcessingOrder</a> : <a class="code hl_typedef" href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18baec0fc0100c4fc1ce4eea230c3dc10360">  334</a></span>        <a class="code hl_enumvalue" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18baec0fc0100c4fc1ce4eea230c3dc10360">Undefined</a> = 0,</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba28cae129c2f105a54fc791692cd3e893">  335</a></span>        <a class="code hl_enumvalue" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba28cae129c2f105a54fc791692cd3e893">KeyGenAndSortAfterPreRender</a> = 1,</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba98002cb85497f22ec0404b5a5a47281e">  336</a></span>        <a class="code hl_enumvalue" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba98002cb85497f22ec0404b5a5a47281e">KeyGenAfterPreRenderAndSortAfterPostRenderOpaque</a> = 2,</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba3dfc6f69aeae80c2b8b9d4b4d935008f">  337</a></span>        <a class="code hl_enumvalue" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba3dfc6f69aeae80c2b8b9d4b4d935008f">KeyGenAndSortAfterPostRenderOpaque</a> = 3,</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    };</div>
</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span><span class="comment"></span> </div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span><span class="comment">     * Defines a sort batch that regroups several sort tasks created by FGPUSortManager::AddTask(), becoming sort the batch elements.</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span><span class="comment">     * The condition to regroup task in the same batch rely mostly around the key precisions and the sort location (PreRender or PostRenderOpaque).</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span><span class="comment">     * Each SortBatch maps to a single GPU sort task.</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span><span class="comment">     */</span></div>
<div class="foldopen" id="foldopen00345" data-start="{" data-end="};">
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html">  345</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structFGPUSortManager_1_1FSortBatch.html">FSortBatch</a></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    {<span class="comment"></span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span><span class="comment">        /** An Id defining this batch. Passed along FGPUSortKeyGenDelegate. */</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#aedf78a58fa960723d28a868fef67e75a">  348</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#aedf78a58fa960723d28a868fef67e75a">Id</a> = <a class="code hl_enumvalue" href="CoreMiscDefines_8h.html#aa4d6d990ee1dfe83152d54b747fd6bf2ad01831bececdd0e16bb9171d5278854d">INDEX_NONE</a>;<span class="comment"></span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="comment">        /** The number of elements (tasks) grouped in this batch. */</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#a6b3f5ea64406a4d36a2a10bffd8a6ba3">  350</a></span>        <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#a6b3f5ea64406a4d36a2a10bffd8a6ba3">NumElements</a> = 0;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span><span class="comment"></span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="comment">        /**</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="comment">         * The common requirement flag for this batch. Compatible with each element.</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span><span class="comment">         * As tasks are added, the flag can become more restrictive, and new registered tasks </span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span><span class="comment">         * could require creating new batches if their requirements are too different.</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span><span class="comment">         */</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#ac15262e7e44499ac84087ddebc59f392">  357</a></span>        <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#ac15262e7e44499ac84087ddebc59f392">Flags</a> = <a class="code hl_enumvalue" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6adf97f83acf6453d4a6a4b1070f3754">EGPUSortFlags::None</a>;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span><span class="comment"></span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span><span class="comment">        /** The buffer to hold the final sorted values. */</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#a90ad40eac0a8623f7861f38791145bf0">  360</a></span>        <a class="code hl_struct" href="structFGPUSortManager_1_1FDynamicValueBuffer.html">FDynamicValueBuffer</a>* <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#a90ad40eac0a8623f7861f38791145bf0">DynamicValueBuffer</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="comment"></span> </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="comment">        /** The scratch buffers used to hold the initial keys and values and perform the GPU sort. */</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#a393ee5b69f4e4920f9750e1544a776d0">  363</a></span>        <a class="code hl_class" href="classFParticleSortBuffers.html">FParticleSortBuffers</a>* <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#a393ee5b69f4e4920f9750e1544a776d0">SortBuffers</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span><span class="comment"></span> </div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span><span class="comment">        /** This batch processing order in the frame. */</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#a90f2543a2b1d515dd5462411c9cb16fb">  366</a></span>        <a class="code hl_enumeration" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18b">ESortBatchProcessingOrder</a> <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#a90f2543a2b1d515dd5462411c9cb16fb">ProcessingOrder</a> = <a class="code hl_enumvalue" href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18baec0fc0100c4fc1ce4eea230c3dc10360">ESortBatchProcessingOrder::Undefined</a>;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span><span class="comment"></span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span><span class="comment">        /** Compute the processing order from the current value of Flags. */</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#a3d20aa3c8f3dde5834358d6a716de4a0">  369</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structFGPUSortManager_1_1FSortBatch.html#a3d20aa3c8f3dde5834358d6a716de4a0">UpdateProcessingOrder</a>();</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span><span class="comment"></span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span><span class="comment">        /**</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span><span class="comment">         * Call each delegate registered in the FGPUSortManager so they setup their task data for each element they own in the batch. </span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span><span class="comment">         * </span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span><span class="comment">         * @param RHICmdList - The command list used to perform the task.</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span><span class="comment">         * @param InCallbacks - The client system callbacks, from FGPUSortManager::Register().</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span><span class="comment">         * @param KeyGenLocation - The location in the frame where we are generating keys (see EGPUSortFlags::AnyKeyGenLocation).</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span><span class="comment">         */</span></div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#a98274140646f0f7ac64c4a19ceaf117f">  378</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structFGPUSortManager_1_1FSortBatch.html#a98274140646f0f7ac64c4a19ceaf117f">GenerateKeys</a>(FRHICommandListImmediate&amp; RHICmdList, <span class="keyword">const</span> <a class="code hl_typedef" href="classFGPUSortManager.html#ade6ea6771ecfe7552b87d56e39cf999a">FCallbackArray</a>&amp; InCallbacks, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> KeyGenLocation);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span><span class="comment"></span> </div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span><span class="comment">        /** </span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span><span class="comment">         * Perform the GPU sort and resolve to all buffers referenced in FGPUSortManager::AddTask(), if the buffer grew in size.</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span><span class="comment">         *</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span><span class="comment">         * @param RHICmdList - The command list used to perform the dispatches.</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span><span class="comment">         * @param InFeatureLevel - The current feature level, used to access the global shadermap.</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span><span class="comment">         */</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#ae2e6975f94600a921c41ae96a5fc2e8e">  386</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="structFGPUSortManager_1_1FSortBatch.html#ae2e6975f94600a921c41ae96a5fc2e8e">SortAndResolve</a>(FRHICommandListImmediate&amp; RHICmdList, ERHIFeatureLevel::Type InFeatureLevel);</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span><span class="comment"></span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span><span class="comment">        /** Get batch currently used size for this frame. */</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#a38296952420b0292f08d68bf05a5b72d">  389</a></span>        <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_function" href="structFGPUSortManager_1_1FSortBatch.html#a38296952420b0292f08d68bf05a5b72d">GetUsedValueCount</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#a90ad40eac0a8623f7861f38791145bf0">DynamicValueBuffer</a> ? <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#a90ad40eac0a8623f7861f38791145bf0">DynamicValueBuffer</a>-&gt;GetUsedCount() : 0; }<span class="comment"></span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span><span class="comment">        /** Get the batch buffer allocated size. */</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno"><a class="line" href="structFGPUSortManager_1_1FSortBatch.html#acb1bf3d5dfe7d3bdaf87c2243f983fdd">  391</a></span>        <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_function" href="structFGPUSortManager_1_1FSortBatch.html#acb1bf3d5dfe7d3bdaf87c2243f983fdd">GetAllocatedValueCount</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#a90ad40eac0a8623f7861f38791145bf0">DynamicValueBuffer</a> ? <a class="code hl_variable" href="structFGPUSortManager_1_1FSortBatch.html#a90ad40eac0a8623f7861f38791145bf0">DynamicValueBuffer</a>-&gt;GetAllocatedCount() : 0; }</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    };</div>
</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span><span class="comment"></span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="comment">    /** Expected that few will be enough, since we only need severals batches when ESortBatchProcessingOrder::KeyGenAfterPreRenderAndSortAfterPostRenderOpaque. */</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a31323be0d2ce1ea6e95bed83d6b46c88">  395</a></span>    <span class="keyword">typedef</span> <a class="code hl_class" href="classTArray.html">TArray&lt;FSortBatch, TInlineAllocator&lt;4&gt;</a>&gt; <a class="code hl_typedef" href="classFGPUSortManager.html#a31323be0d2ce1ea6e95bed83d6b46c88">FSortBatchArray</a>;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span><span class="comment"></span> </div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span><span class="comment">    /** Creates the sort manager, this is when the settings are configured. */</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#ae071f68c8ddda558e5e92e28e79d35ee">  400</a></span>    ENGINE_API <a class="code hl_function" href="classFGPUSortManager.html#ae071f68c8ddda558e5e92e28e79d35ee">FGPUSortManager</a>(ERHIFeatureLevel::Type InFeatureLevel);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a2899cb94ed81758f4b209ad415260d14">  402</a></span>    ENGINE_API <a class="code hl_function" href="classFGPUSortManager.html#a2899cb94ed81758f4b209ad415260d14">~FGPUSortManager</a>();</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span><span class="comment"></span> </div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span><span class="comment">     * Register a client system into the sort manager. Client systems are systems that will call AddTask().</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span><span class="comment">     * Those systems need to register a callback, the possible used flags for their tasks and a name.</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span><span class="comment">     * The callback is required because the initial content to perform GPU sorts is only configured long after</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span><span class="comment">     * AddTask() gets called in the rendering loop.</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span><span class="comment">     *</span></div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span><span class="comment">     * @param CallbackDelegate - The callback that will be used to set the initial keys and values for each batch elements.</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span><span class="comment">     * @param UsedFlags - The possibly used flags for each of the client system tasks, used to perform some optimizations.</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span><span class="comment">     * @param InName - A name defining this client system, used for GPU markers.</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span><span class="comment">     */</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a49757a496b3cd3f7eb4b40441833f14d">  414</a></span>    ENGINE_API <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager.html#a49757a496b3cd3f7eb4b40441833f14d">Register</a>(<span class="keyword">const</span> FGPUSortKeyGenDelegate&amp; CallbackDelegate, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> UsedFlags, <span class="keyword">const</span> <a class="code hl_class" href="classFName.html">FName</a>&amp; <a class="code hl_variable" href="UObjectGlobals_8h.html#aade03ce301c6264b112ef633e39c87b9">InName</a>); </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span><span class="comment"></span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span><span class="comment">     * Add a GPU sort task to process this frame. Tasks are expected to be created before OnPreRender() gets called.</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span><span class="comment">     *</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span><span class="comment">     * @param OutInfo - The details about the allocation bindings, if success.</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span><span class="comment">     * @param IndexCount - The number of values that need to be sorted by this task.</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span><span class="comment">     * @param SortFlags - The sort task requirements.</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span><span class="comment">     * </span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span><span class="comment">     * Return true if the task was added to a batch, false otherwise, could be because GPU sorting is disabled.</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span><span class="comment">     */</span></div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a3e679326cae8e894414ee5eabedcb8e8">  425</a></span>    ENGINE_API <span class="keywordtype">bool</span> <a class="code hl_function" href="classFGPUSortManager.html#a3e679326cae8e894414ee5eabedcb8e8">AddTask</a>(FRHICommandListBase&amp; RHICmdList, <a class="code hl_struct" href="structFGPUSortManager_1_1FAllocationInfo.html">FAllocationInfo</a>&amp; OutInfo, <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="classFGPUSortManager.html#adaa0a93f31b20a048b4aa255b7a693bd">ValueCount</a>, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="classFGPUSortManager.html#aff557bb0ea60c41637b1f8a5ce6d8c06">TaskFlags</a>);</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span> </div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#ac8c6138ebc0eddc2c20ebb002d3e1047">  427</a></span>    <a class="code hl_function" href="classFGPUSortManager.html#ac8c6138ebc0eddc2c20ebb002d3e1047">UE_DEPRECATED</a>(5.4, <span class="stringliteral">&quot;AddTask now requires a command list.&quot;</span>)</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#aff557bb0ea60c41637b1f8a5ce6d8c06">  428</a></span>    ENGINE_API <span class="keywordtype">bool</span> <a class="code hl_function" href="classFGPUSortManager.html#a3e679326cae8e894414ee5eabedcb8e8">AddTask</a>(<a class="code hl_struct" href="structFGPUSortManager_1_1FAllocationInfo.html">FAllocationInfo</a>&amp; OutInfo, <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> <a class="code hl_variable" href="classFGPUSortManager.html#adaa0a93f31b20a048b4aa255b7a693bd">ValueCount</a>, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="classFGPUSortManager.html#aff557bb0ea60c41637b1f8a5ce6d8c06">TaskFlags</a>);</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span><span class="comment"></span> </div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span><span class="comment">     * Callback that needs to be called in the rendering loop, after calls to FFXSystemInterface::PreRender() are issued.</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span><span class="comment">     * At this point, no other GPU sort tasks are allowed to be created through AddTask() as the sort batches</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="comment">     * get finalized. At this point, any task with the EGPUSortFlags::SortAfterPreRender will possibly be done,</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span><span class="comment">     * unless it also had the EGPUSortFlags::SortAfterPostRenderOpaque flag.</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span><span class="comment">     * Tasks with EGPUSortFlags::KeyGenAfterPreRender get their client callbacks issued to set the initial keys and values. </span></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span><span class="comment">     *</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span><span class="comment">     * @param RHICmdList - The command list to be used.</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span><span class="comment">     */</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a5c8d029ca73f996887fc8ab40aa1c50c">  439</a></span>    ENGINE_API <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager.html#a5c8d029ca73f996887fc8ab40aa1c50c">OnPreRender</a>(class <a class="code hl_class" href="classFRDGBuilder.html">FRDGBuilder</a>&amp; GraphBuilder);</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span><span class="comment"></span> </div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span><span class="comment">     * Callback that needs to be called in the rendering loop, after calls to FFXSystemInterface::PostRenderOpaque() are issued.</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span><span class="comment">     * Tasks with EGPUSortFlags::KeyGenAfterPostRenderOpaque get their client callbacks issued to set the initial keys and values. </span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span><span class="comment">     * After this any sort task that hasn&#39;t been processed yet, in OnPreRender(), gets processed now.</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span><span class="comment">     *</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span><span class="comment">     * @param RHICmdList - The command list to be used.</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span><span class="comment">     */</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a8917adc0750093d411e12fc1dc3228c0">  448</a></span>    ENGINE_API <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager.html#a8917adc0750093d411e12fc1dc3228c0">OnPostRenderOpaque</a>(class <a class="code hl_class" href="classFRDGBuilder.html">FRDGBuilder</a>&amp; GraphBuilder);</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span><span class="comment"></span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span><span class="comment">     * Event to register and receive post-prerender notification.</span></div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span><span class="comment">     */</span> </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a9f008e4860a473b48b508711b251fbd8">  453</a></span>    <a class="code hl_function" href="classFGPUSortManager.html#a9f008e4860a473b48b508711b251fbd8">DECLARE_EVENT_OneParam</a>(<a class="code hl_function" href="classFGPUSortManager.html#ae071f68c8ddda558e5e92e28e79d35ee">FGPUSortManager</a>, FPostPreRenderEvent, FRHICommandListImmediate&amp;);</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a2ffae60f4d5f4223a90fab901b9ed6e9">  454</a></span>    FPostPreRenderEvent <a class="code hl_variable" href="classFGPUSortManager.html#a2ffae60f4d5f4223a90fab901b9ed6e9">PostPreRenderEvent</a>;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span><span class="comment"></span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span><span class="comment">     * Event to register and receive post-postrender notification.</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span><span class="comment">     */</span></div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#aadce643f691f3c8a2cced621ad513a6b">  459</a></span>    <a class="code hl_function" href="classFGPUSortManager.html#a9f008e4860a473b48b508711b251fbd8">DECLARE_EVENT_OneParam</a>(<a class="code hl_function" href="classFGPUSortManager.html#ae071f68c8ddda558e5e92e28e79d35ee">FGPUSortManager</a>, FPostPostRenderEvent, FRHICommandListImmediate&amp;);</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a63876fe89537b82a6c645c41a693d414">  460</a></span>    FPostPreRenderEvent <a class="code hl_variable" href="classFGPUSortManager.html#a63876fe89537b82a6c645c41a693d414">PostPostRenderEvent</a>;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>private:</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span><span class="comment"></span> </div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span><span class="comment">    /** A helper to test that a flag has one and exactly one of A or B. */</span></div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#ac75e222cd51fb5d6cc2ba129d02cec43">  465</a></span>    static <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <span class="keywordtype">bool</span> <a class="code hl_function" href="classFGPUSortManager.html#ac75e222cd51fb5d6cc2ba129d02cec43">HasEither</a>(<a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_enumvalue" href="ObjectMacros_8h.html#ab1b4d2b5a96eee3af0fdf40789726115a4ea7801f17a4e5485e8b050c052fb443">Flags</a>, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="UnrealTemplate_8h.html#a9e12b41f3d08e8811bfeb113252bc758">A</a>, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="UnrealTemplate_8h.html#a3bf2a64b1ec6371a2fadc572135bacd9">B</a>);<span class="comment"></span></div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span><span class="comment">    /** Create the initial batch flags from a task flags. */</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#ab08b697a091b606b1af6f916ade8e3b0">  467</a></span>    static <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_function" href="classFGPUSortManager.html#ab08b697a091b606b1af6f916ade8e3b0">GetBatchFlags</a>(<a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="classFGPUSortManager.html#aff557bb0ea60c41637b1f8a5ce6d8c06">TaskFlags</a>);<span class="comment"></span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span><span class="comment">    /** Update a batch flags after adding a task into it. */</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a60a146eccf62d3fdbf6550f1c5c731c2">  469</a></span>    static <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_function" href="classFGPUSortManager.html#a60a146eccf62d3fdbf6550f1c5c731c2">CombineBatchFlags</a>(<a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> BatchFlags, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="classFGPUSortManager.html#aff557bb0ea60c41637b1f8a5ce6d8c06">TaskFlags</a>);<span class="comment"></span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span><span class="comment">    /** Test whether a batch flags are compatible with a given task. Used to know if the task can be merged in the batch.  */</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a308a8a5422851c225fbe91346bb39c12">  471</a></span>    static <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <span class="keywordtype">bool</span> <a class="code hl_function" href="classFGPUSortManager.html#a308a8a5422851c225fbe91346bb39c12">TestBatchFlags</a>(<a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> BatchFlags, <a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="classFGPUSortManager.html#aff557bb0ea60c41637b1f8a5ce6d8c06">TaskFlags</a>);<span class="comment"></span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span><span class="comment">    /** Convert the precision flags into a string, used for GPU markers. */</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#abe7580d52695f333af59dc3d610e1d97">  473</a></span>    static <a class="code hl_define" href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> auto <a class="code hl_function" href="classFGPUSortManager.html#abe7580d52695f333af59dc3d610e1d97">GetPrecisionString</a>(<a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> BatchFlags) -&gt; <a class="code hl_typedef" href="Platform_8h.html#a74140f1ff3f7a51b1ac752f90283f3d6">TCHAR</a> const(&amp;)[1];</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span><span class="comment"></span> </div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span><span class="comment">     * Find an unused buffer to assign to a newly created FSortBatch. </span></div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span><span class="comment">     * Although the sort batches are recreated every frame depending on what is being visible,</span></div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span><span class="comment">     * the buffers used to sort the indices and store the sorted results are persistent to some extent </span></div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span><span class="comment">     * (see FBufferAllocationSettings which define the allocation and lifetime strategy).</span></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span><span class="comment">     *</span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span><span class="comment">     * Each persistent buffer being assigned to one frame batch, we try to rebind the same buffers to the same batches</span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span><span class="comment">     * by using the constraints being imposed on the batch through the sortflags. The reason to do so is that </span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span><span class="comment">     * the allocation strategy for the buffer is meant to be optimal if the required buffer size is consistent between frames.</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span><span class="comment">     * (the batch flags are linked to the emitters being grouped into it, and so is the batch sorted indices count)</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span><span class="comment">     *</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span><span class="comment">     * @param TaskFlags - Some constraints being applied to the batch, using to help match the same buffers to the same batches between frames.</span></div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span><span class="comment">     * @param SortBatchId - The newly created batch index which will use the buffer this frame.</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span><span class="comment">     * </span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span><span class="comment">     * Return a buffer to store the sorted particle indices.</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span><span class="comment">     */</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a2a4e370b8df4d7faed9433925b7c4d84">  491</a></span>    <a class="code hl_struct" href="structFGPUSortManager_1_1FDynamicValueBuffer.html">FDynamicValueBuffer</a>* <a class="code hl_function" href="classFGPUSortManager.html#a2a4e370b8df4d7faed9433925b7c4d84">GetDynamicValueBufferFromPool</a>(<a class="code hl_enumeration" href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a> <a class="code hl_variable" href="classFGPUSortManager.html#aff557bb0ea60c41637b1f8a5ce6d8c06">TaskFlags</a>, <a class="code hl_variable" href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a> SortBatchId);</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span><span class="comment"></span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span><span class="comment">    /** Setup the final sort flags and the processing order of all batches. Called after no other tasks will be added this frame. */</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a3778240dcda5e283eeb708e6f76fcacd">  494</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager.html#a3778240dcda5e283eeb708e6f76fcacd">FinalizeSortBatches</a>();<span class="comment"></span></div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span><span class="comment">    /** Make sure there is enough GPU sort buffers to satisfy all batches created this frame. Free one used ones. */</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a2c25e8c2999cbb8ca48583fe908b7825">  496</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager.html#a2c25e8c2999cbb8ca48583fe908b7825">UpdateSortBuffersPool</a>(FRHICommandListBase&amp; RHICmdList);<span class="comment"></span></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span><span class="comment">    /** Resize (shrink) the DynamicValueBuffers and free the unused ones. */</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a9c5148f0a808c64d8dd8e7370946cac2">  498</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager.html#a9c5148f0a808c64d8dd8e7370946cac2">ResetDynamicValuesBuffers</a>(FRHICommandListBase&amp; RHICmdList);<span class="comment"></span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span><span class="comment">    /** Delete all GPU sort buffers. */</span></div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a19f73310daa26ee83b75810e806ce0d7">  500</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classFGPUSortManager.html#a19f73310daa26ee83b75810e806ce0d7">ReleaseSortBuffers</a>();</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span><span class="comment"></span> </div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span><span class="comment">     * The different batches that will be used this frame, each one ending up being sorting work on the GPU.</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span><span class="comment">     * In many cases, there will only be one batch but some cases makes it possible to have 2 </span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span><span class="comment">     * or more (for example when different key precision are used).</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span><span class="comment">     */</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a9ecdf90192f3d1f8c153e979f3ac8862">  507</a></span>    <a class="code hl_typedef" href="classFGPUSortManager.html#a31323be0d2ce1ea6e95bed83d6b46c88">FSortBatchArray</a> <a class="code hl_variable" href="classFGPUSortManager.html#a9ecdf90192f3d1f8c153e979f3ac8862">SortBatches</a>;</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span><span class="comment"></span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span><span class="comment">    /** Settings to handle the buffer reallocation strategy. */</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a1394451c6eb4ee2e1de7731187612d16">  510</a></span>    <a class="code hl_struct" href="structFGPUSortManager_1_1FSettings.html">FSettings</a> <a class="code hl_variable" href="classFGPUSortManager.html#a1394451c6eb4ee2e1de7731187612d16">Settings</a>;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span><span class="comment"></span> </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span><span class="comment">    /** A pool of buffer to hold the final sorted values for each batch. Reused between frames. */</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a4c850a5b450f9d935d2b8ede8f21498d">  513</a></span>    <a class="code hl_typedef" href="classFGPUSortManager.html#ab7ca044bb6af96a2a8600fd0f7d8073e">FDynamicValueBufferArray</a> <a class="code hl_variable" href="classFGPUSortManager.html#a4c850a5b450f9d935d2b8ede8f21498d">DynamicValueBufferPool</a>;</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span><span class="comment"></span> </div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span><span class="comment">    /** A pool of GPU sort buffers. The same sort GPU buffer can normally be used in several sort batches. */</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a8657b364f904fcd1fc1a27548380957e">  516</a></span>    <a class="code hl_class" href="classTArray.html">TArray</a>&lt;<a class="code hl_class" href="classFParticleSortBuffers.html">FParticleSortBuffers</a>*, <a class="code hl_typedef" href="ContainerAllocationPolicies_8h.html#a955ebaff17aade3efe4ecd32109bedea">TInlineAllocator</a>&lt;2&gt;&gt; <a class="code hl_variable" href="classFGPUSortManager.html#a8657b364f904fcd1fc1a27548380957e">SortBuffersPool</a>;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span><span class="comment"></span> </div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span><span class="comment">    /** The client system callbacks, see Register(). */</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a6c7c048fd196faaf2a41ae5a0d55415a">  519</a></span>    <a class="code hl_typedef" href="classFGPUSortManager.html#ade6ea6771ecfe7552b87d56e39cf999a">FCallbackArray</a> <a class="code hl_variable" href="classFGPUSortManager.html#a6c7c048fd196faaf2a41ae5a0d55415a">Callbacks</a>;</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span><span class="comment"></span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span><span class="comment">    /** The current feature level, needed to access the global shader map. */</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno"><a class="line" href="classFGPUSortManager.html#a2b2c373d1688e59ac3f65a2786c8aafa">  522</a></span>    <a class="code hl_namespace" href="namespaceERHIFeatureLevel.html">ERHIFeatureLevel</a>::<a class="code hl_class" href="classTAlignedTypedef.html">Type</a> <a class="code hl_variable" href="classFGPUSortManager.html#a2b2c373d1688e59ac3f65a2786c8aafa">FeatureLevel</a>;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>};</div>
</div>
<div class="ttc" id="aAndroidPlatform_8h_html_a724fb9f82013c782db5c3c12ea36aac8"><div class="ttname"><a href="AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a></div><div class="ttdeci">#define FORCEINLINE</div><div class="ttdef"><b>Definition</b> <a href="AndroidPlatform_8h_source.html#l00140">AndroidPlatform.h:140</a></div></div>
<div class="ttc" id="aAssertionMacros_8h_html_a586e110623cde145b8a5bdefb429e144"><div class="ttname"><a href="AssertionMacros_8h.html#a586e110623cde145b8a5bdefb429e144">check</a></div><div class="ttdeci">#define check(expr)</div><div class="ttdef"><b>Definition</b> <a href="AssertionMacros_8h_source.html#l00327">AssertionMacros.h:327</a></div></div>
<div class="ttc" id="aContainerAllocationPolicies_8h_html_a955ebaff17aade3efe4ecd32109bedea"><div class="ttname"><a href="ContainerAllocationPolicies_8h.html#a955ebaff17aade3efe4ecd32109bedea">TInlineAllocator</a></div><div class="ttdeci">TSizedInlineAllocator&lt; NumInlineElements, 32, SecondaryAllocator &gt; TInlineAllocator</div><div class="ttdef"><b>Definition</b> <a href="ContainerAllocationPolicies_8h_source.html#l01020">ContainerAllocationPolicies.h:1020</a></div></div>
<div class="ttc" id="aCoreMinimal_8h_html"><div class="ttname"><a href="CoreMinimal_8h.html">CoreMinimal.h</a></div></div>
<div class="ttc" id="aCoreMiscDefines_8h_html_aa4d6d990ee1dfe83152d54b747fd6bf2ad01831bececdd0e16bb9171d5278854d"><div class="ttname"><a href="CoreMiscDefines_8h.html#aa4d6d990ee1dfe83152d54b747fd6bf2ad01831bececdd0e16bb9171d5278854d">INDEX_NONE</a></div><div class="ttdeci">@ INDEX_NONE</div><div class="ttdef"><b>Definition</b> <a href="CoreMiscDefines_8h_source.html#l00150">CoreMiscDefines.h:150</a></div></div>
<div class="ttc" id="aDelegateCombinations_8h_html_abb99a9c6443c4c1d3c3329fa9a147804"><div class="ttname"><a href="DelegateCombinations_8h.html#abb99a9c6443c4c1d3c3329fa9a147804">DECLARE_DELEGATE_SixParams</a></div><div class="ttdeci">#define DECLARE_DELEGATE_SixParams(DelegateName, Param1Type, Param2Type, Param3Type, Param4Type, Param5Type, Param6Type)</div><div class="ttdef"><b>Definition</b> <a href="DelegateCombinations_8h_source.html#l00093">DelegateCombinations.h:93</a></div></div>
<div class="ttc" id="aEnumClassFlags_8h_html_a80975a5eda8bee64896556c6df5807d7"><div class="ttname"><a href="EnumClassFlags_8h.html#a80975a5eda8bee64896556c6df5807d7">ENUM_CLASS_FLAGS</a></div><div class="ttdeci">#define ENUM_CLASS_FLAGS(Enum)</div><div class="ttdef"><b>Definition</b> <a href="EnumClassFlags_8h_source.html#l00006">EnumClassFlags.h:6</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a5613c6c7c852953c5ac0195f5c5e83e9"><div class="ttname"><a href="GPUSortManager_8h.html#a5613c6c7c852953c5ac0195f5c5e83e9">int32</a></div><div class="ttdeci">FRHICommandListImmediate int32</div><div class="ttdef"><b>Definition</b> <a href="#l00158">GPUSortManager.h:158</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a58ff6a6755410d24d26568cfaa590297"><div class="ttname"><a href="GPUSortManager_8h.html#a58ff6a6755410d24d26568cfaa590297">CopyUIntBufferToTargets</a></div><div class="ttdeci">void CopyUIntBufferToTargets(FRHICommandList &amp;RHICmdList, ERHIFeatureLevel::Type FeatureLevel, FRHIShaderResourceView *SourceSRV, FRHIUnorderedAccessView *const *TargetUAVs, int32 *TargetSizes, int32 StartingOffset, int32 NumTargets)</div><div class="ttdoc">Copy one uint buffer into several overlapping targets.</div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9">EGPUSortFlags</a></div><div class="ttdeci">EGPUSortFlags</div><div class="ttdoc">Different sort flags used to define constraint for FGPUSortManager tasks.</div><div class="ttdef"><b>Definition</b> <a href="#l00094">GPUSortManager.h:95</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a00c5859ce439ee8aa1047a737e857152"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a00c5859ce439ee8aa1047a737e857152">EGPUSortFlags::KeyGenAfterPreRender</a></div><div class="ttdeci">@ KeyGenAfterPreRender</div><div class="ttdoc">The sort task are created in FPrimitiveSceneProxy::GetDynamicMeshElements() but have different requir...</div><div class="ttdef"><b>Definition</b> <a href="#l00117">GPUSortManager.h:117</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a23a36eeaad01b1f76979d14135f652ea"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a23a36eeaad01b1f76979d14135f652ea">EGPUSortFlags::AnyValueFormat</a></div><div class="ttdeci">@ AnyValueFormat</div><div class="ttdef"><b>Definition</b> <a href="#l00141">GPUSortManager.h:141</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a2adfd6e2c47c97daaade0690f919dbf3"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a2adfd6e2c47c97daaade0690f919dbf3">EGPUSortFlags::LowPrecisionKeys</a></div><div class="ttdeci">@ LowPrecisionKeys</div><div class="ttdoc">Sorting happens on either 16 bit keys or 32 bit uint keys.</div><div class="ttdef"><b>Definition</b> <a href="#l00104">GPUSortManager.h:104</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a36ace15a900e67ea470f504c487aa0da"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a36ace15a900e67ea470f504c487aa0da">EGPUSortFlags::SortAfterPostRenderOpaque</a></div><div class="ttdeci">@ SortAfterPostRenderOpaque</div><div class="ttdef"><b>Definition</b> <a href="#l00130">GPUSortManager.h:130</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a39ce58881e43fc13193dd50be8d8360a"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a39ce58881e43fc13193dd50be8d8360a">EGPUSortFlags::ValuesAsG16R16F</a></div><div class="ttdeci">@ ValuesAsG16R16F</div><div class="ttdoc">The sorted values can either be read as 1D or 2D, but doesn&#39;t otherwise affect the sorting implementa...</div><div class="ttdef"><b>Definition</b> <a href="#l00138">GPUSortManager.h:138</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a54737b6e1f1de6b175cac2ad38daf966"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a54737b6e1f1de6b175cac2ad38daf966">EGPUSortFlags::HighPrecisionKeys</a></div><div class="ttdeci">@ HighPrecisionKeys</div><div class="ttdef"><b>Definition</b> <a href="#l00105">GPUSortManager.h:105</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a5be97b223105b17aa32b4f3cb53c9f73"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a5be97b223105b17aa32b4f3cb53c9f73">EGPUSortFlags::SortAfterPreRender</a></div><div class="ttdeci">@ SortAfterPreRender</div><div class="ttdoc">Once keys are generated, they must be sorted and the indices only need to be ready before the primiti...</div><div class="ttdef"><b>Definition</b> <a href="#l00129">GPUSortManager.h:129</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a5e001f1d59d743aa0ab94f080f01bd7b"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a5e001f1d59d743aa0ab94f080f01bd7b">EGPUSortFlags::KeyGenAfterPostRenderOpaque</a></div><div class="ttdeci">@ KeyGenAfterPostRenderOpaque</div><div class="ttdef"><b>Definition</b> <a href="#l00118">GPUSortManager.h:118</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a6878d59f868118ac98b3fc2f3ba3a106"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6878d59f868118ac98b3fc2f3ba3a106">EGPUSortFlags::AnyKeyPrecision</a></div><div class="ttdeci">@ AnyKeyPrecision</div><div class="ttdef"><b>Definition</b> <a href="#l00107">GPUSortManager.h:107</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9a6adf97f83acf6453d4a6a4b1070f3754">EGPUSortFlags::None</a></div><div class="ttdeci">@ None</div><div class="ttdef"><b>Definition</b> <a href="#l00096">GPUSortManager.h:96</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9aa74778a62c6e7a091143dbba810a7fb6"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9aa74778a62c6e7a091143dbba810a7fb6">EGPUSortFlags::AnySortLocation</a></div><div class="ttdeci">@ AnySortLocation</div><div class="ttdef"><b>Definition</b> <a href="#l00132">GPUSortManager.h:132</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9aa893550952d7007756585f9a6e715693"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9aa893550952d7007756585f9a6e715693">EGPUSortFlags::ValuesAsInt32</a></div><div class="ttdeci">@ ValuesAsInt32</div><div class="ttdef"><b>Definition</b> <a href="#l00139">GPUSortManager.h:139</a></div></div>
<div class="ttc" id="aGPUSortManager_8h_html_a9ff3a0d25b04773ce27866f66eea39b9ae5e866cc673d8accd816936ba3e76525"><div class="ttname"><a href="GPUSortManager_8h.html#a9ff3a0d25b04773ce27866f66eea39b9ae5e866cc673d8accd816936ba3e76525">EGPUSortFlags::AnyKeyGenLocation</a></div><div class="ttdeci">@ AnyKeyGenLocation</div><div class="ttdef"><b>Definition</b> <a href="#l00120">GPUSortManager.h:120</a></div></div>
<div class="ttc" id="aMathFwd_8h_html_a6111b1eea8ef7f7e0ab87b4f4f7ce60c"><div class="ttname"><a href="MathFwd_8h.html#a6111b1eea8ef7f7e0ab87b4f4f7ce60c">FUintVector4</a></div><div class="ttdeci">UE::Math::TIntVector4&lt; uint32 &gt; FUintVector4</div><div class="ttdef"><b>Definition</b> <a href="MathFwd_8h_source.html#l00105">MathFwd.h:105</a></div></div>
<div class="ttc" id="aObjectMacros_8h_html_ab1b4d2b5a96eee3af0fdf40789726115a4ea7801f17a4e5485e8b050c052fb443"><div class="ttname"><a href="ObjectMacros_8h.html#ab1b4d2b5a96eee3af0fdf40789726115a4ea7801f17a4e5485e8b050c052fb443">EEnumFlags::Flags</a></div><div class="ttdeci">@ Flags</div><div class="ttdef"><b>Definition</b> <a href="ObjectMacros_8h_source.html#l00669">ObjectMacros.h:669</a></div></div>
<div class="ttc" id="aPlatform_8h_html_a74140f1ff3f7a51b1ac752f90283f3d6"><div class="ttname"><a href="Platform_8h.html#a74140f1ff3f7a51b1ac752f90283f3d6">TCHAR</a></div><div class="ttdeci">FPlatformTypes::TCHAR TCHAR</div><div class="ttdoc">Either ANSICHAR or WIDECHAR, depending on whether the platform supports wide characters or the requir...</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01085">Platform.h:1085</a></div></div>
<div class="ttc" id="aPlatform_8h_html_a8c7a127091efbdfc5a16939041653e05"><div class="ttname"><a href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a></div><div class="ttdeci">FPlatformTypes::uint32 uint32</div><div class="ttdoc">A 32-bit unsigned integer.</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01065">Platform.h:1065</a></div></div>
<div class="ttc" id="aPlatform_8h_html_a8dbb3cd84ca9fd010dadfc3815eefa5d"><div class="ttname"><a href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a></div><div class="ttdeci">FPlatformTypes::int32 int32</div><div class="ttdoc">A 32-bit signed integer.</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01075">Platform.h:1075</a></div></div>
<div class="ttc" id="aRefCounting_8h_html"><div class="ttname"><a href="RefCounting_8h.html">RefCounting.h</a></div></div>
<div class="ttc" id="aRenderResource_8h_html"><div class="ttname"><a href="RenderResource_8h.html">RenderResource.h</a></div></div>
<div class="ttc" id="aUObjectGlobals_8h_html_aade03ce301c6264b112ef633e39c87b9"><div class="ttname"><a href="UObjectGlobals_8h.html#aade03ce301c6264b112ef633e39c87b9">InName</a></div><div class="ttdeci">UObject FName InName</div><div class="ttdef"><b>Definition</b> <a href="UObjectGlobals_8h_source.html#l00312">UObjectGlobals.h:312</a></div></div>
<div class="ttc" id="aUVEditorUVTransformOp_8h_html_ae6469b0c80e9815a96d759582301d517a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="UVEditorUVTransformOp_8h.html#ae6469b0c80e9815a96d759582301d517a6adf97f83acf6453d4a6a4b1070f3754">EUVEditorAlignDirection::None</a></div><div class="ttdeci">@ None</div><div class="ttdef"><b>Definition</b> <a href="UVEditorUVTransformOp_8h_source.html#l00062">UVEditorUVTransformOp.h:62</a></div></div>
<div class="ttc" id="aUnrealTemplate_8h_html_a3bf2a64b1ec6371a2fadc572135bacd9"><div class="ttname"><a href="UnrealTemplate_8h.html#a3bf2a64b1ec6371a2fadc572135bacd9">B</a></div><div class="ttdeci">ReferencedType * B</div><div class="ttdef"><b>Definition</b> <a href="UnrealTemplate_8h_source.html#l00028">UnrealTemplate.h:29</a></div></div>
<div class="ttc" id="aUnrealTemplate_8h_html_a9e12b41f3d08e8811bfeb113252bc758"><div class="ttname"><a href="UnrealTemplate_8h.html#a9e12b41f3d08e8811bfeb113252bc758">A</a></div><div class="ttdeci">ReferencedType * A</div><div class="ttdef"><b>Definition</b> <a href="UnrealTemplate_8h_source.html#l00038">UnrealTemplate.h:38</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html">FGPUSortManager::FValueBuffer</a></div><div class="ttdoc">A vertex buffer owning the final sorted values.</div><div class="ttdef"><b>Definition</b> <a href="#l00228">GPUSortManager.h:229</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_a065d820d2a6bfdf0e29d45e996b6cdeb"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#a065d820d2a6bfdf0e29d45e996b6cdeb">FGPUSortManager::FValueBuffer::G16R16SRV</a></div><div class="ttdeci">FShaderResourceViewRHIRef G16R16SRV</div><div class="ttdoc">EGPUSortFlags::IndicesAsG16R16F.</div><div class="ttdef"><b>Definition</b> <a href="#l00253">GPUSortManager.h:253</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_a08719ef265697f6748015902adc69c26"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#a08719ef265697f6748015902adc69c26">FGPUSortManager::FValueBuffer::UInt32UAV</a></div><div class="ttdeci">FUnorderedAccessViewRHIRef UInt32UAV</div><div class="ttdef"><b>Definition</b> <a href="#l00248">GPUSortManager.h:248</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_a1a605d0d4295cbf6428f814a5a6c2eb5"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#a1a605d0d4295cbf6428f814a5a6c2eb5">FGPUSortManager::FValueBuffer::G16R16UAV</a></div><div class="ttdeci">FUnorderedAccessViewRHIRef G16R16UAV</div><div class="ttdef"><b>Definition</b> <a href="#l00254">GPUSortManager.h:254</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_a2a75d0284c43dba0117d079dea8b0364"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#a2a75d0284c43dba0117d079dea8b0364">FGPUSortManager::FValueBuffer::Int32SRV</a></div><div class="ttdeci">FShaderResourceViewRHIRef Int32SRV</div><div class="ttdoc">EGPUSortFlags::IndicesAsInt32.</div><div class="ttdef"><b>Definition</b> <a href="#l00250">GPUSortManager.h:250</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_a33831485012182711d399406eb152c73"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#a33831485012182711d399406eb152c73">FGPUSortManager::FValueBuffer::ReleaseRHI</a></div><div class="ttdeci">void ReleaseRHI() override final</div><div class="ttdoc">Release the render resources.</div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_a33c2049545909553e383c971ce1d9aae"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#a33c2049545909553e383c971ce1d9aae">FGPUSortManager::FValueBuffer::UInt32SRV</a></div><div class="ttdeci">FShaderResourceViewRHIRef UInt32SRV</div><div class="ttdoc">Used for sorting.</div><div class="ttdef"><b>Definition</b> <a href="#l00247">GPUSortManager.h:247</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_a48f242771e1c18a1f0c6f78bcf1eb814"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#a48f242771e1c18a1f0c6f78bcf1eb814">FGPUSortManager::FValueBuffer::~FValueBuffer</a></div><div class="ttdeci">~FValueBuffer()</div><div class="ttdef"><b>Definition</b> <a href="#l00241">GPUSortManager.h:241</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_a80e6b3a4da3cc0e56c898edac24d45ca"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#a80e6b3a4da3cc0e56c898edac24d45ca">FGPUSortManager::FValueBuffer::FValueBuffer</a></div><div class="ttdeci">FValueBuffer(FRHICommandListBase &amp;RHICmdList, int32 InAllocatedCount, int32 InUsedCount, const FSettings &amp;InSettings)</div><div class="ttdoc">Create a value buffer of a given size.</div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_aa50d978843e46aa8a43964e0c64b56b2"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#aa50d978843e46aa8a43964e0c64b56b2">FGPUSortManager::FValueBuffer::UsedCount</a></div><div class="ttdeci">int32 UsedCount</div><div class="ttdoc">The currently used size.</div><div class="ttdef"><b>Definition</b> <a href="#l00259">GPUSortManager.h:259</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_ab8eee636c7179c3393d0814f89d20060"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#ab8eee636c7179c3393d0814f89d20060">FGPUSortManager::FValueBuffer::Int32UAV</a></div><div class="ttdeci">FUnorderedAccessViewRHIRef Int32UAV</div><div class="ttdef"><b>Definition</b> <a href="#l00251">GPUSortManager.h:251</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_ad91233c3f52aa89128eaf15c6673da2a"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#ad91233c3f52aa89128eaf15c6673da2a">FGPUSortManager::FValueBuffer::AllocatedCount</a></div><div class="ttdeci">int32 AllocatedCount</div><div class="ttdoc">The actual buffer size.</div><div class="ttdef"><b>Definition</b> <a href="#l00257">GPUSortManager.h:257</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_1_1FValueBuffer_html_ae1fa1502b48b449a22dc6e28f274d103"><div class="ttname"><a href="classFGPUSortManager_1_1FValueBuffer.html#ae1fa1502b48b449a22dc6e28f274d103">FGPUSortManager::FValueBuffer::Allocate</a></div><div class="ttdeci">FORCEINLINE void Allocate(FAllocationInfo &amp;OutInfo, int32 ValueCount, EGPUSortFlags Flags)</div><div class="ttdoc">Allocate some space into the buffer.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a1394451c6eb4ee2e1de7731187612d16"><div class="ttname"><a href="classFGPUSortManager.html#a1394451c6eb4ee2e1de7731187612d16">FGPUSortManager::Settings</a></div><div class="ttdeci">FSettings Settings</div><div class="ttdoc">Settings to handle the buffer reallocation strategy.</div><div class="ttdef"><b>Definition</b> <a href="#l00510">GPUSortManager.h:510</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a19f73310daa26ee83b75810e806ce0d7"><div class="ttname"><a href="classFGPUSortManager.html#a19f73310daa26ee83b75810e806ce0d7">FGPUSortManager::ReleaseSortBuffers</a></div><div class="ttdeci">void ReleaseSortBuffers()</div><div class="ttdoc">Delete all GPU sort buffers.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a2899cb94ed81758f4b209ad415260d14"><div class="ttname"><a href="classFGPUSortManager.html#a2899cb94ed81758f4b209ad415260d14">FGPUSortManager::~FGPUSortManager</a></div><div class="ttdeci">~FGPUSortManager()</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a2a4e370b8df4d7faed9433925b7c4d84"><div class="ttname"><a href="classFGPUSortManager.html#a2a4e370b8df4d7faed9433925b7c4d84">FGPUSortManager::GetDynamicValueBufferFromPool</a></div><div class="ttdeci">FDynamicValueBuffer * GetDynamicValueBufferFromPool(EGPUSortFlags TaskFlags, int32 SortBatchId)</div><div class="ttdoc">Find an unused buffer to assign to a newly created FSortBatch.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a2b2c373d1688e59ac3f65a2786c8aafa"><div class="ttname"><a href="classFGPUSortManager.html#a2b2c373d1688e59ac3f65a2786c8aafa">FGPUSortManager::FeatureLevel</a></div><div class="ttdeci">ERHIFeatureLevel::Type FeatureLevel</div><div class="ttdoc">The current feature level, needed to access the global shader map.</div><div class="ttdef"><b>Definition</b> <a href="#l00522">GPUSortManager.h:522</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a2c25e8c2999cbb8ca48583fe908b7825"><div class="ttname"><a href="classFGPUSortManager.html#a2c25e8c2999cbb8ca48583fe908b7825">FGPUSortManager::UpdateSortBuffersPool</a></div><div class="ttdeci">void UpdateSortBuffersPool(FRHICommandListBase &amp;RHICmdList)</div><div class="ttdoc">Make sure there is enough GPU sort buffers to satisfy all batches created this frame.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a2ffae60f4d5f4223a90fab901b9ed6e9"><div class="ttname"><a href="classFGPUSortManager.html#a2ffae60f4d5f4223a90fab901b9ed6e9">FGPUSortManager::PostPreRenderEvent</a></div><div class="ttdeci">FPostPreRenderEvent PostPreRenderEvent</div><div class="ttdef"><b>Definition</b> <a href="#l00454">GPUSortManager.h:454</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a308a8a5422851c225fbe91346bb39c12"><div class="ttname"><a href="classFGPUSortManager.html#a308a8a5422851c225fbe91346bb39c12">FGPUSortManager::TestBatchFlags</a></div><div class="ttdeci">static FORCEINLINE bool TestBatchFlags(EGPUSortFlags BatchFlags, EGPUSortFlags TaskFlags)</div><div class="ttdoc">Test whether a batch flags are compatible with a given task.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a31323be0d2ce1ea6e95bed83d6b46c88"><div class="ttname"><a href="classFGPUSortManager.html#a31323be0d2ce1ea6e95bed83d6b46c88">FGPUSortManager::FSortBatchArray</a></div><div class="ttdeci">TArray&lt; FSortBatch, TInlineAllocator&lt; 4 &gt; &gt; FSortBatchArray</div><div class="ttdoc">Expected that few will be enough, since we only need severals batches when ESortBatchProcessingOrder:...</div><div class="ttdef"><b>Definition</b> <a href="#l00395">GPUSortManager.h:395</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a3778240dcda5e283eeb708e6f76fcacd"><div class="ttname"><a href="classFGPUSortManager.html#a3778240dcda5e283eeb708e6f76fcacd">FGPUSortManager::FinalizeSortBatches</a></div><div class="ttdeci">void FinalizeSortBatches()</div><div class="ttdoc">Setup the final sort flags and the processing order of all batches.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a3e679326cae8e894414ee5eabedcb8e8"><div class="ttname"><a href="classFGPUSortManager.html#a3e679326cae8e894414ee5eabedcb8e8">FGPUSortManager::AddTask</a></div><div class="ttdeci">bool AddTask(FRHICommandListBase &amp;RHICmdList, FAllocationInfo &amp;OutInfo, int32 ValueCount, EGPUSortFlags TaskFlags)</div><div class="ttdoc">Add a GPU sort task to process this frame.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a47e0a238600b8c21c2cf38fa52fbd611"><div class="ttname"><a href="classFGPUSortManager.html#a47e0a238600b8c21c2cf38fa52fbd611">FGPUSortManager::FValueBufferArray</a></div><div class="ttdeci">TIndirectArray&lt; FValueBuffer, TInlineAllocator&lt; 4 &gt; &gt; FValueBufferArray</div><div class="ttdef"><b>Definition</b> <a href="#l00271">GPUSortManager.h:271</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a49757a496b3cd3f7eb4b40441833f14d"><div class="ttname"><a href="classFGPUSortManager.html#a49757a496b3cd3f7eb4b40441833f14d">FGPUSortManager::Register</a></div><div class="ttdeci">void Register(const FGPUSortKeyGenDelegate &amp;CallbackDelegate, EGPUSortFlags UsedFlags, const FName &amp;InName)</div><div class="ttdoc">Register a client system into the sort manager.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a4c850a5b450f9d935d2b8ede8f21498d"><div class="ttname"><a href="classFGPUSortManager.html#a4c850a5b450f9d935d2b8ede8f21498d">FGPUSortManager::DynamicValueBufferPool</a></div><div class="ttdeci">FDynamicValueBufferArray DynamicValueBufferPool</div><div class="ttdoc">A pool of buffer to hold the final sorted values for each batch.</div><div class="ttdef"><b>Definition</b> <a href="#l00513">GPUSortManager.h:513</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a5c8d029ca73f996887fc8ab40aa1c50c"><div class="ttname"><a href="classFGPUSortManager.html#a5c8d029ca73f996887fc8ab40aa1c50c">FGPUSortManager::OnPreRender</a></div><div class="ttdeci">void OnPreRender(class FRDGBuilder &amp;GraphBuilder)</div><div class="ttdoc">Callback that needs to be called in the rendering loop, after calls to FFXSystemInterface::PreRender(...</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a60a146eccf62d3fdbf6550f1c5c731c2"><div class="ttname"><a href="classFGPUSortManager.html#a60a146eccf62d3fdbf6550f1c5c731c2">FGPUSortManager::CombineBatchFlags</a></div><div class="ttdeci">static FORCEINLINE EGPUSortFlags CombineBatchFlags(EGPUSortFlags BatchFlags, EGPUSortFlags TaskFlags)</div><div class="ttdoc">Update a batch flags after adding a task into it.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a63876fe89537b82a6c645c41a693d414"><div class="ttname"><a href="classFGPUSortManager.html#a63876fe89537b82a6c645c41a693d414">FGPUSortManager::PostPostRenderEvent</a></div><div class="ttdeci">FPostPreRenderEvent PostPostRenderEvent</div><div class="ttdef"><b>Definition</b> <a href="#l00460">GPUSortManager.h:460</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a6c7c048fd196faaf2a41ae5a0d55415a"><div class="ttname"><a href="classFGPUSortManager.html#a6c7c048fd196faaf2a41ae5a0d55415a">FGPUSortManager::Callbacks</a></div><div class="ttdeci">FCallbackArray Callbacks</div><div class="ttdoc">The client system callbacks, see Register().</div><div class="ttdef"><b>Definition</b> <a href="#l00519">GPUSortManager.h:519</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a6c8927040683d1d1836c8c631f31b18b"><div class="ttname"><a href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18b">FGPUSortManager::ESortBatchProcessingOrder</a></div><div class="ttdeci">ESortBatchProcessingOrder</div><div class="ttdoc">Defines the order in which sort batches are processed every frame.</div><div class="ttdef"><b>Definition</b> <a href="#l00332">GPUSortManager.h:333</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a6c8927040683d1d1836c8c631f31b18ba28cae129c2f105a54fc791692cd3e893"><div class="ttname"><a href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba28cae129c2f105a54fc791692cd3e893">FGPUSortManager::ESortBatchProcessingOrder::KeyGenAndSortAfterPreRender</a></div><div class="ttdeci">@ KeyGenAndSortAfterPreRender</div><div class="ttdef"><b>Definition</b> <a href="#l00335">GPUSortManager.h:335</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a6c8927040683d1d1836c8c631f31b18ba3dfc6f69aeae80c2b8b9d4b4d935008f"><div class="ttname"><a href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba3dfc6f69aeae80c2b8b9d4b4d935008f">FGPUSortManager::ESortBatchProcessingOrder::KeyGenAndSortAfterPostRenderOpaque</a></div><div class="ttdeci">@ KeyGenAndSortAfterPostRenderOpaque</div><div class="ttdef"><b>Definition</b> <a href="#l00337">GPUSortManager.h:337</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a6c8927040683d1d1836c8c631f31b18ba98002cb85497f22ec0404b5a5a47281e"><div class="ttname"><a href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18ba98002cb85497f22ec0404b5a5a47281e">FGPUSortManager::ESortBatchProcessingOrder::KeyGenAfterPreRenderAndSortAfterPostRenderOpaque</a></div><div class="ttdeci">@ KeyGenAfterPreRenderAndSortAfterPostRenderOpaque</div><div class="ttdef"><b>Definition</b> <a href="#l00336">GPUSortManager.h:336</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a6c8927040683d1d1836c8c631f31b18baec0fc0100c4fc1ce4eea230c3dc10360"><div class="ttname"><a href="classFGPUSortManager.html#a6c8927040683d1d1836c8c631f31b18baec0fc0100c4fc1ce4eea230c3dc10360">FGPUSortManager::ESortBatchProcessingOrder::Undefined</a></div><div class="ttdeci">@ Undefined</div><div class="ttdef"><b>Definition</b> <a href="#l00334">GPUSortManager.h:334</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a8657b364f904fcd1fc1a27548380957e"><div class="ttname"><a href="classFGPUSortManager.html#a8657b364f904fcd1fc1a27548380957e">FGPUSortManager::SortBuffersPool</a></div><div class="ttdeci">TArray&lt; FParticleSortBuffers *, TInlineAllocator&lt; 2 &gt; &gt; SortBuffersPool</div><div class="ttdoc">A pool of GPU sort buffers.</div><div class="ttdef"><b>Definition</b> <a href="#l00516">GPUSortManager.h:516</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a8917adc0750093d411e12fc1dc3228c0"><div class="ttname"><a href="classFGPUSortManager.html#a8917adc0750093d411e12fc1dc3228c0">FGPUSortManager::OnPostRenderOpaque</a></div><div class="ttdeci">void OnPostRenderOpaque(class FRDGBuilder &amp;GraphBuilder)</div><div class="ttdoc">Callback that needs to be called in the rendering loop, after calls to FFXSystemInterface::PostRender...</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a9c5148f0a808c64d8dd8e7370946cac2"><div class="ttname"><a href="classFGPUSortManager.html#a9c5148f0a808c64d8dd8e7370946cac2">FGPUSortManager::ResetDynamicValuesBuffers</a></div><div class="ttdeci">void ResetDynamicValuesBuffers(FRHICommandListBase &amp;RHICmdList)</div><div class="ttdoc">Resize (shrink) the DynamicValueBuffers and free the unused ones.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a9ecdf90192f3d1f8c153e979f3ac8862"><div class="ttname"><a href="classFGPUSortManager.html#a9ecdf90192f3d1f8c153e979f3ac8862">FGPUSortManager::SortBatches</a></div><div class="ttdeci">FSortBatchArray SortBatches</div><div class="ttdoc">The different batches that will be used this frame, each one ending up being sorting work on the GPU.</div><div class="ttdef"><b>Definition</b> <a href="#l00507">GPUSortManager.h:507</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_a9f008e4860a473b48b508711b251fbd8"><div class="ttname"><a href="classFGPUSortManager.html#a9f008e4860a473b48b508711b251fbd8">FGPUSortManager::DECLARE_EVENT_OneParam</a></div><div class="ttdeci">DECLARE_EVENT_OneParam(FGPUSortManager, FPostPreRenderEvent, FRHICommandListImmediate &amp;)</div><div class="ttdoc">Event to register and receive post-prerender notification.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_ab08b697a091b606b1af6f916ade8e3b0"><div class="ttname"><a href="classFGPUSortManager.html#ab08b697a091b606b1af6f916ade8e3b0">FGPUSortManager::GetBatchFlags</a></div><div class="ttdeci">static FORCEINLINE EGPUSortFlags GetBatchFlags(EGPUSortFlags TaskFlags)</div><div class="ttdoc">Create the initial batch flags from a task flags.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_ab7ca044bb6af96a2a8600fd0f7d8073e"><div class="ttname"><a href="classFGPUSortManager.html#ab7ca044bb6af96a2a8600fd0f7d8073e">FGPUSortManager::FDynamicValueBufferArray</a></div><div class="ttdeci">TIndirectArray&lt; FDynamicValueBuffer, TInlineAllocator&lt; 4 &gt; &gt; FDynamicValueBufferArray</div><div class="ttdef"><b>Definition</b> <a href="#l00322">GPUSortManager.h:322</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_abe7580d52695f333af59dc3d610e1d97"><div class="ttname"><a href="classFGPUSortManager.html#abe7580d52695f333af59dc3d610e1d97">FGPUSortManager::GetPrecisionString</a></div><div class="ttdeci">static FORCEINLINE auto GetPrecisionString(EGPUSortFlags BatchFlags) -&gt; TCHAR const(&amp;)[1]</div><div class="ttdoc">Convert the precision flags into a string, used for GPU markers.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_ac75e222cd51fb5d6cc2ba129d02cec43"><div class="ttname"><a href="classFGPUSortManager.html#ac75e222cd51fb5d6cc2ba129d02cec43">FGPUSortManager::HasEither</a></div><div class="ttdeci">static FORCEINLINE bool HasEither(EGPUSortFlags Flags, EGPUSortFlags A, EGPUSortFlags B)</div><div class="ttdoc">A helper to test that a flag has one and exactly one of A or B.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_ac8c6138ebc0eddc2c20ebb002d3e1047"><div class="ttname"><a href="classFGPUSortManager.html#ac8c6138ebc0eddc2c20ebb002d3e1047">FGPUSortManager::UE_DEPRECATED</a></div><div class="ttdeci">UE_DEPRECATED(5.4, &quot;AddTask now requires a command list.&quot;) 1 bool AddTask(FAllocationInfo &amp;OutInfo</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_adaa0a93f31b20a048b4aa255b7a693bd"><div class="ttname"><a href="classFGPUSortManager.html#adaa0a93f31b20a048b4aa255b7a693bd">FGPUSortManager::ValueCount</a></div><div class="ttdeci">int32 ValueCount</div><div class="ttdef"><b>Definition</b> <a href="#l00428">GPUSortManager.h:428</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_ade6ea6771ecfe7552b87d56e39cf999a"><div class="ttname"><a href="classFGPUSortManager.html#ade6ea6771ecfe7552b87d56e39cf999a">FGPUSortManager::FCallbackArray</a></div><div class="ttdeci">TArray&lt; FCallbackInfo &gt; FCallbackArray</div><div class="ttdef"><b>Definition</b> <a href="#l00212">GPUSortManager.h:212</a></div></div>
<div class="ttc" id="aclassFGPUSortManager_html_ae071f68c8ddda558e5e92e28e79d35ee"><div class="ttname"><a href="classFGPUSortManager.html#ae071f68c8ddda558e5e92e28e79d35ee">FGPUSortManager::FGPUSortManager</a></div><div class="ttdeci">FGPUSortManager(ERHIFeatureLevel::Type InFeatureLevel)</div><div class="ttdoc">Creates the sort manager, this is when the settings are configured.</div></div>
<div class="ttc" id="aclassFGPUSortManager_html_aff557bb0ea60c41637b1f8a5ce6d8c06"><div class="ttname"><a href="classFGPUSortManager.html#aff557bb0ea60c41637b1f8a5ce6d8c06">FGPUSortManager::TaskFlags</a></div><div class="ttdeci">int32 EGPUSortFlags TaskFlags</div><div class="ttdef"><b>Definition</b> <a href="#l00428">GPUSortManager.h:428</a></div></div>
<div class="ttc" id="aclassFName_html"><div class="ttname"><a href="classFName.html">FName</a></div><div class="ttdoc">Public name, available to the world.</div><div class="ttdef"><b>Definition</b> <a href="NameTypes_8h_source.html#l00575">NameTypes.h:576</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html"><div class="ttname"><a href="classFParticleSortBuffers.html">FParticleSortBuffers</a></div><div class="ttdoc">Buffers in GPU memory used to sort particles.</div><div class="ttdef"><b>Definition</b> <a href="#l00038">GPUSortManager.h:39</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a0fe5ca184a03f8659e86aa3a1b178d12"><div class="ttname"><a href="classFParticleSortBuffers.html#a0fe5ca184a03f8659e86aa3a1b178d12">FParticleSortBuffers::GetSortBuffers</a></div><div class="ttdeci">FGPUSortBuffers GetSortBuffers()</div><div class="ttdoc">Retrieve buffers needed to sort on the GPU.</div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a1b2a1a08c05186b7d6eb4690268e711f"><div class="ttname"><a href="classFParticleSortBuffers.html#a1b2a1a08c05186b7d6eb4690268e711f">FParticleSortBuffers::BufferSize</a></div><div class="ttdeci">int32 BufferSize</div><div class="ttdoc">Size allocated for buffers.</div><div class="ttdef"><b>Definition</b> <a href="#l00090">GPUSortManager.h:90</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a217182207fe595cdb1a71ca29ab7d118"><div class="ttname"><a href="classFParticleSortBuffers.html#a217182207fe595cdb1a71ca29ab7d118">FParticleSortBuffers::KeyBufferUAVs</a></div><div class="ttdeci">FUnorderedAccessViewRHIRef KeyBufferUAVs[2]</div><div class="ttdoc">Unordered access view for particle sort keys.</div><div class="ttdef"><b>Definition</b> <a href="#l00080">GPUSortManager.h:80</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a271ae2db1bb47f834757379c8ee8b1fa"><div class="ttname"><a href="classFParticleSortBuffers.html#a271ae2db1bb47f834757379c8ee8b1fa">FParticleSortBuffers::KeyBufferSRVs</a></div><div class="ttdeci">FShaderResourceViewRHIRef KeyBufferSRVs[2]</div><div class="ttdoc">Shader resource view for particle sort keys.</div><div class="ttdef"><b>Definition</b> <a href="#l00078">GPUSortManager.h:78</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a4f3d7e57e1b217bf08dca81ede83a10d"><div class="ttname"><a href="classFParticleSortBuffers.html#a4f3d7e57e1b217bf08dca81ede83a10d">FParticleSortBuffers::SetBufferSize</a></div><div class="ttdeci">void SetBufferSize(int32 InBufferSize)</div><div class="ttdef"><b>Definition</b> <a href="#l00042">GPUSortManager.h:42</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a5b07e3de05ffa791912dcdeee6f6b110"><div class="ttname"><a href="classFParticleSortBuffers.html#a5b07e3de05ffa791912dcdeee6f6b110">FParticleSortBuffers::GetSize</a></div><div class="ttdeci">int32 GetSize()</div><div class="ttdoc">Get the size allocated for sorted vertex buffers.</div><div class="ttdef"><b>Definition</b> <a href="#l00071">GPUSortManager.h:71</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a736de0cd883c656917ecfc49d1bfa8f5"><div class="ttname"><a href="classFParticleSortBuffers.html#a736de0cd883c656917ecfc49d1bfa8f5">FParticleSortBuffers::ReleaseRHI</a></div><div class="ttdeci">virtual void ReleaseRHI() override</div><div class="ttdoc">Release RHI resources.</div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a745b605d4fba48da06342a36b8b8e7bb"><div class="ttname"><a href="classFParticleSortBuffers.html#a745b605d4fba48da06342a36b8b8e7bb">FParticleSortBuffers::KeyBuffers</a></div><div class="ttdeci">FBufferRHIRef KeyBuffers[2]</div><div class="ttdoc">Vertex buffer storage for particle sort keys.</div><div class="ttdef"><b>Definition</b> <a href="#l00076">GPUSortManager.h:76</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_a790c9ed149d67af1e71b94facdf4d561"><div class="ttname"><a href="classFParticleSortBuffers.html#a790c9ed149d67af1e71b94facdf4d561">FParticleSortBuffers::VertexBufferSortUAVs</a></div><div class="ttdeci">FUnorderedAccessViewRHIRef VertexBufferSortUAVs[2]</div><div class="ttdoc">Unordered access view for sorting particle vertices.</div><div class="ttdef"><b>Definition</b> <a href="#l00087">GPUSortManager.h:87</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_ac60fc6b7347060d8779bf519cc4ec94d"><div class="ttname"><a href="classFParticleSortBuffers.html#ac60fc6b7347060d8779bf519cc4ec94d">FParticleSortBuffers::GetKeyBufferUAV</a></div><div class="ttdeci">FRHIUnorderedAccessView * GetKeyBufferUAV(int32 BufferIndex)</div><div class="ttdoc">Retrieve the UAV for writing particle sort keys.</div><div class="ttdef"><b>Definition</b> <a href="#l00054">GPUSortManager.h:54</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_aceb932c3fae2ac17f7e2650d4f57f43c"><div class="ttname"><a href="classFParticleSortBuffers.html#aceb932c3fae2ac17f7e2650d4f57f43c">FParticleSortBuffers::VertexBufferSortSRVs</a></div><div class="ttdeci">FShaderResourceViewRHIRef VertexBufferSortSRVs[2]</div><div class="ttdoc">Shader resource view for sorting particle vertices.</div><div class="ttdef"><b>Definition</b> <a href="#l00085">GPUSortManager.h:85</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_adaad67b529e407dc86f12b6eae03980d"><div class="ttname"><a href="classFParticleSortBuffers.html#adaad67b529e407dc86f12b6eae03980d">FParticleSortBuffers::GetSortedVertexBufferRHI</a></div><div class="ttdeci">FRHIBuffer * GetSortedVertexBufferRHI(int32 BufferIndex)</div><div class="ttdoc">Retrieve the sorted vertex buffer that results will always be located at.</div><div class="ttdef"><b>Definition</b> <a href="#l00064">GPUSortManager.h:64</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_ae8c17608aff8fc9e33b2f1ec2dc1b401"><div class="ttname"><a href="classFParticleSortBuffers.html#ae8c17608aff8fc9e33b2f1ec2dc1b401">FParticleSortBuffers::VertexBuffers</a></div><div class="ttdeci">FBufferRHIRef VertexBuffers[2]</div><div class="ttdoc">Vertex buffer containing sorted particle vertices.</div><div class="ttdef"><b>Definition</b> <a href="#l00083">GPUSortManager.h:83</a></div></div>
<div class="ttc" id="aclassFParticleSortBuffers_html_aefee70603ff21887c1dc12654baa27bd"><div class="ttname"><a href="classFParticleSortBuffers.html#aefee70603ff21887c1dc12654baa27bd">FParticleSortBuffers::InitRHI</a></div><div class="ttdeci">virtual void InitRHI(FRHICommandListBase &amp;RHICmdList) override</div><div class="ttdoc">Initialize RHI resources.</div></div>
<div class="ttc" id="aclassFRDGBuilder_html"><div class="ttname"><a href="classFRDGBuilder.html">FRDGBuilder</a></div><div class="ttdoc">Use the render graph builder to build up a graph of passes and then call Execute() to process them.</div><div class="ttdef"><b>Definition</b> <a href="RenderGraphBuilder_8h_source.html#l00047">RenderGraphBuilder.h:49</a></div></div>
<div class="ttc" id="aclassFRefCountedObject_html_a3ae3edbc4c5caf1b150c3b261185e9b3"><div class="ttname"><a href="classFRefCountedObject.html#a3ae3edbc4c5caf1b150c3b261185e9b3">FRefCountedObject::FRefCountedObject</a></div><div class="ttdeci">FRefCountedObject()</div><div class="ttdef"><b>Definition</b> <a href="RefCounting_8h_source.html#l00254">RefCounting.h:254</a></div></div>
<div class="ttc" id="aclassFRenderResource_html_a06358014324697c0503b17b05a4b4130"><div class="ttname"><a href="classFRenderResource.html#a06358014324697c0503b17b05a4b4130">FRenderResource::FRenderResource</a></div><div class="ttdeci">RENDERCORE_API FRenderResource()</div><div class="ttdoc">Default constructor.</div></div>
<div class="ttc" id="aclassFVertexBuffer_html_a8e4ad4b12601f9929aebd1106733a631"><div class="ttname"><a href="classFVertexBuffer.html#a8e4ad4b12601f9929aebd1106733a631">FVertexBuffer::FVertexBuffer</a></div><div class="ttdeci">RENDERCORE_API FVertexBuffer()</div></div>
<div class="ttc" id="aclassTAlignedTypedef_html"><div class="ttname"><a href="classTAlignedTypedef.html">Type</a></div></div>
<div class="ttc" id="aclassTArray_html"><div class="ttname"><a href="classTArray.html">TArray</a></div><div class="ttdoc">Templated dynamic array.</div><div class="ttdef"><b>Definition</b> <a href="Array_8h_source.html#l00651">Array.h:652</a></div></div>
<div class="ttc" id="aclassTIndirectArray_html"><div class="ttname"><a href="classTIndirectArray.html">TIndirectArray</a></div><div class="ttdef"><b>Definition</b> <a href="IndirectArray_8h_source.html#l00019">IndirectArray.h:20</a></div></div>
<div class="ttc" id="anamespaceERHIFeatureLevel_html"><div class="ttname"><a href="namespaceERHIFeatureLevel.html">ERHIFeatureLevel</a></div><div class="ttdef"><b>Definition</b> <a href="WorldFactory_8h_source.html#l00015">WorldFactory.h:15</a></div></div>
<div class="ttc" id="astructFGPUSortBuffers_html"><div class="ttname"><a href="structFGPUSortBuffers.html">FGPUSortBuffers</a></div><div class="ttdoc">The input buffers required for sorting on the GPU.</div><div class="ttdef"><b>Definition</b> <a href="GPUSort_8h_source.html#l00015">GPUSort.h:16</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FAllocationInfo_html"><div class="ttname"><a href="structFGPUSortManager_1_1FAllocationInfo.html">FGPUSortManager::FAllocationInfo</a></div><div class="ttdoc">Information about the bindings for a given sort task.</div><div class="ttdef"><b>Definition</b> <a href="#l00171">GPUSortManager.h:172</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FAllocationInfo_html_a0778089558d1f21a0eb555154a7e4051"><div class="ttname"><a href="structFGPUSortManager_1_1FAllocationInfo.html#a0778089558d1f21a0eb555154a7e4051">FGPUSortManager::FAllocationInfo::BufferOffset</a></div><div class="ttdeci">uint32 BufferOffset</div><div class="ttdoc">The offset within BufferSRV where the sort task data starts.</div><div class="ttdef"><b>Definition</b> <a href="#l00176">GPUSortManager.h:176</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FAllocationInfo_html_a6722e2e1e7b550da06a6fdb06e294c40"><div class="ttname"><a href="structFGPUSortManager_1_1FAllocationInfo.html#a6722e2e1e7b550da06a6fdb06e294c40">FGPUSortManager::FAllocationInfo::SortBatchId</a></div><div class="ttdeci">int32 SortBatchId</div><div class="ttdoc">The batch Id in which the sort task is grouped.</div><div class="ttdef"><b>Definition</b> <a href="#l00178">GPUSortManager.h:178</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FAllocationInfo_html_abf795bc397d8504ed63155c39e3d7a87"><div class="ttname"><a href="structFGPUSortManager_1_1FAllocationInfo.html#abf795bc397d8504ed63155c39e3d7a87">FGPUSortManager::FAllocationInfo::ElementIndex</a></div><div class="ttdeci">int32 ElementIndex</div><div class="ttdoc">The element index of the sort task within the batch.</div><div class="ttdef"><b>Definition</b> <a href="#l00180">GPUSortManager.h:180</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FAllocationInfo_html_af404bd13f2b4a08747c79f74017439e6"><div class="ttname"><a href="structFGPUSortManager_1_1FAllocationInfo.html#af404bd13f2b4a08747c79f74017439e6">FGPUSortManager::FAllocationInfo::BufferSRV</a></div><div class="ttdeci">FShaderResourceViewRHIRef BufferSRV</div><div class="ttdoc">The buffer that will hold the final sorted values.</div><div class="ttdef"><b>Definition</b> <a href="#l00174">GPUSortManager.h:174</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FCallbackInfo_html"><div class="ttname"><a href="structFGPUSortManager_1_1FCallbackInfo.html">FGPUSortManager::FCallbackInfo</a></div><div class="ttdoc">Holds data relative to client systems of the GPU sort manager.</div><div class="ttdef"><b>Definition</b> <a href="#l00202">GPUSortManager.h:203</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FCallbackInfo_html_a9fec437870afbbaf32a60d989f344028"><div class="ttname"><a href="structFGPUSortManager_1_1FCallbackInfo.html#a9fec437870afbbaf32a60d989f344028">FGPUSortManager::FCallbackInfo::Delegate</a></div><div class="ttdeci">FGPUSortKeyGenDelegate Delegate</div><div class="ttdoc">A delegate used to initialize the keys and values.</div><div class="ttdef"><b>Definition</b> <a href="#l00205">GPUSortManager.h:205</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FCallbackInfo_html_ad7a7af2df38d604ed97dc0b208fe5dcd"><div class="ttname"><a href="structFGPUSortManager_1_1FCallbackInfo.html#ad7a7af2df38d604ed97dc0b208fe5dcd">FGPUSortManager::FCallbackInfo::Flags</a></div><div class="ttdeci">EGPUSortFlags Flags</div><div class="ttdoc">The flag this client system might use when creating batches.</div><div class="ttdef"><b>Definition</b> <a href="#l00207">GPUSortManager.h:207</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FCallbackInfo_html_ad8467ad0d0d34765b89af0594a7cbc93"><div class="ttname"><a href="structFGPUSortManager_1_1FCallbackInfo.html#ad8467ad0d0d34765b89af0594a7cbc93">FGPUSortManager::FCallbackInfo::Name</a></div><div class="ttdeci">FName Name</div><div class="ttdoc">The name of this client system.</div><div class="ttdef"><b>Definition</b> <a href="#l00209">GPUSortManager.h:209</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html">FGPUSortManager::FDynamicValueBuffer</a></div><div class="ttdoc">Encapsulates the idea of a growable FValueBuffer, that dynamically change in size depending on requir...</div><div class="ttdef"><b>Definition</b> <a href="#l00278">GPUSortManager.h:279</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_a10dc365fda1ce0bed2bebc81a467fe1d"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a10dc365fda1ce0bed2bebc81a467fe1d">FGPUSortManager::FDynamicValueBuffer::ReleaseRHI</a></div><div class="ttdeci">void ReleaseRHI()</div><div class="ttdoc">Release resources.</div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_a1e096ba4fc44d86e84f3c48bf4382a22"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a1e096ba4fc44d86e84f3c48bf4382a22">FGPUSortManager::FDynamicValueBuffer::Allocate</a></div><div class="ttdeci">void Allocate(FRHICommandListBase &amp;RHICmdList, FAllocationInfo &amp;OutInfo, const FSettings &amp;InSettings, int32 ValueCount, EGPUSortFlags Flags)</div><div class="ttdoc">Allocate some space into the buffer for this frame.</div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_a2dde24410f55bd442595e0ff58075846"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a2dde24410f55bd442595e0ff58075846">FGPUSortManager::FDynamicValueBuffer::ValueBuffers</a></div><div class="ttdeci">FValueBufferArray ValueBuffers</div><div class="ttdoc">The current list of increasingly bigger value buffers.</div><div class="ttdef"><b>Definition</b> <a href="#l00283">GPUSortManager.h:283</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_a3c4b4c680777c28ef5274832a6bb033d"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a3c4b4c680777c28ef5274832a6bb033d">FGPUSortManager::FDynamicValueBuffer::CurrentSortBatchId</a></div><div class="ttdeci">int32 CurrentSortBatchId</div><div class="ttdoc">The sort batch using this buffer for this frame.</div><div class="ttdef"><b>Definition</b> <a href="#l00292">GPUSortManager.h:292</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_a666dffd39909e20f5e846354b248f047"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a666dffd39909e20f5e846354b248f047">FGPUSortManager::FDynamicValueBuffer::~FDynamicValueBuffer</a></div><div class="ttdeci">~FDynamicValueBuffer()</div><div class="ttdef"><b>Definition</b> <a href="#l00280">GPUSortManager.h:280</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_a784ee0a5981e32f03b1e395b3a7447ad"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a784ee0a5981e32f03b1e395b3a7447ad">FGPUSortManager::FDynamicValueBuffer::GetUsedCount</a></div><div class="ttdeci">FORCEINLINE int32 GetUsedCount() const</div><div class="ttdoc">Get currently used size for this frame.</div><div class="ttdef"><b>Definition</b> <a href="#l00317">GPUSortManager.h:317</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_a8a871c5e982e6667d2a4ebcd0e22548b"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a8a871c5e982e6667d2a4ebcd0e22548b">FGPUSortManager::FDynamicValueBuffer::SkrinkAndReset</a></div><div class="ttdeci">void SkrinkAndReset(FRHICommandListBase &amp;RHICmdList, const FSettings &amp;InSettings)</div><div class="ttdoc">Shrinks the buffer after it has been used this frame if applicable.</div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_a94c91068c57c7cea5db0069a82647882"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#a94c91068c57c7cea5db0069a82647882">FGPUSortManager::FDynamicValueBuffer::GetAllocatedCount</a></div><div class="ttdeci">FORCEINLINE int32 GetAllocatedCount() const</div><div class="ttdoc">Get the buffer allocated size .</div><div class="ttdef"><b>Definition</b> <a href="#l00319">GPUSortManager.h:319</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_ac0856303dec6eece7eca61ce1e1e3a20"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#ac0856303dec6eece7eca61ce1e1e3a20">FGPUSortManager::FDynamicValueBuffer::LastSortBatchFlags</a></div><div class="ttdeci">EGPUSortFlags LastSortBatchFlags</div><div class="ttdoc">The last batch flags that used this buffer.</div><div class="ttdef"><b>Definition</b> <a href="#l00289">GPUSortManager.h:289</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FDynamicValueBuffer_html_ad612e4cdaf51d89f077c71fce76f1795"><div class="ttname"><a href="structFGPUSortManager_1_1FDynamicValueBuffer.html#ad612e4cdaf51d89f077c71fce76f1795">FGPUSortManager::FDynamicValueBuffer::NumFramesRequiringShrinking</a></div><div class="ttdeci">int32 NumFramesRequiringShrinking</div><div class="ttdoc">A counter used to delay shrinking by several frames.</div><div class="ttdef"><b>Definition</b> <a href="#l00286">GPUSortManager.h:286</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FKeyGenInfo_html_a40026c8f7c003fcc5a1061ed47870ac3"><div class="ttname"><a href="structFGPUSortManager_1_1FKeyGenInfo.html#a40026c8f7c003fcc5a1061ed47870ac3">FGPUSortManager::FKeyGenInfo::FKeyGenInfo</a></div><div class="ttdeci">FKeyGenInfo(uint32 NumElements, bool bHighPrecisionKeys)</div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FKeyGenInfo_html_a5a01af617c512c002d5814832581df74"><div class="ttname"><a href="structFGPUSortManager_1_1FKeyGenInfo.html#a5a01af617c512c002d5814832581df74">FGPUSortManager::FKeyGenInfo::SortKeyMask</a></div><div class="ttdeci">uint32 SortKeyMask</div><div class="ttdef"><b>Definition</b> <a href="#l00194">GPUSortManager.h:194</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FKeyGenInfo_html_a7a6c78ed141073f5cdd3f7bfe8849f39"><div class="ttname"><a href="structFGPUSortManager_1_1FKeyGenInfo.html#a7a6c78ed141073f5cdd3f7bfe8849f39">FGPUSortManager::FKeyGenInfo::SortKeyParams</a></div><div class="ttdeci">FUintVector4 SortKeyParams</div><div class="ttdoc">(SortKeyMask, SortKeyShift, SortKeySignBit, -)</div><div class="ttdef"><b>Definition</b> <a href="#l00196">GPUSortManager.h:196</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FKeyGenInfo_html_aae42d92617357bca1585d659e0f88fc4"><div class="ttname"><a href="structFGPUSortManager_1_1FKeyGenInfo.html#aae42d92617357bca1585d659e0f88fc4">FGPUSortManager::FKeyGenInfo::ElementKeyMask</a></div><div class="ttdeci">uint32 ElementKeyMask</div><div class="ttdoc">ElementKey = (ElementIndex &amp; EmitterKeyMask) &lt;&lt; ElementKeyShift.</div><div class="ttdef"><b>Definition</b> <a href="#l00192">GPUSortManager.h:192</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FKeyGenInfo_html_ab31b17017e45238c4164da51881bcb30"><div class="ttname"><a href="structFGPUSortManager_1_1FKeyGenInfo.html#ab31b17017e45238c4164da51881bcb30">FGPUSortManager::FKeyGenInfo::ElementKeyShift</a></div><div class="ttdeci">uint32 ElementKeyShift</div><div class="ttdef"><b>Definition</b> <a href="#l00193">GPUSortManager.h:193</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSettings_html"><div class="ttname"><a href="structFGPUSortManager_1_1FSettings.html">FGPUSortManager::FSettings</a></div><div class="ttdoc">Different settings used to manage the buffer allocations.</div><div class="ttdef"><b>Definition</b> <a href="#l00215">GPUSortManager.h:216</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSettings_html_a885b98b9899a733544cee8e16da32a14"><div class="ttname"><a href="structFGPUSortManager_1_1FSettings.html#a885b98b9899a733544cee8e16da32a14">FGPUSortManager::FSettings::BufferSlack</a></div><div class="ttdeci">float BufferSlack</div><div class="ttdoc">The buffer slack when increasing or shrinking.</div><div class="ttdef"><b>Definition</b> <a href="#l00220">GPUSortManager.h:220</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSettings_html_a90b964d9d0313badc8725ccf25452197"><div class="ttname"><a href="structFGPUSortManager_1_1FSettings.html#a90b964d9d0313badc8725ccf25452197">FGPUSortManager::FSettings::FrameCountBeforeShrinking</a></div><div class="ttdeci">int32 FrameCountBeforeShrinking</div><div class="ttdoc">The number of frames before shrinking a buffer that is too big.</div><div class="ttdef"><b>Definition</b> <a href="#l00222">GPUSortManager.h:222</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSettings_html_aacc6dc9146b5ffde22def533d71b38fa"><div class="ttname"><a href="structFGPUSortManager_1_1FSettings.html#aacc6dc9146b5ffde22def533d71b38fa">FGPUSortManager::FSettings::MinBufferSize</a></div><div class="ttdeci">int32 MinBufferSize</div><div class="ttdoc">The minimal size of the sort buffers.</div><div class="ttdef"><b>Definition</b> <a href="#l00224">GPUSortManager.h:224</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSettings_html_ad3053390b9fb161cd25fa797332b92f7"><div class="ttname"><a href="structFGPUSortManager_1_1FSettings.html#ad3053390b9fb161cd25fa797332b92f7">FGPUSortManager::FSettings::AllowedFlags</a></div><div class="ttdeci">EGPUSortFlags AllowedFlags</div><div class="ttdoc">The union of all clients flags.</div><div class="ttdef"><b>Definition</b> <a href="#l00218">GPUSortManager.h:218</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html">FGPUSortManager::FSortBatch</a></div><div class="ttdoc">Defines a sort batch that regroups several sort tasks created by FGPUSortManager::AddTask(),...</div><div class="ttdef"><b>Definition</b> <a href="#l00345">GPUSortManager.h:346</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_a38296952420b0292f08d68bf05a5b72d"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#a38296952420b0292f08d68bf05a5b72d">FGPUSortManager::FSortBatch::GetUsedValueCount</a></div><div class="ttdeci">FORCEINLINE int32 GetUsedValueCount() const</div><div class="ttdoc">Get batch currently used size for this frame.</div><div class="ttdef"><b>Definition</b> <a href="#l00389">GPUSortManager.h:389</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_a393ee5b69f4e4920f9750e1544a776d0"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#a393ee5b69f4e4920f9750e1544a776d0">FGPUSortManager::FSortBatch::SortBuffers</a></div><div class="ttdeci">FParticleSortBuffers * SortBuffers</div><div class="ttdoc">The scratch buffers used to hold the initial keys and values and perform the GPU sort.</div><div class="ttdef"><b>Definition</b> <a href="#l00363">GPUSortManager.h:363</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_a3d20aa3c8f3dde5834358d6a716de4a0"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#a3d20aa3c8f3dde5834358d6a716de4a0">FGPUSortManager::FSortBatch::UpdateProcessingOrder</a></div><div class="ttdeci">void UpdateProcessingOrder()</div><div class="ttdoc">Compute the processing order from the current value of Flags.</div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_a6b3f5ea64406a4d36a2a10bffd8a6ba3"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#a6b3f5ea64406a4d36a2a10bffd8a6ba3">FGPUSortManager::FSortBatch::NumElements</a></div><div class="ttdeci">int32 NumElements</div><div class="ttdoc">The number of elements (tasks) grouped in this batch.</div><div class="ttdef"><b>Definition</b> <a href="#l00350">GPUSortManager.h:350</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_a90ad40eac0a8623f7861f38791145bf0"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#a90ad40eac0a8623f7861f38791145bf0">FGPUSortManager::FSortBatch::DynamicValueBuffer</a></div><div class="ttdeci">FDynamicValueBuffer * DynamicValueBuffer</div><div class="ttdoc">The buffer to hold the final sorted values.</div><div class="ttdef"><b>Definition</b> <a href="#l00360">GPUSortManager.h:360</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_a90f2543a2b1d515dd5462411c9cb16fb"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#a90f2543a2b1d515dd5462411c9cb16fb">FGPUSortManager::FSortBatch::ProcessingOrder</a></div><div class="ttdeci">ESortBatchProcessingOrder ProcessingOrder</div><div class="ttdoc">This batch processing order in the frame.</div><div class="ttdef"><b>Definition</b> <a href="#l00366">GPUSortManager.h:366</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_a98274140646f0f7ac64c4a19ceaf117f"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#a98274140646f0f7ac64c4a19ceaf117f">FGPUSortManager::FSortBatch::GenerateKeys</a></div><div class="ttdeci">void GenerateKeys(FRHICommandListImmediate &amp;RHICmdList, const FCallbackArray &amp;InCallbacks, EGPUSortFlags KeyGenLocation)</div><div class="ttdoc">Call each delegate registered in the FGPUSortManager so they setup their task data for each element t...</div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_ac15262e7e44499ac84087ddebc59f392"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#ac15262e7e44499ac84087ddebc59f392">FGPUSortManager::FSortBatch::Flags</a></div><div class="ttdeci">EGPUSortFlags Flags</div><div class="ttdoc">The common requirement flag for this batch.</div><div class="ttdef"><b>Definition</b> <a href="#l00357">GPUSortManager.h:357</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_acb1bf3d5dfe7d3bdaf87c2243f983fdd"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#acb1bf3d5dfe7d3bdaf87c2243f983fdd">FGPUSortManager::FSortBatch::GetAllocatedValueCount</a></div><div class="ttdeci">FORCEINLINE int32 GetAllocatedValueCount() const</div><div class="ttdoc">Get the batch buffer allocated size.</div><div class="ttdef"><b>Definition</b> <a href="#l00391">GPUSortManager.h:391</a></div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_ae2e6975f94600a921c41ae96a5fc2e8e"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#ae2e6975f94600a921c41ae96a5fc2e8e">FGPUSortManager::FSortBatch::SortAndResolve</a></div><div class="ttdeci">void SortAndResolve(FRHICommandListImmediate &amp;RHICmdList, ERHIFeatureLevel::Type InFeatureLevel)</div><div class="ttdoc">Perform the GPU sort and resolve to all buffers referenced in FGPUSortManager::AddTask(),...</div></div>
<div class="ttc" id="astructFGPUSortManager_1_1FSortBatch_html_aedf78a58fa960723d28a868fef67e75a"><div class="ttname"><a href="structFGPUSortManager_1_1FSortBatch.html#aedf78a58fa960723d28a868fef67e75a">FGPUSortManager::FSortBatch::Id</a></div><div class="ttdeci">int32 Id</div><div class="ttdoc">An Id defining this batch.</div><div class="ttdef"><b>Definition</b> <a href="#l00348">GPUSortManager.h:348</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_7536b172fbd480bfd146a1b1acd6856b.html">Runtime</a></li><li class="navelem"><a href="dir_fdf6aa5c3cf3805bb958134448d60562.html">Engine</a></li><li class="navelem"><a href="dir_1d06a51bfc871a6a1823440d0d72725c.html">Public</a></li><li class="navelem"><a href="GPUSortManager_8h.html">GPUSortManager.h</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for Unreal Engine 5.6 C++ API by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
