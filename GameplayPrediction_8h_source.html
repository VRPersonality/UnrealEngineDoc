<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unreal Engine 5.6 C++ API: S:/Development/U_E/UE_5.6/Engine/Plugins/Runtime/GameplayAbilities/Source/GameplayAbilities/Public/GameplayPrediction.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Unreal Engine 5.6 C++ API<span id="projectnumber">&#160;5.6.0</span>
   </div>
   <div id="projectbrief">C++ API documentation for Unreal Engine 5.6</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('GameplayPrediction_8h_source.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">GameplayPrediction.h</div></div>
</div><!--header-->
<div class="contents">
<a href="GameplayPrediction_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright Epic Games, Inc. All Rights Reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="NetDriver_8h.html">Engine/NetDriver.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;<a class="code" href="NetSerialization_8h.html">Engine/NetSerialization.h</a>&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;Net/Serialization/FastArraySerializer.h&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;<a class="code" href="ObjectKey_8h.html">UObject/ObjectKey.h</a>&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="TypeCompatibleBytes_8h.html">Templates/TypeCompatibleBytes.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;GameplayPrediction.generated.h&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno"><a class="line" href="GameplayPrediction_8h.html#a578eb926c8aecdf908e1338b2e893458">   12</a></span><span class="preprocessor">#define UE_API GAMEPLAYABILITIES_API</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="keyword">class </span><a class="code hl_class" href="classUAbilitySystemComponent.html">UAbilitySystemComponent</a>;</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceUE_1_1Net.html">UE::Net</a></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>{</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>    <span class="keyword">struct </span>FPredictionKeyNetSerializer;</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>}</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="GameplayPrediction_8h.html#aac6aca7c6761a5d278693a39ee1ad702">   20</a></span><a class="code hl_define" href="DelegateCombinations_8h.html#a3e9cc98b0592771493ac53b3f1c894c1">DECLARE_DELEGATE</a>(FPredictionKeyEvent);</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment"></span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">/**</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment"> *  Overview of Gameplay Ability Prediction</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment"> *  High Level Goals:</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment"> *  At the GameplayAbility level (implementing an ability) prediction is transparent. An ability says &quot;Do X-&gt;Y-&gt;Z&quot;, and we will automatically predict the parts of that that we can. </span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment"> *  We wish to avoid having logic such as &quot;If Authority: Do X. Else: Do predictive version of X&quot; in the ability itself.</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment"> *  At this point, not all cases are solved, but we have a very solid framework for working with client side prediction.</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment"> *</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment"> *  When we say &quot;client side prediction&quot; we really mean client predicting game simulation state. Things can still be &#39;completely client side&#39; without having to work within a prediction system.</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="comment"> *  For example, footsteps are completely client side and never interact with this system. But clients predicting their mana going from 100 to 90 when they cast a spell is &#39;client side prediction&#39;.</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="comment"> *      </span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="comment"> *  What do we currently predict?</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment"> *  -Initial GameplayAbility activation (and chained activation with caveats)</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment"> *  -Triggered Events</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="comment"> *  -GameplayEffect application:</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="comment"> *      -Attribute modification (EXCEPTIONS: Executions do not currently predict, only attribute modifiers)</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="comment"> *      -GameplayTag modification</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment"> *  -Gameplay Cue events (both from within predictive gameplay effect and on their own)</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment"> *      </span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment"> *  -Montages</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="comment"> *  -Movement (built into UE UCharacterMovement)</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="comment"> *  Some things we don&#39;t predict (most of these we potentially could, but currently dont):</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="comment"> *  -GameplayEffect removal</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="comment"> *  -GameplayEffect periodic effects (dots ticking)</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="comment"> *  Problems we attempt to solve:</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="comment"> *  1. &quot;Can I do this?&quot; Basic protocol for prediction.</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment"> *  2. &quot;Undo&quot; How to undo side effects when a prediction fails.</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="comment"> *  3. &quot;Redo&quot; How to avoid replaying side effects that we predicted locally but that also get replicated from the server.</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="comment"> *  4. &quot;Completeness&quot; How to be sure we /really/ predicted all side effects.</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="comment"> *  5. &quot;Dependencies&quot; How to manage dependent prediction and chains of predicted events.</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="comment"> *  6. &quot;Override&quot; How to override state predictively that is otherwise replicated/owned by the server.</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="comment"> *  ---------------------------------------------------------</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="comment"> *  Implementation Details</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="comment"> *  *** PredictionKey ***</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="comment"> *  A fundamental concept in this system is the Prediction Key (FPredictionKey). A prediction key on its own is simply a unique ID that is generated in a central place on the client. The client will send its prediction key to the server, </span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment"> *  and associate predictive actions and side effects with this key. The server may respond with an accept/reject for the prediction key, and will also associate the server-side created side effects with this prediction key.</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment"> *  (IMPORTANT) FPredictionKey always replicate client -&gt; server, but when replicating server -&gt; clients they *only* replicate to the client that sent the prediction key to the server in the first place. </span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment"> *  This happens in FPredictionKey::NetSerialize. All other clients will receive an invalid (0) prediction key when a prediction key sent from a client is replicated back down through a replicated property.</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="comment"> *  *** Ability Activation ***</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="comment"> *  Ability Activation is a first class predictive action -- it generates an initial prediction key. Whenever a client predictively activates an ability, it explicitly asks the server and the server explicitly responds. Once an ability has been</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="comment"> *  predictively activated (but the request has not yet been sent), the client has a valid &#39;prediction window&#39; where predictive side effects can happen which are not explicitly &#39;asked about&#39;. (E.g., we do not explicitly ask &#39;Can I decrement mana, Can I</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment"> *  put this ability on cooldown. Those actions are considered logically atomic with activating an ability). You can think of this prediction window as being the initial callstack of ActivateAbility. Once ActivateAbility ends, your</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="comment"> *  prediction window (and therefore your prediction key) is no longer valid. This is important, because many things can invalidate your prediction window such as any timers or latent nodes in your Blueprint; we do not predict over multiple frames.</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="comment"> *  AbilitySystemComponent provides a set of functions for communicating ability activation between clients and server: TryActivateAbility -&gt; ServerTryActivateAbility -&gt;  ClientActivateAbility(Failed/Succeed).</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="comment"> *  1. Client calls TryActivateAbility which generates a new FPredictionKey and calls ServerTryActivateAbility.</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment"> *  2. Client continues (before hearing back from server) and calls ActivateAbility with the generated PredictionKey associated with the Ability&#39;s ActivationInfo.</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="comment"> *  3. Any side effects that happen /before the call to ActivateAbility finish/ have the generated FPredictionKey associated with them.</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="comment"> *  4. Server decides if the ability really happened in ServerTryActivateAbility, calls ClientActivateAbility(Failed/Succeed) and sets UAbilitySystemComponent::ReplicatedPredictionKey to the generated key that was sent with the request by the client.</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="comment"> *  5. If client receives ClientAbilityFailed, it immediately kills the ability and rolls back side effects that were associated with the prediction key.</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="comment"> *      5a. &#39;Rolling back&#39; logic is registered via FPredictionKeyDelegates and FPredictionKey::NewRejectedDelegate/NewCaughtUpDelegate/NewRejectOrCaughtUpDelegate.</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="comment"> *      5b. ClientAbilityFailed is really the only case where we &#39;reject&#39; prediction keys and thus all of our current predictions rely on if an ability activates or not.</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="comment"> *  6. If ServerTryActivateAbility succeeds, client must wait until property replication catches up (the Succeed RPC will be sent immediately, property replication will happen on its own). Once the ReplicatedPredictionKey catches up to the</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="comment"> *      key used previous steps, the client can undo its predictive side effects.</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment"> *      See FReplicatedPredictionKeyItem::OnRep for the CatchUpTo logic. See UAbilitySystemComponent::ReplicatedPredictionKeyMap for how the keys actually get replicated. See ~FScopedPredictionWindow where the server acknowledges keys.</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="comment"> *                      </span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="comment"> *           </span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="comment"> *  *** GameplayEffect Prediction ***</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="comment"> *</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment"> *  GameplayEffects are considered side effects of ability activation and are not separately accepted/rejected.</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment"> *  1. GameplayEffects are only applied on clients if there is a valid prediction key. (If no prediction key, it simply skips the application on client).</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment"> *  2. Attributes, GameplayCues, and GameplayTags are all predicted if the GameplayEffect is predicted.</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment"> *  3. When the FActiveGameplayEffect is created, it stores the prediction key (FActiveGameplayEffect::PredictionKey)</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="comment"> *      3a. Instant effects are explained below in &quot;Attribute Prediction&quot;.</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="comment"> *  4. On the server, the same prediction key is also set on the server&#39;s FActiveGameplayEffect that will be replicated down.</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="comment"> *  5. As a client, if you get a replicated FActiveGameplayEffect with a valid prediction key on it, you check to see if you have an ActiveGameplayEffect with that same key, if there is match, we do not apply</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="comment"> *      the &#39;on applied&#39; type of logic, e.g., GameplayCues. The solves the &quot;Redo&quot; problem. However we will have 2 of the &#39;same&#39; GameplayEffects in our ActiveGameplayEffects container, temporarily:</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="comment"> *  6. At the same time, FReplicatedPredictionKeyItem::OnRep will catch up and the predictive effects will be removed. When they are removed in this case, we again check PredictionKey and decide </span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment"> *      if we should not do the &#39;On Remove&#39; logic / GameplayCue.</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="comment"> *      </span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="comment"> *  At this point, we have effectively predicted a gameplay effect as a side effect and handled the &#39;Undo&#39; and &#39;Redo&#39; problems.</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="comment"> *      </span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="comment"> *  See FActiveGameplayEffectsContainer::ApplyGameplayEffectSpec where it registers what to do when caught-up (RemoveActiveGameplayEffect_NoReturn).</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="comment"> *  See FActiveGameplayEffect::PostReplicatedAdd, FActiveGameplayEffect::PreReplicatedRemove, and FActiveGameplayCue::PostReplicatedAdd for examples of how FPredictionKey is associated with the GE&#39;s and GC&#39;s.</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="comment"> *</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="comment"> *  *** Attribute Prediction ***</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span><span class="comment"> *  Since attributes are replicated as standard uproperties, predicting modification to them can be tricky (&quot;Override&quot; problem). Instantaneous modification can be even harder since these are non stateful by nature.</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="comment"> *  (E.g., rolling back an attribute mod is difficult if there is no book keeping past the modification). This makes the &quot;Undo&quot; and &quot;Redo&quot; problem also hard in this case.</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment"> *  The basic plan of attack is to treat attribute prediction as delta prediction rather than absolute value prediction. We do not predict that we have 90 mana, we predict that we have -10 mana from the server value, until </span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="comment"> *  the server confirms our prediction key. Basically, treat instant modifications as /infinite duration modifications/ to attributes while they are done predictively. The solves &quot;Undo&quot; and &quot;Redo&quot;.</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="comment"> *  For the &quot;override&quot; problem, we can handle this in the properties OnRep by treating the replicated (server) value as the &#39;base value&#39; instead of &#39;final value&#39; of the attribute, and to </span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment"> *  reaggregate our &#39;final value&#39; after a replication happens.</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="comment"> *  1. We treat predictive instant gameplay effects as infinite duration gameplay effects. See UAbilitySystemComponent::ApplyGameplayEffectSpecToSelf.</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="comment"> *  2. We have to *always* receive RepNotify calls on our attributes (not just when there is a change from last local value, since we will predict the change ahead of time). Done with REPNOTIFY_Always.</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><span class="comment"> *  3. In the attribute RepNotify, we call into the AbilitySystemComponent::ActiveGameplayEffects to update our &#39;final value&#39; give the new &#39;base value&#39;. the GAMEPLAYATTRIBUTE_REPNOTIFY can do this.</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="comment"> *  4. Everything else will work like above (GameplayEffect prediction) : when the prediction key is caught up, the predictive GameplayEffect is removed and we will return to the server given value.</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span><span class="comment"> *  Example:</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="comment"> *  void UMyHealthSet::GetLifetimeReplicatedProps(TArray&lt; FLifetimeProperty &gt; &amp; OutLifetimeProps) const</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span><span class="comment"> *  {</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span><span class="comment"> *      Super::GetLifetimeReplicatedProps(OutLifetimeProps);</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="comment"> *</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span><span class="comment"> *      DOREPLIFETIME_CONDITION_NOTIFY(UMyHealthSet, Health, COND_None, REPNOTIFY_Always);</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="comment"> *  }</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="comment"> *  void UMyHealthSet::OnRep_Health()</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span><span class="comment"> *  {</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="comment"> *      GAMEPLAYATTRIBUTE_REPNOTIFY(UMyHealthSet, Health);</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span><span class="comment"> *  }</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span><span class="comment"> *  *** Gameplay Cue Events ***</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="comment"> *  Outside of GameplayEffects which are already explained, Gameplay Cues can be activated on their own. These functions (UAbilitySystemComponent::ExecuteGameplayCue etc)  take network role and prediction keys into account.</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span><span class="comment"> *  1. In UAbilitySystemComponent::ExecuteGameplayCue, if authority then do the multicast event (with replication key). If non authority but w/ a valid prediction key, predict the GameplayCue.</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="comment"> *  2. On the receiving end (NetMulticast_InvokeGameplayCueExecuted etc), if there is a replication key, then don&#39;t do the event (assume you predicted it).</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span><span class="comment"> *  Remember that FPredictionKeys only replicate to the originating owner. This is an intrinsic property of FReplicationKey.</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span><span class="comment"> *  *** Triggered Data Prediction ***</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span><span class="comment"> *  Triggered Data is currently used to activate abilities. Essentially this all goes through the same code path as ActivateAbility. Rather than the ability being activated from input press, it is activated from</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span><span class="comment"> *  another game code driven event. Clients are able to predictively execute these events which predictively activate abilities. </span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span><span class="comment"> *  There are some nuances to however, since the server will also run the code that triggers events. The server won&#39;t just wait to hear from the client. The server will keep a list of triggered abilities that have been</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="comment"> *  activated from a predictive ability. When receiving a TryActivate from a triggered ability, the server will look to see if /it/ has already run this ability, and respond with that information.</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span><span class="comment"> *  The issue is we do not properly rollback these operations. There is work left to do on Triggered Events and replication. (explained at the end).</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span><span class="comment"> * </span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span><span class="comment"> *  ---------------------------------------------------------   </span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span><span class="comment"> *  Advanced topic! </span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="comment"> *  *** Dependencies ***</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="comment"> *  We can have situations such as &quot;Ability X activates and immediately triggers an event which activates Ability Y which triggers another Ability Z&quot;. The dependency chain is X-&gt;Y-&gt;Z.</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span><span class="comment"> *  Each of those abilities could be rejected by the server. If Y is rejected, then Z also never happened, but the server never tries to run Z, so the server doesn&#39;t explicitly decide &#39;no Z can&#39;t run&#39;.</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span><span class="comment"> *  To handle this, we have a concept of a Base PredictionKey, which is a member of FPredictionKey. When calling TryActivateAbility, we pass in the current PredictionKey (if applicable). That prediction key</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="comment"> *  is used as the base for any new prediction keys generated. We build a chain of keys this way, and can then invalidate Z if Y is rejected.</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="comment"> *  This is slightly more nuanced though. In the X-&gt;Y-&gt;Z case, the server will only receive the PredictionKey for X before trying to run the chain itself. E.g., it will TryActivate Y and Z with the original prediction key</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="comment"> *  sent to it from the client, whereas the client will generate a new PredictionKey each time it calls TryActivateAbility. The client *has* to generate a new PredictionKey for each ability activate, since each activate</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span><span class="comment"> *  is not logically atomic. Each side effect produced in the chain of events has to have a unique PredictionKey. We cannot have GameplayEffects produced in X have the same PredictionKey produced in Z.</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="comment"> *  To get around this, The prediction key of X is considered the Base key for Y and Z. The dependency from Y to Z is kept completely client side, which is done in by FPredictionKeyDelegates::AddDependancy. We add delegates</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span><span class="comment"> *  to reject/catchup Z if Y rejected/confirmed.</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span><span class="comment"> *  This dependency system allows us to have multiple predictive actions that are not logically atomic within a single prediction window/scope.</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span><span class="comment"> *  There is a problem though: because the dependencies are kept client side, the server does not actually know if it had previously rejected a dependent action. You can design around this issue by using activation tags</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span><span class="comment"> *  in your gameplay abilities. For instance, when predicting dependents GA_Combo1 -&gt; GA_Combo2, you could make GA_Combo2 only activate if it has a GameplayTag given by GA_Combo1. Thus a rejection of GA_Combo1 would also</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span><span class="comment"> *  cause the server to reject the activation of GA_Combo2.</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span><span class="comment"> *  *** Additional Prediction Windows (within an Ability) ***</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span><span class="comment"> *  As stated, A prediction key is only usable during a single logical scope. Once ActivateAbility returns, we are essentially done with that key. If the ability is waiting on an external event or timer, it&#39;s possible</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="comment"> *  we will have already received a confirm/reject from the server by the time we&#39;re ready to continue execution. Thus any additional side effects produced after the initial activation can no longer be tied to the lifespan of the original key.</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span><span class="comment"> *  This isn&#39;t that bad, except that abilities will sometimes want to react to player input. For example, &#39;a hold down and charge&#39; ability wants to instantly predict some stuff when the button is released. It is possible</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="comment"> *  to create a new prediction window within an ability with FScopedPredictionWindow. </span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="comment"> *  FScopedPredictionWindows provides a way to send the server a new prediction key and have the server pick up and use that key within the same logical scope.</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="comment"> *  UAbilityTask_WaitInputRelease::OnReleaseCallback is a good example. The flow of events is as followed:</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="comment"> *  1. Client enters UAbilityTask_WaitInputRelease::OnReleaseCallback and starts a new FScopedPredictionWindow. This creates a new prediction key for this scope (FScopedPredictionWindow::ScopedPredictionKey).</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment"> *  2. Client calls AbilitySystemComponent-&gt;ServerInputRelease which passes ScopedPrediction.ScopedPredictionKey as a parameter.</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="comment"> *  3. Server runs ServerInputRelease_Implementation which takes the passed in PredictionKey and sets it as UAbilitySystemComponent::ScopedPredictionKey with an FScopedPredictionWindow.</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="comment"> *  4. Server runs UAbilityTask_WaitInputRelease::OnReleaseCallback /within the same scope/</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span><span class="comment"> *  5. When the server hits the FScopedPredictionWindow in ::OnReleaseCallback, it gets the prediction key from UAbilitySystemComponent::ScopedPredictionKey. That is now used for all side effects within this logical scope.</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="comment"> *  6. Once the server ends this scoped prediction window, the prediction key used is finished and set to ReplicatedPredictionKey.</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="comment"> *  7. All side effects created in this scope now share a key between client and server.</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="comment"> *  The key to this working is that ::OnReleaseCallback calls ::ServerInputRelease which calls ::OnReleaseCallback on the server. There is no room for anything else to happen and use the given prediction key.</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="comment"> *  While there is no &quot;Try/Failed/Succeed&quot; calls in this example, all side effects are procedurally grouped/atomic. This solves the &quot;Undo&quot; and &quot;Redo&quot; problems for any arbitrary function calls that run on the server and client.</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span><span class="comment"> *  ---------------------------------------------------------</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span><span class="comment"> *  Unsupported / Issues/ Todo</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="comment"> *  Triggered events do not explicitly replicate. E.g., if a triggered event only runs on the server, the client will never hear about it. This also prevents us from doing cross player/AI etc events. Support</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span><span class="comment"> *  for this should eventually be added and it should follow the same pattern that GameplayEffect and GameplayCues follow (predict triggered event with a prediction key, ignore the RPC event if it has a prediction key).</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="comment"> *  Big caveat with this whole system: Rollback of any chained activations (including triggered events) is currently not possible out of the box. The reason for this is because each ServerTryActivateAbility is going to be responded to in order.</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="comment"> *  Let&#39;s chain dependent GA&#39;s as an example: GA_Mispredict -&gt; GA_Predict1. In this example, when GA_Mispredict is activated and predicted locally it will immediately also activate GA_Predict1. The client sends ServerTryActivateAbility for GA_Mispredict,</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="comment"> *  and the server rejects it (sending back a ClientActivateAbilityFailed). As it stands, we don&#39;t have any delegates that reject dependent abilities on the client (and the server isn&#39;t even aware there are dependencies).  On the server, it also</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span><span class="comment"> *  receives a ServerTryActivateAbility for GA_Predict1. Assuming that succeeds, the Client and Server are now both executing GA_Predict1 even though GA_Mispredict never happened. You can design around this by using the tag system to ensure GA_Mispredict succeeded.</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span><span class="comment"> *</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span><span class="comment"> *  *** Predicting &quot;Meta&quot; Attributes such as Damage/Healing vs &quot;real&quot; attributes such as Health ***</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span><span class="comment"> *  We are unable to apply meta attributes predictively. Meta attributes only work on instant effects, in the back end of GameplayEffect (Pre/Post Modify Attribute on the UAttributeSet). These events are not called when</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span><span class="comment"> *  applying duration-based gameplay effects. E.g., a GameplayEffect that modifies damage for 5 seconds doesn&#39;t make sense. </span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="comment"> *  In order to support this, we would probably add some limited support for duration based meta attributes, and move the transform of the instant gameplay effect from the front end (UAbilitySystemComponent::ApplyGameplayEffectSpecToSelf)</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="comment"> *  to the backend (UAttributeSet::PostModifyAttribute). </span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="comment"> * </span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="comment"> *           </span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="comment"> *  *** Predicting ongoing multiplicative GameplayEffects ***</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span><span class="comment"> *  There are also limitations when predicting % based gameplay effects. Since the server replicates down the &#39;final value&#39; of an attribute, but not the entire aggregator chain of what is modifying it, we may run into cases where</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span><span class="comment"> *  the client cannot accurately predict new gameplay effects.</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="comment"> *  For example: </span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span><span class="comment"> *  -Client has a perm +10% movement speed buff with base movement speed of 500 -&gt; 550 is the final movement speed for this client.</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span><span class="comment"> *  -Client has an ability which grants an additional 10% movement speed buff. It is expected to *sum* the % based multipliers for a final 20% bonus to 500 -&gt; 600 movement speed.</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span><span class="comment"> *  -However on the client, we just apply a 10% buff to 550 -&gt; 605.</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="comment"> *  This will need to be fixed by replicating down the aggregator chain for attributes. We already replicate some of this data, but not the full modifier list. We will need to look into supporting this eventually.</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span><span class="comment"> *   </span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="comment"> *  *** &quot;Weak Prediction&quot; ***</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span><span class="comment"> *  We will probably still have cases that do not fit well into this system. Some situations will exist where a prediction key exchange is not feasible. For example, an ability where any one that player collides with/touches</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="comment"> *  receives a GameplayEffect that slows them and their material blue. Since we can&#39;t send Server RPCs every time this happens (and the server couldn&#39;t necessarily handle the message at its point in the simulation), there is no </span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="comment"> *  way to correlate the gameplay effect side effects between client and server.</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment"> *  One approach here may be to think about a weaker form of prediction. One where there is not a fresh prediction key used and instead the server assumes the client will predict all side effects from an entire ability. This would</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span><span class="comment"> *  at least solve the &quot;redo&quot; problem but would not solve the &quot;completeness&quot; problem. If the client side prediction could be made as minimal as possible - for example only predicting an initial particle effect rather than</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span><span class="comment"> *  predicting the state and attribute change - then the problems get less severe.</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="comment"> *  I can envision a weak prediction mode which is what (certain abilities? All abilities?) fall back to when there is no fresh prediction key that can accurately correlate side effects. When in weak prediction mode, perhaps</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="comment"> *  only certain actions can be predicted - for example GameplayCue execute events, but not OnAdded/OnRemove events.</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span><span class="comment"> */</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="comment"></span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="comment">/**</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span><span class="comment"> *  FPredictionKey is a generic way of supporting Clientside Prediction in the GameplayAbility system.</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span><span class="comment"> *  A FPredictionKey is essentially an ID for identifying predictive actions and side effects that are</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="comment"> *  done on a client. UAbilitySystemComponent supports synchronization of the prediction key and its side effects</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span><span class="comment"> *  between client and server.</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span><span class="comment"> *  Essentially, anything can be associated with a PredictionKey, for example activating an Ability.</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="comment"> *  The client can generate a fresh PredictionKey and sends it to the server in its ServerTryActivateAbility call.</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span><span class="comment"> *  The server can confirm or reject this call (ClientActivateAbilitySucceed/Failed). </span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span><span class="comment"> *  While the client is predicting its ability, it is creating side effects (GameplayEffects, TriggeredEvents, Animations, etc).</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="comment"> *  As the client predicts these side effects, it associates each one with the prediction key generated at the start of the ability</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><span class="comment"> *  activation.</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="comment"> *  If the ability activation is rejected, the client can immediately revert these side effects. </span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="comment"> *  If the ability activation is accepted, the client must wait until the replicated side effects are sent to the server.</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span><span class="comment"> *      (the ClientActivatbleAbilitySucceed RPC will be immediately sent. Property replication may happen a few frames later).</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="comment"> *      Once replication of the server created side effects is finished, the client can undo its locally predictive side effects.</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="comment"> *      </span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="comment"> *  The main things FPredictionKey itself provides are:</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span><span class="comment"> *      -Unique ID and a system for having dependant chains of Prediction Keys (&quot;Current&quot; and &quot;Base&quot; integers)</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span><span class="comment"> *      -A special implementation of ::NetSerialize *** which only serializes the prediction key to the predicting client ***</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="comment"> *          -This is important as it allows us to serialize prediction keys in replicated state, knowing that only clients that gave the server the prediction key will actually see them!</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="comment"> */</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><a class="code hl_define" href="GenericPlatformCompilerPreSetup_8h.html#ab7724f3d5ff29ddc6ddc78d1c57d77c1">PRAGMA_DISABLE_DEPRECATION_WARNINGS</a> <span class="comment">// PredictiveConnection</span></div>
<div class="foldopen" id="foldopen00295" data-start="{" data-end="}">
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno"><a class="line" href="GameplayPrediction_8h.html#a8a33c5a50d5cd300ef6d7e3588e19ac0">  295</a></span><a class="code hl_function" href="GameplayPrediction_8h.html#a8a33c5a50d5cd300ef6d7e3588e19ac0">USTRUCT</a>()</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>struct FPredictionKey</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>{</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <a class="code hl_define" href="ObjectMacros_8h.html#afa48c9423e42b6a331aa6c1739d9b659">GENERATED_USTRUCT_BODY</a>()</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="keyword">typedef</span> <a class="code hl_typedef" href="Platform_8h.html#a1bd80c51a4b4f984eaeb341a689a989d">int16</a> KeyType;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    FPredictionKey() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="comment"></span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span><span class="comment">    /** The unique ID of this prediction key */</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <a class="code hl_define" href="ObjectMacros_8h.html#a0f0b61260ab178e7df0069f14ecb9f82">UPROPERTY</a>()</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <a class="code hl_typedef" href="Platform_8h.html#a1bd80c51a4b4f984eaeb341a689a989d">int16</a>  Current = 0;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="comment"></span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="comment">    /** If non 0, the original prediction key this was created from (in a dependency chain) */</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    <a class="code hl_define" href="ObjectMacros_8h.html#a0f0b61260ab178e7df0069f14ecb9f82">UPROPERTY</a>(NotReplicated)</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <a class="code hl_typedef" href="Platform_8h.html#a1bd80c51a4b4f984eaeb341a689a989d">int16</a>  Base = 0;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="comment"></span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span><span class="comment">    /** True if this was created as a server initiated activation key, used to identify server activations but cannot be used for prediction */</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <a class="code hl_define" href="ObjectMacros_8h.html#a0f0b61260ab178e7df0069f14ecb9f82">UPROPERTY</a>()</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="keywordtype">bool</span> bIsServerInitiated = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span><span class="comment"></span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span><span class="comment">    /** Construct a new prediction key with no dependencies */</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="keyword">static</span> <a class="code hl_define" href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> FPredictionKey CreateNewPredictionKey(<span class="keyword">const</span> <a class="code hl_class" href="classUAbilitySystemComponent.html">UAbilitySystemComponent</a>*);</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span><span class="comment"></span> </div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span><span class="comment">    /** Construct a new server initiation key, for abilities activated on the server */</span></div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keyword">static</span> <a class="code hl_define" href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> FPredictionKey CreateNewServerInitiatedKey(<span class="keyword">const</span> <a class="code hl_class" href="classUAbilitySystemComponent.html">UAbilitySystemComponent</a>*);</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span><span class="comment"></span> </div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="comment">    /** Create a new dependent prediction key: keep our existing base or use the current key as the base. */</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <a class="code hl_define" href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <span class="keywordtype">void</span> GenerateDependentPredictionKey();</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="comment"></span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span><span class="comment">    /** Creates new delegate called only when this key is rejected. */</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <a class="code hl_define" href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> FPredictionKeyEvent&amp; NewRejectedDelegate();</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span><span class="comment"></span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span><span class="comment">    /** Creates new delegate called only when replicated state catches up to this key. */</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <a class="code hl_define" href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> FPredictionKeyEvent&amp; NewCaughtUpDelegate();</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="comment"></span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span><span class="comment">    /** Add a new delegate that is called if the key is rejected or caught up to. */</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <a class="code hl_define" href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <span class="keywordtype">void</span> NewRejectOrCaughtUpDelegate(FPredictionKeyEvent <a class="code hl_enumvalue" href="MovieSceneDirectorBlueprintUtils_8h.html#a28c0af30b6e36472065a385942bd0535aa4ecfc70574394990cf17bd83df499f7">Event</a>);</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <a class="code hl_define" href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <span class="keywordtype">bool</span> NetSerialize(<a class="code hl_class" href="classFArchive.html">FArchive</a>&amp; <a class="code hl_variable" href="StatsCommand_8h.html#a95a42fe4ca3180b042ae725512d41d7d">Ar</a>, <span class="keyword">class</span> <a class="code hl_class" href="classUPackageMap.html">UPackageMap</a>* <a class="code hl_enumvalue" href="StructuredArchiveFormatter_8h.html#a7a5fe060d2d07216d26a6edfc6fec070a46f3ea056caa3126b91f3f70beea068c">Map</a>, <span class="keywordtype">bool</span>&amp; bOutSuccess);</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span><span class="comment"></span> </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span><span class="comment">    /** A key is valid if it&#39;s non-zero, prediction keys for other clients will serialize down as 0 and be invalid */</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keywordtype">bool</span> IsValidKey()<span class="keyword"> const</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        <span class="keywordflow">return</span> Current &gt; 0;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span><span class="comment"></span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span><span class="comment">    /** A key was generated by the local client if it&#39;s valid and not a server key, prediction keys for other clients will serialize down as 0 and be invalid */</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="keywordtype">bool</span> IsLocalClientKey()<span class="keyword"> const</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        <span class="keywordflow">return</span> Current &gt; 0 &amp;&amp; !bIsServerInitiated;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    }</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span><span class="comment"></span> </div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span><span class="comment">    /** True if this was created as a server initiated activation key, used to identify server activations but cannot be used for prediction */</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <span class="keywordtype">bool</span> IsServerInitiatedKey()<span class="keyword"> const</span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        <span class="keywordflow">return</span> bIsServerInitiated;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    }</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="comment"></span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="comment">    /** Can this key be used for more predictive actions, or has it already been sent off to the server? */</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keywordtype">bool</span> IsValidForMorePrediction()<span class="keyword"> const</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        <span class="keywordflow">return</span> IsLocalClientKey();</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span><span class="comment"></span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span><span class="comment">    /** Was this PredictionKey received from a NetSerialize or created locally? */</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    <span class="keywordtype">bool</span> WasReceived()<span class="keyword"> const</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        <span class="keywordflow">return</span> PredictiveConnectionObjectKey != <a class="code hl_struct" href="structFObjectKey.html">FObjectKey</a>();</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    }</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span> </div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <span class="keywordtype">bool</span> WasLocallyGenerated()<span class="keyword"> const</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        <span class="keywordflow">return</span> (Current &gt; 0) &amp;&amp; (PredictiveConnectionObjectKey == <a class="code hl_struct" href="structFObjectKey.html">FObjectKey</a>());</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    }</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span> </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="EpicRtcVideoCommon_8h.html#a5b395fb6e30878f0ec1df7af2c2069af">operator==</a>(<span class="keyword">const</span> FPredictionKey&amp; <a class="code hl_enumvalue" href="Text_8h.html#a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387">Other</a>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        <span class="comment">// we&#39;re omitting Base here because it&#39;s not replicated</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <span class="keywordflow">return</span> Current == <a class="code hl_enumvalue" href="Text_8h.html#a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387">Other</a>.Current &amp;&amp; bIsServerInitiated == <a class="code hl_enumvalue" href="Text_8h.html#a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387">Other</a>.bIsServerInitiated;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    }</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="StateTreeTypes_8h.html#ac7c6317273de456bf941c2f0cfe357bd">operator!=</a>(<span class="keyword">const</span> FPredictionKey&amp; <a class="code hl_enumvalue" href="Text_8h.html#a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387">Other</a>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == <a class="code hl_enumvalue" href="Text_8h.html#a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387">Other</a>);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    FString <a class="code hl_function" href="LogVerbosity_8h.html#abe3b25435b45e4cad83b33d44ab05d86">ToString</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        <span class="keywordflow">return</span> bIsServerInitiated ? FString::Printf(<a class="code hl_define" href="Platform_8h.html#a2978f60d40d64f3605b5a99f66f292a9">TEXT</a>(<span class="stringliteral">&quot;[Srv: %d]&quot;</span>), Current) : FString::Printf(<a class="code hl_define" href="Platform_8h.html#a2978f60d40d64f3605b5a99f66f292a9">TEXT</a>(<span class="stringliteral">&quot;[%d/%d]&quot;</span>), Current, Base);</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    }</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span> </div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="keyword">friend</span> <a class="code hl_typedef" href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a> <a class="code hl_function" href="GameplayCue__Types_8h.html#a42de5c90665889198120ab799daf7abe">GetTypeHash</a>(<span class="keyword">const</span> FPredictionKey&amp; InKey)</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        <span class="comment">// we&#39;re omitting Base here because it&#39;s not replicated</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>        <span class="keywordflow">return</span> ((InKey.Current &lt;&lt; 1) | (InKey.bIsServerInitiated &amp; 1));</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    }</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span> </div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <a class="code hl_typedef" href="Platform_8h.html#afddf25cca147311c233b23a9d3329bb4">uint64</a> GetPredictiveConnectionKey()<span class="keyword"> const </span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span><span class="keyword">    </span>{ </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="preprocessor">#if UE_WITH_REMOTE_OBJECT_HANDLE</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="TypeCompatibleBytes_8h.html#a9f51593011f2657d9cd7fc1bccc239d5">BitCast&lt;uint64&gt;</a>(PredictiveConnectionObjectKey.GetRemoteId());</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="TypeCompatibleBytes_8h.html#a9f51593011f2657d9cd7fc1bccc239d5">BitCast&lt;uint64&gt;</a>(PredictiveConnectionObjectKey);</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    }</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <span class="keyword">friend</span> UE::Net::FPredictionKeyNetSerializer;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span> </div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <a class="code hl_define" href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <span class="keywordtype">void</span> GenerateNewPredictionKey();</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="keyword">explicit</span> FPredictionKey(<a class="code hl_typedef" href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>)</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        : Current(<span class="keyword">static_cast&lt;</span>KeyType<span class="keyword">&gt;</span>(<a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>))</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        <a class="code hl_define" href="AssertionMacros_8h.html#a586e110623cde145b8a5bdefb429e144">check</a>(<a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a> &gt;= 0 &amp;&amp; <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a> &lt;= std::numeric_limits&lt;KeyType&gt;::max());</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    }</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span><span class="comment"></span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span><span class="comment">    /** On the server, uniquely identifies network connection this was serialized on/from.  See NetSerialize for additional information. */</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <a class="code hl_struct" href="structFObjectKey.html">FObjectKey</a> PredictiveConnectionObjectKey;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>};</div>
</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span><a class="code hl_define" href="GenericPlatformCompilerPreSetup_8h.html#a084b2ccd2e278a5d6b9f0088bd8f1474">PRAGMA_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span> </div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span><span class="keyword">template</span>&lt;&gt;</div>
<div class="foldopen" id="foldopen00418" data-start="{" data-end="};">
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno"><a class="line" href="structTStructOpsTypeTraits_3_01FPredictionKey_01_4.html">  418</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structTStructOpsTypeTraits.html">TStructOpsTypeTraits</a>&lt;FPredictionKey&gt; : <span class="keyword">public</span> <a class="code hl_struct" href="structTStructOpsTypeTraitsBase2.html">TStructOpsTypeTraitsBase2</a>&lt;FPredictionKey&gt;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>{</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    <span class="keyword">enum</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    {</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno"><a class="line" href="structTStructOpsTypeTraits_3_01FPredictionKey_01_4.html#aeb281d508aa042aee319b76b96283e14a445650e03d6fe5b2221e7ad9c4f8c2d6">  422</a></span>        <a class="code hl_enumvalue" href="structTStructOpsTypeTraits_3_01FPredictionKey_01_4.html#aeb281d508aa042aee319b76b96283e14a445650e03d6fe5b2221e7ad9c4f8c2d6">WithNetSerializer</a> = <span class="keyword">true</span>,</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno"><a class="line" href="structTStructOpsTypeTraits_3_01FPredictionKey_01_4.html#aeb281d508aa042aee319b76b96283e14a8b911a1fc829ee5c2d7c5b6f6268f445">  423</a></span>        <a class="code hl_enumvalue" href="structTStructOpsTypeTraits_3_01FPredictionKey_01_4.html#aeb281d508aa042aee319b76b96283e14a8b911a1fc829ee5c2d7c5b6f6268f445">WithIdenticalViaEquality</a> = <span class="keyword">true</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    };</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>};</div>
</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span> </div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span><span class="comment">// -----------------------------------------------------------------</span></div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span><span class="comment"></span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span><span class="comment">/**</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span><span class="comment"> *  This is a data structure for registering delegates associated with prediction key rejection and replicated state &#39;catching up&#39;.</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span><span class="comment"> *  Delegates should be registered that revert side effects created with prediction keys.</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span><span class="comment"> *  </span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="comment"> */</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span> </div>
<div class="foldopen" id="foldopen00435" data-start="{" data-end="};">
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html">  435</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structFPredictionKeyDelegates.html">FPredictionKeyDelegates</a></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>{</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span> </div>
<div class="foldopen" id="foldopen00440" data-start="{" data-end="};">
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates_1_1FDelegates.html">  440</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structFPredictionKeyDelegates_1_1FDelegates.html">FDelegates</a></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    {</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span><span class="comment"></span> </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span><span class="comment">        /** This delegate is called if the prediction key is associated with an action that is explicitly rejected by the server. */</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates_1_1FDelegates.html#a711224b0b1c0bf65b30883142d99197b">  445</a></span>        <a class="code hl_class" href="classTArray.html">TArray&lt;FPredictionKeyEvent&gt;</a>  <a class="code hl_variable" href="structFPredictionKeyDelegates_1_1FDelegates.html#a711224b0b1c0bf65b30883142d99197b">RejectedDelegates</a>;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span><span class="comment"></span> </div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span><span class="comment">        /** This delegate is called when replicated state has caught up with the prediction key. Doesnt imply rejection or acceptance. */</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates_1_1FDelegates.html#a3940c17052671ad4d33d33bd7e65852a">  448</a></span>        <a class="code hl_class" href="classTArray.html">TArray&lt;FPredictionKeyEvent&gt;</a>  <a class="code hl_variable" href="structFPredictionKeyDelegates_1_1FDelegates.html#a3940c17052671ad4d33d33bd7e65852a">CaughtUpDelegates</a>;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    };</div>
</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#a8abb7ede6be36610c490b1984b7108f3">  451</a></span>    <a class="code hl_class" href="classTMap.html">TMap&lt;FPredictionKey::KeyType, FDelegates&gt;</a>  <a class="code hl_variable" href="structFPredictionKeyDelegates.html#a8abb7ede6be36610c490b1984b7108f3">DelegateMap</a>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span> </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#afb5fe87f965ca7ad9a363ef4f85bc54e">  453</a></span>    <span class="keyword">static</span> <a class="code hl_struct" href="structFPredictionKeyDelegates.html">FPredictionKeyDelegates</a>&amp; <a class="code hl_function" href="structFPredictionKeyDelegates.html#afb5fe87f965ca7ad9a363ef4f85bc54e">Get</a>();</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#ac6ff13d6a3eb9fe639215235981b6f82">  455</a></span>    <span class="keyword">static</span> FPredictionKeyEvent&amp; <a class="code hl_function" href="structFPredictionKeyDelegates.html#ac6ff13d6a3eb9fe639215235981b6f82">NewRejectedDelegate</a>(FPredictionKey::KeyType <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>);</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#a77baf8abf222a8cde3f273cb36a379a7">  456</a></span>    <span class="keyword">static</span> FPredictionKeyEvent&amp; <a class="code hl_function" href="structFPredictionKeyDelegates.html#a77baf8abf222a8cde3f273cb36a379a7">NewCaughtUpDelegate</a>(FPredictionKey::KeyType <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>);</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#ab896b11716291cf7a1f638b83dfb5adf">  457</a></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="structFPredictionKeyDelegates.html#ab896b11716291cf7a1f638b83dfb5adf">NewRejectOrCaughtUpDelegate</a>(FPredictionKey::KeyType <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>, FPredictionKeyEvent NewEvent);</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span> </div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#ae265c6b1bdbad3f34f88551c0005d133">  459</a></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="structFPredictionKeyDelegates.html#ae265c6b1bdbad3f34f88551c0005d133">BroadcastRejectedDelegate</a>(FPredictionKey::KeyType <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>);</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#a59c54cddb674d911a5a1d741fa29cd33">  460</a></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="structFPredictionKeyDelegates.html#a59c54cddb674d911a5a1d741fa29cd33">BroadcastCaughtUpDelegate</a>(FPredictionKey::KeyType <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#ae1167cb2e6e052cc9bb5a0f1a28bdcb1">  462</a></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="structFPredictionKeyDelegates.html#ae1167cb2e6e052cc9bb5a0f1a28bdcb1">Reject</a>(FPredictionKey::KeyType <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#a08c533d54d019c4404db4ccdfac2740f">  463</a></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="structFPredictionKeyDelegates.html#a08c533d54d019c4404db4ccdfac2740f">CatchUpTo</a>(FPredictionKey::KeyType <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>);</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span> </div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno"><a class="line" href="structFPredictionKeyDelegates.html#a406ee3d72b3076e2216f9ff74cb6b19f">  465</a></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="structFPredictionKeyDelegates.html#a406ee3d72b3076e2216f9ff74cb6b19f">AddDependency</a>(FPredictionKey::KeyType ThisKey, FPredictionKey::KeyType DependsOn);</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span> </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>};</div>
</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span> </div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span><span class="comment">// -----------------------------------------------------------------</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span><span class="keyword">class </span><a class="code hl_class" href="classUAbilitySystemComponent.html">UAbilitySystemComponent</a>;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span><span class="keyword">class </span>UGameplayAbility;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span><span class="comment"></span> </div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span><span class="comment">/**</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span><span class="comment"> *  A structure for allowing scoped prediction windows.</span></div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span><span class="comment"> */</span></div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span> </div>
<div class="foldopen" id="foldopen00479" data-start="{" data-end="};">
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html">  479</a></span><span class="keyword">struct </span><a class="code hl_function" href="structFScopedPredictionWindow.html#a05269d04973ef4b72db3d14b2b4926d2">FScopedPredictionWindow</a></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>{<span class="comment"></span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span><span class="comment">    /** To be called on server when a new prediction key is received from the client (In an RPC). </span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span><span class="comment">     *  InSetReplicatedPredictionKey should be set to false in cases where we want a scoped prediction key but have already repped the prediction key.</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span><span class="comment">     *  (For example, cached target data will restore the prediction key that the TD was sent with, but this key was already repped down as confirmed when received)</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span><span class="comment">     **/</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#a05269d04973ef4b72db3d14b2b4926d2">  485</a></span>    <a class="code hl_define" href="GameplayPrediction_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <a class="code hl_function" href="structFScopedPredictionWindow.html#a05269d04973ef4b72db3d14b2b4926d2">FScopedPredictionWindow</a>(<a class="code hl_class" href="classUAbilitySystemComponent.html">UAbilitySystemComponent</a>* AbilitySystemComponent, FPredictionKey InPredictionKey, <span class="keywordtype">bool</span> InSetReplicatedPredictionKey = <span class="keyword">true</span>);</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span><span class="comment"></span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span><span class="comment">    /** To be called in the callsite where the predictive code will take place. This generates a new PredictionKey and acts as a synchonization point between client and server for that key.  */</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#aac29d71046ff294561ad9f9935efca3f">  488</a></span>    <a class="code hl_define" href="GameplayPrediction_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <a class="code hl_function" href="structFScopedPredictionWindow.html#aac29d71046ff294561ad9f9935efca3f">FScopedPredictionWindow</a>(<a class="code hl_class" href="classUAbilitySystemComponent.html">UAbilitySystemComponent</a>* AbilitySystemComponent, <span class="keywordtype">bool</span> CanGenerateNewKey=<span class="keyword">true</span>);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#aaa3f0561c55d36f36ce826a89ca8ad7d">  490</a></span>    <a class="code hl_define" href="GameplayPrediction_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <a class="code hl_function" href="structFScopedPredictionWindow.html#aaa3f0561c55d36f36ce826a89ca8ad7d">~FScopedPredictionWindow</a>();</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span> </div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span> </div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#a398653e28a8d03b06a610c5fdba47702">  494</a></span>    <a class="code hl_struct" href="structTWeakObjectPtr.html">TWeakObjectPtr&lt;UAbilitySystemComponent&gt;</a> <a class="code hl_variable" href="structFScopedPredictionWindow.html#a398653e28a8d03b06a610c5fdba47702">Owner</a>;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#a3bbc6a5aafc6d526c1e64357f7a14764">  495</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structFScopedPredictionWindow.html#a3bbc6a5aafc6d526c1e64357f7a14764">ClearScopedPredictionKey</a>;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#ae9bbf989416464b4be7059750e60e9dd">  496</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structFScopedPredictionWindow.html#ae9bbf989416464b4be7059750e60e9dd">SetReplicatedPredictionKey</a>;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#a36f6e6ef50bbddcfa783d64debc61120">  497</a></span>    FPredictionKey <a class="code hl_variable" href="structFScopedPredictionWindow.html#a36f6e6ef50bbddcfa783d64debc61120">RestoreKey</a>;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span> </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span><span class="preprocessor">#if !UE_BUILD_SHIPPING</span></div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#ade7c31f4a733658143dea159d11c345a">  500</a></span>    FOnSendRPC <a class="code hl_variable" href="structFScopedPredictionWindow.html#ade7c31f4a733658143dea159d11c345a">DebugSavedOnSendRPC</a>;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#abb3ab359f85abd63f79eb392232c2417">  501</a></span>    <a class="code hl_struct" href="structTWeakObjectPtr.html">TWeakObjectPtr&lt;UNetDriver&gt;</a> <a class="code hl_variable" href="structFScopedPredictionWindow.html#abb3ab359f85abd63f79eb392232c2417">DebugSavedNetDriver</a>;</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno"><a class="line" href="structFScopedPredictionWindow.html#a76219871e57628a0789b046808b01100">  502</a></span>    <a class="code hl_struct" href="structTOptional.html">TOptional&lt;FPredictionKey::KeyType&gt;</a> <a class="code hl_variable" href="structFScopedPredictionWindow.html#a76219871e57628a0789b046808b01100">DebugBaseKeyOfChain</a>;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>};</div>
</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span><span class="comment"></span> </div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span><span class="comment">/**</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span><span class="comment"> * Possible results when evaluating how to deal with an FPredictionKey</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00509" data-start="{" data-end="};">
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno"><a class="line" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0">  509</a></span><span class="keyword">enum class</span> <a class="code hl_enumeration" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0">EGasPredictionKeyResult</a> : <a class="code hl_typedef" href="Platform_8h.html#a40bc01dd090acd02a79b5dc13e08abe6">uint8</a></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>{</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <span class="comment">// Silently drop the key (don&#39;t acknowledge it at all)</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno"><a class="line" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0a3b507c66a8817d90670abad55b54cc25">  512</a></span>    <a class="code hl_enumvalue" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0a3b507c66a8817d90670abad55b54cc25">SilentlyDrop</a>,</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <span class="comment">// Accept the key (e.g. server acknowledges the event happened)</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno"><a class="line" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0ac4408d335012a56ff58937d78050efad">  515</a></span>    <a class="code hl_enumvalue" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0ac4408d335012a56ff58937d78050efad">Accept</a>,</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span> </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="comment">// Reject the key (e.g. server says the event never happened)</span></div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno"><a class="line" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0ad98ac12774fca5c3cbaffe276840c55f">  518</a></span>    <a class="code hl_enumvalue" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0ad98ac12774fca5c3cbaffe276840c55f">Reject</a></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>};</div>
</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span><span class="comment"></span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span><span class="comment">/**</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span><span class="comment"> * Discard the predictions that occur within this window.</span></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span><span class="comment"> * This is useful in a case where you don&#39;t intend to send a chain of generated events (FPredictionKeys) to the server.</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span><span class="comment"> * For example, we use this in a case where we want to play a Montage locally, and we notify the server unreliably (i.e. it is an optional event).</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span><span class="comment"> * Note: Nothing stops something within this scope from creating a valid key, then sending that valid key to the server.  This is meant for generated keys that aren&#39;t already going to be sent.</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00527" data-start="{" data-end="};">
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno"><a class="line" href="structFScopedDiscardPredictions.html">  527</a></span><span class="keyword">struct </span><a class="code hl_function" href="structFScopedDiscardPredictions.html#adc054b6324ebcca76f46726fccb438bf">FScopedDiscardPredictions</a></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>{</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="comment">// Pass in the AbilitySystemComponent to discard predictions on.  Optionally, if we want to do something other than just Drop the prediction events you can override that.</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno"><a class="line" href="structFScopedDiscardPredictions.html#adc054b6324ebcca76f46726fccb438bf">  530</a></span>    <a class="code hl_define" href="GameplayPrediction_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <span class="keyword">explicit</span> <a class="code hl_function" href="structFScopedDiscardPredictions.html#adc054b6324ebcca76f46726fccb438bf">FScopedDiscardPredictions</a>(<a class="code hl_class" href="classUAbilitySystemComponent.html">UAbilitySystemComponent</a>* AbilitySystemComponent, <a class="code hl_enumeration" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0">EGasPredictionKeyResult</a> HowToHandlePredictions = <a class="code hl_enumvalue" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0a3b507c66a8817d90670abad55b54cc25">EGasPredictionKeyResult::SilentlyDrop</a>);</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span> </div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <span class="comment">// When the scope ends, we will perform the final drop/ack/nack of the prediction chain</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno"><a class="line" href="structFScopedDiscardPredictions.html#a7768517379c40796b70379cf83729016">  533</a></span>    <a class="code hl_define" href="GameplayPrediction_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a> <a class="code hl_function" href="structFScopedDiscardPredictions.html#a7768517379c40796b70379cf83729016">~FScopedDiscardPredictions</a>();</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span> </div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="comment">// Weak pointer to the &#39;Owning&#39; ASC.  If this ends up being invalid/null we don&#39;t do anything.</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno"><a class="line" href="structFScopedDiscardPredictions.html#ac67b91e6153ecba441fb0ea6abf6c733">  537</a></span>    <a class="code hl_struct" href="structTWeakObjectPtr.html">TWeakObjectPtr&lt;UAbilitySystemComponent&gt;</a> <a class="code hl_variable" href="structFScopedDiscardPredictions.html#ac67b91e6153ecba441fb0ea6abf6c733">Owner</a>;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span> </div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <span class="comment">// The key that we&#39;re going to restore on the Owner</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno"><a class="line" href="structFScopedDiscardPredictions.html#ae510bc07c62bba98e8a4ac72fc065a85">  540</a></span>    FPredictionKey <a class="code hl_variable" href="structFScopedDiscardPredictions.html#ae510bc07c62bba98e8a4ac72fc065a85">KeyToRestoreOnOwner</a>;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span> </div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <span class="comment">// How we&#39;re going to handle the resulting chain of predictions</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno"><a class="line" href="structFScopedDiscardPredictions.html#a2d27869591621c10dce9e8895709120d">  543</a></span>    <a class="code hl_enumeration" href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0">EGasPredictionKeyResult</a> <a class="code hl_variable" href="structFScopedDiscardPredictions.html#a2d27869591621c10dce9e8895709120d">PredictionKeyChainResult</a>;</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span> </div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="comment">// This is the key that we&#39;re going to eventually acknowledge according to PredictionKeyChainResult</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno"><a class="line" href="structFScopedDiscardPredictions.html#ad4ace3d7fe8ec91793361f2c3d2bfbf9">  546</a></span>    FPredictionKey <a class="code hl_variable" href="structFScopedDiscardPredictions.html#ad4ace3d7fe8ec91793361f2c3d2bfbf9">BaseKeyToAck</a>;</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>};</div>
</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span> </div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span><span class="comment">// -----------------------------------------------------------------</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span> </div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span><span class="comment"></span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span><span class="comment">/**</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span><span class="comment"> *  This is the structure that replicates prediction keys back to clients, from the server (via property replication).</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span><span class="comment"> *  This is done via a FastArray so that each predictionkey is individually ack&#39;d, rather than just replicating &quot;highest numbered key&quot;.</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span><span class="comment"> *</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span><span class="comment"> *  &quot;Highest numbered key&quot; fails with packet loss. For example:</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span><span class="comment"> *</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span><span class="comment"> *  Pkt1: {+Tag=X, ReplicatedKey=1)</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span><span class="comment"> *  Pkt2: (ReplicatedKey=2)</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span><span class="comment"> *</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span><span class="comment"> *  If Pkt1 is dropped, after Pkt2 is already in flight, client receives ReplicatedKey=2 and will remove irs predictive Tag=X.</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span><span class="comment"> *  The state in Pkt1 will be resent, after the n&#39;ack is detected. But the damage will have been done: Client thought it was up to date</span></div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span><span class="comment"> *  but was missing a gap.</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span><span class="comment"> *</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span><span class="comment"> */</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span> </div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span><span class="keyword">struct </span>FReplicatedPredictionKeyMap;</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span><a class="code hl_function" href="GameplayPrediction_8h.html#a8a33c5a50d5cd300ef6d7e3588e19ac0">USTRUCT</a>()</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>struct FReplicatedPredictionKeyItem : public FFastArraySerializerItem</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>{</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    <a class="code hl_define" href="ObjectMacros_8h.html#afa48c9423e42b6a331aa6c1739d9b659">GENERATED_USTRUCT_BODY</a>()</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span> </div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <span class="comment">// As we know that FReplicatedPredictionKeyItem is well behaved and does not leak outside of FReplicatedPredictionKeyMap we allow ReplicationID and ReplicationKey to be copied around to avoid issues when instantiating from archetype or CDO</span></div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    FReplicatedPredictionKeyItem();</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    FReplicatedPredictionKeyItem(const FReplicatedPredictionKeyItem&amp; <a class="code hl_enumvalue" href="Text_8h.html#a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387">Other</a>);</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    FReplicatedPredictionKeyItem(FReplicatedPredictionKeyItem&amp;&amp; <a class="code hl_enumvalue" href="Text_8h.html#a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387">Other</a>);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    FReplicatedPredictionKeyItem&amp; operator=(FReplicatedPredictionKeyItem&amp;&amp; other);</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    FReplicatedPredictionKeyItem&amp; operator=(const FReplicatedPredictionKeyItem&amp; other);</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span> </div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <a class="code hl_define" href="ObjectMacros_8h.html#a0f0b61260ab178e7df0069f14ecb9f82">UPROPERTY</a>()</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    FPredictionKey PredictionKey;</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    </div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="keywordtype">void</span> PostReplicatedAdd(const struct FReplicatedPredictionKeyMap &amp;InArray) { OnRep(InArray); }</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <span class="keywordtype">void</span> PostReplicatedChange(<span class="keyword">const</span> <span class="keyword">struct</span> FReplicatedPredictionKeyMap &amp;InArray) { OnRep(InArray); }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span> </div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    FString GetDebugString() { <span class="keywordflow">return</span> PredictionKey.ToString(); }</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span> </div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span> </div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <span class="keywordtype">void</span> OnRep(<span class="keyword">const</span> <span class="keyword">struct</span> FReplicatedPredictionKeyMap&amp; InArray);</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>};</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span> </div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span><a class="code hl_function" href="GameplayPrediction_8h.html#a8a33c5a50d5cd300ef6d7e3588e19ac0">USTRUCT</a>()</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>struct FReplicatedPredictionKeyMap : public FFastArraySerializer</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>{</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <a class="code hl_define" href="ObjectMacros_8h.html#afa48c9423e42b6a331aa6c1739d9b659">GENERATED_USTRUCT_BODY</a>()</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span> </div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    FReplicatedPredictionKeyMap();</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span> </div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    <a class="code hl_define" href="ObjectMacros_8h.html#a0f0b61260ab178e7df0069f14ecb9f82">UPROPERTY</a>()</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    <a class="code hl_class" href="classTArray.html">TArray</a>&lt;FReplicatedPredictionKeyItem&gt; PredictionKeys;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span> </div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <span class="keywordtype">void</span> ReplicatePredictionKey(FPredictionKey <a class="code hl_variable" href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a>);</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span> </div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <span class="keywordtype">bool</span> NetDeltaSerialize(<a class="code hl_struct" href="structFNetDeltaSerializeInfo.html">FNetDeltaSerializeInfo</a> &amp; DeltaParms);</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span> </div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    FString GetDebugString() const;</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span> </div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    static const <a class="code hl_typedef" href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> KeyRingBufferSize;</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    </div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>};</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span> </div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>template&lt;&gt;</div>
<div class="foldopen" id="foldopen00616" data-start="{" data-end="};">
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno"><a class="line" href="structTStructOpsTypeTraits_3_01FReplicatedPredictionKeyMap_01_4.html">  616</a></span>struct <a class="code hl_struct" href="structTStructOpsTypeTraits.html">TStructOpsTypeTraits</a>&lt; FReplicatedPredictionKeyMap &gt; : public <a class="code hl_struct" href="structTStructOpsTypeTraitsBase2.html">TStructOpsTypeTraitsBase2</a>&lt; FReplicatedPredictionKeyMap &gt;</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>{</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <span class="keyword">enum</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    {</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno"><a class="line" href="structTStructOpsTypeTraits_3_01FReplicatedPredictionKeyMap_01_4.html#a0197ded04d4a41b69f08e87f864cacdea4e015aee976a1673a840680910e1d0b2">  620</a></span>        <a class="code hl_enumvalue" href="structTStructOpsTypeTraits_3_01FReplicatedPredictionKeyMap_01_4.html#a0197ded04d4a41b69f08e87f864cacdea4e015aee976a1673a840680910e1d0b2">WithNetDeltaSerializer</a> = <span class="keyword">true</span>,</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    };</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>};</div>
</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span> </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span><span class="preprocessor">#undef UE_API</span></div>
<div class="ttc" id="aAnimNextConfig_8h_html_a578eb926c8aecdf908e1338b2e893458"><div class="ttname"><a href="AnimNextConfig_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a></div><div class="ttdeci">#define UE_API</div><div class="ttdef"><b>Definition</b> <a href="AnimNextConfig_8h_source.html#l00007">AnimNextConfig.h:7</a></div></div>
<div class="ttc" id="aAssertionMacros_8h_html_a586e110623cde145b8a5bdefb429e144"><div class="ttname"><a href="AssertionMacros_8h.html#a586e110623cde145b8a5bdefb429e144">check</a></div><div class="ttdeci">#define check(expr)</div><div class="ttdef"><b>Definition</b> <a href="AssertionMacros_8h_source.html#l00327">AssertionMacros.h:327</a></div></div>
<div class="ttc" id="aDelegateCombinations_8h_html_a3e9cc98b0592771493ac53b3f1c894c1"><div class="ttname"><a href="DelegateCombinations_8h.html#a3e9cc98b0592771493ac53b3f1c894c1">DECLARE_DELEGATE</a></div><div class="ttdeci">#define DECLARE_DELEGATE(DelegateName)</div><div class="ttdoc">Declares a delegate that can only bind to one native function at a time.</div><div class="ttdef"><b>Definition</b> <a href="DelegateCombinations_8h_source.html#l00020">DelegateCombinations.h:20</a></div></div>
<div class="ttc" id="aEpicRtcVideoCommon_8h_html_a5b395fb6e30878f0ec1df7af2c2069af"><div class="ttname"><a href="EpicRtcVideoCommon_8h.html#a5b395fb6e30878f0ec1df7af2c2069af">operator==</a></div><div class="ttdeci">FORCEINLINE bool operator==(const EpicRtcVideoResolution &amp;Lhs, const EpicRtcVideoResolution &amp;Rhs)</div><div class="ttdef"><b>Definition</b> <a href="EpicRtcVideoCommon_8h_source.html#l00016">EpicRtcVideoCommon.h:16</a></div></div>
<div class="ttc" id="aGameplayCue__Types_8h_html_a42de5c90665889198120ab799daf7abe"><div class="ttname"><a href="GameplayCue__Types_8h.html#a42de5c90665889198120ab799daf7abe">GetTypeHash</a></div><div class="ttdeci">PRAGMA_DISABLE_DEPRECATION_WARNINGS FORCEINLINE uint32 GetTypeHash(const FGCNotifyActorKey &amp;Key)</div><div class="ttdef"><b>Definition</b> <a href="GameplayCue__Types_8h_source.html#l00127">GameplayCue_Types.h:127</a></div></div>
<div class="ttc" id="aGameplayPrediction_8h_html_a578eb926c8aecdf908e1338b2e893458"><div class="ttname"><a href="GameplayPrediction_8h.html#a578eb926c8aecdf908e1338b2e893458">UE_API</a></div><div class="ttdeci">#define UE_API</div><div class="ttdef"><b>Definition</b> <a href="#l00012">GameplayPrediction.h:12</a></div></div>
<div class="ttc" id="aGameplayPrediction_8h_html_a6eca11ed00f4d47188e4a555ba1cfcd0"><div class="ttname"><a href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0">EGasPredictionKeyResult</a></div><div class="ttdeci">EGasPredictionKeyResult</div><div class="ttdoc">Possible results when evaluating how to deal with an FPredictionKey.</div><div class="ttdef"><b>Definition</b> <a href="#l00509">GameplayPrediction.h:510</a></div></div>
<div class="ttc" id="aGameplayPrediction_8h_html_a6eca11ed00f4d47188e4a555ba1cfcd0a3b507c66a8817d90670abad55b54cc25"><div class="ttname"><a href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0a3b507c66a8817d90670abad55b54cc25">EGasPredictionKeyResult::SilentlyDrop</a></div><div class="ttdeci">@ SilentlyDrop</div><div class="ttdef"><b>Definition</b> <a href="#l00512">GameplayPrediction.h:512</a></div></div>
<div class="ttc" id="aGameplayPrediction_8h_html_a6eca11ed00f4d47188e4a555ba1cfcd0ac4408d335012a56ff58937d78050efad"><div class="ttname"><a href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0ac4408d335012a56ff58937d78050efad">EGasPredictionKeyResult::Accept</a></div><div class="ttdeci">@ Accept</div><div class="ttdef"><b>Definition</b> <a href="#l00515">GameplayPrediction.h:515</a></div></div>
<div class="ttc" id="aGameplayPrediction_8h_html_a6eca11ed00f4d47188e4a555ba1cfcd0ad98ac12774fca5c3cbaffe276840c55f"><div class="ttname"><a href="GameplayPrediction_8h.html#a6eca11ed00f4d47188e4a555ba1cfcd0ad98ac12774fca5c3cbaffe276840c55f">EGasPredictionKeyResult::Reject</a></div><div class="ttdeci">@ Reject</div><div class="ttdef"><b>Definition</b> <a href="#l00518">GameplayPrediction.h:518</a></div></div>
<div class="ttc" id="aGameplayPrediction_8h_html_a8a33c5a50d5cd300ef6d7e3588e19ac0"><div class="ttname"><a href="GameplayPrediction_8h.html#a8a33c5a50d5cd300ef6d7e3588e19ac0">USTRUCT</a></div><div class="ttdeci">PRAGMA_DISABLE_DEPRECATION_WARNINGS USTRUCT() struct FPredictionKey</div><div class="ttdoc">Overview of Gameplay Ability Prediction.</div><div class="ttdef"><b>Definition</b> <a href="#l00295">GameplayPrediction.h:295</a></div></div>
<div class="ttc" id="aGenericPlatformCompilerPreSetup_8h_html_a084b2ccd2e278a5d6b9f0088bd8f1474"><div class="ttname"><a href="GenericPlatformCompilerPreSetup_8h.html#a084b2ccd2e278a5d6b9f0088bd8f1474">PRAGMA_ENABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define PRAGMA_ENABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition</b> <a href="GenericPlatformCompilerPreSetup_8h_source.html#l00012">GenericPlatformCompilerPreSetup.h:12</a></div></div>
<div class="ttc" id="aGenericPlatformCompilerPreSetup_8h_html_ab7724f3d5ff29ddc6ddc78d1c57d77c1"><div class="ttname"><a href="GenericPlatformCompilerPreSetup_8h.html#ab7724f3d5ff29ddc6ddc78d1c57d77c1">PRAGMA_DISABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define PRAGMA_DISABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition</b> <a href="GenericPlatformCompilerPreSetup_8h_source.html#l00008">GenericPlatformCompilerPreSetup.h:8</a></div></div>
<div class="ttc" id="aLogVerbosity_8h_html_abe3b25435b45e4cad83b33d44ab05d86"><div class="ttname"><a href="LogVerbosity_8h.html#abe3b25435b45e4cad83b33d44ab05d86">ToString</a></div><div class="ttdeci">const TCHAR * ToString(ELogVerbosity::Type Verbosity)</div><div class="ttdoc">Converts verbosity to a string.</div></div>
<div class="ttc" id="aMovieSceneDirectorBlueprintUtils_8h_html_a28c0af30b6e36472065a385942bd0535aa4ecfc70574394990cf17bd83df499f7"><div class="ttname"><a href="MovieSceneDirectorBlueprintUtils_8h.html#a28c0af30b6e36472065a385942bd0535aa4ecfc70574394990cf17bd83df499f7">EMovieSceneDirectorBlueprintEndpointType::Event</a></div><div class="ttdeci">@ Event</div><div class="ttdef"><b>Definition</b> <a href="MovieSceneDirectorBlueprintUtils_8h_source.html#l00037">MovieSceneDirectorBlueprintUtils.h:37</a></div></div>
<div class="ttc" id="aNetDriver_8h_html"><div class="ttname"><a href="NetDriver_8h.html">NetDriver.h</a></div></div>
<div class="ttc" id="aNetSerialization_8h_html"><div class="ttname"><a href="NetSerialization_8h.html">NetSerialization.h</a></div></div>
<div class="ttc" id="aObjectKey_8h_html"><div class="ttname"><a href="ObjectKey_8h.html">ObjectKey.h</a></div></div>
<div class="ttc" id="aObjectMacros_8h_html_a0f0b61260ab178e7df0069f14ecb9f82"><div class="ttname"><a href="ObjectMacros_8h.html#a0f0b61260ab178e7df0069f14ecb9f82">UPROPERTY</a></div><div class="ttdeci">#define UPROPERTY(...)</div><div class="ttdoc">UObject definition macros.</div><div class="ttdef"><b>Definition</b> <a href="ObjectMacros_8h_source.html#l00723">ObjectMacros.h:723</a></div></div>
<div class="ttc" id="aObjectMacros_8h_html_afa48c9423e42b6a331aa6c1739d9b659"><div class="ttname"><a href="ObjectMacros_8h.html#afa48c9423e42b6a331aa6c1739d9b659">GENERATED_USTRUCT_BODY</a></div><div class="ttdeci">#define GENERATED_USTRUCT_BODY(...)</div><div class="ttdef"><b>Definition</b> <a href="ObjectMacros_8h_source.html#l00745">ObjectMacros.h:745</a></div></div>
<div class="ttc" id="aPlatform_8h_html_a1bd80c51a4b4f984eaeb341a689a989d"><div class="ttname"><a href="Platform_8h.html#a1bd80c51a4b4f984eaeb341a689a989d">int16</a></div><div class="ttdeci">FPlatformTypes::int16 int16</div><div class="ttdoc">A 16-bit signed integer.</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01073">Platform.h:1073</a></div></div>
<div class="ttc" id="aPlatform_8h_html_a2978f60d40d64f3605b5a99f66f292a9"><div class="ttname"><a href="Platform_8h.html#a2978f60d40d64f3605b5a99f66f292a9">TEXT</a></div><div class="ttdeci">#define TEXT(x)</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01222">Platform.h:1222</a></div></div>
<div class="ttc" id="aPlatform_8h_html_a40bc01dd090acd02a79b5dc13e08abe6"><div class="ttname"><a href="Platform_8h.html#a40bc01dd090acd02a79b5dc13e08abe6">uint8</a></div><div class="ttdeci">FPlatformTypes::uint8 uint8</div><div class="ttdoc">An 8-bit unsigned integer.</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01061">Platform.h:1061</a></div></div>
<div class="ttc" id="aPlatform_8h_html_a8c7a127091efbdfc5a16939041653e05"><div class="ttname"><a href="Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a></div><div class="ttdeci">FPlatformTypes::uint32 uint32</div><div class="ttdoc">A 32-bit unsigned integer.</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01065">Platform.h:1065</a></div></div>
<div class="ttc" id="aPlatform_8h_html_a8dbb3cd84ca9fd010dadfc3815eefa5d"><div class="ttname"><a href="Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a></div><div class="ttdeci">FPlatformTypes::int32 int32</div><div class="ttdoc">A 32-bit signed integer.</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01075">Platform.h:1075</a></div></div>
<div class="ttc" id="aPlatform_8h_html_afddf25cca147311c233b23a9d3329bb4"><div class="ttname"><a href="Platform_8h.html#afddf25cca147311c233b23a9d3329bb4">uint64</a></div><div class="ttdeci">FPlatformTypes::uint64 uint64</div><div class="ttdoc">A 64-bit unsigned integer.</div><div class="ttdef"><b>Definition</b> <a href="Platform_8h_source.html#l01067">Platform.h:1067</a></div></div>
<div class="ttc" id="aStateTreeTypes_8h_html_ac7c6317273de456bf941c2f0cfe357bd"><div class="ttname"><a href="StateTreeTypes_8h.html#ac7c6317273de456bf941c2f0cfe357bd">operator!=</a></div><div class="ttdeci">bool operator!=(const EStateTreeTransitionPriority Lhs, const EStateTreeTransitionPriority Rhs)</div><div class="ttdef"><b>Definition</b> <a href="StateTreeTypes_8h_source.html#l00216">StateTreeTypes.h:216</a></div></div>
<div class="ttc" id="aStatsCommand_8h_html_a95a42fe4ca3180b042ae725512d41d7d"><div class="ttname"><a href="StatsCommand_8h.html#a95a42fe4ca3180b042ae725512d41d7d">Ar</a></div><div class="ttdeci">bool FOutputDevice * Ar</div><div class="ttdef"><b>Definition</b> <a href="StatsCommand_8h_source.html#l00016">StatsCommand.h:16</a></div></div>
<div class="ttc" id="aStructuredArchiveFormatter_8h_html_a7a5fe060d2d07216d26a6edfc6fec070a46f3ea056caa3126b91f3f70beea068c"><div class="ttname"><a href="StructuredArchiveFormatter_8h.html#a7a5fe060d2d07216d26a6edfc6fec070a46f3ea056caa3126b91f3f70beea068c">EArchiveValueType::Map</a></div><div class="ttdeci">@ Map</div><div class="ttdef"><b>Definition</b> <a href="StructuredArchiveFormatter_8h_source.html#l00025">StructuredArchiveFormatter.h:25</a></div></div>
<div class="ttc" id="aSystemSettings_8h_html_adad349281ad6f41999d24515146f89aa"><div class="ttname"><a href="SystemSettings_8h.html#adad349281ad6f41999d24515146f89aa">Key</a></div><div class="ttdeci">const TCHAR * Key</div><div class="ttdef"><b>Definition</b> <a href="SystemSettings_8h_source.html#l00027">SystemSettings.h:27</a></div></div>
<div class="ttc" id="aText_8h_html_a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387"><div class="ttname"><a href="Text_8h.html#a49a3fb01687e2383008ea10d0176913ba6311ae17c1ee52b36e68aaf4ad066387">ETextPluralForm::Other</a></div><div class="ttdeci">@ Other</div><div class="ttdef"><b>Definition</b> <a href="Text_8h_source.html#l00107">Text.h:107</a></div></div>
<div class="ttc" id="aTypeCompatibleBytes_8h_html"><div class="ttname"><a href="TypeCompatibleBytes_8h.html">TypeCompatibleBytes.h</a></div></div>
<div class="ttc" id="aTypeCompatibleBytes_8h_html_a9f51593011f2657d9cd7fc1bccc239d5"><div class="ttname"><a href="TypeCompatibleBytes_8h.html#a9f51593011f2657d9cd7fc1bccc239d5">BitCast</a></div><div class="ttdeci">ToType BitCast(const FromType &amp;From)</div><div class="ttdef"><b>Definition</b> <a href="TypeCompatibleBytes_8h_source.html#l00167">TypeCompatibleBytes.h:167</a></div></div>
<div class="ttc" id="aclassFArchive_html"><div class="ttname"><a href="classFArchive.html">FArchive</a></div><div class="ttdoc">Base class for archives that can be used for loading, saving, and garbage collecting in a byte order ...</div><div class="ttdef"><b>Definition</b> <a href="Archive_8h_source.html#l01180">Archive.h:1181</a></div></div>
<div class="ttc" id="aclassTArray_html"><div class="ttname"><a href="classTArray.html">TArray</a></div><div class="ttdoc">Templated dynamic array.</div><div class="ttdef"><b>Definition</b> <a href="Array_8h_source.html#l00651">Array.h:652</a></div></div>
<div class="ttc" id="aclassTMap_html"><div class="ttname"><a href="classTMap.html">TMap</a></div><div class="ttdoc">A TMapBase specialization that only allows a single value associated with each key.</div><div class="ttdef"><b>Definition</b> <a href="Map_8h_source.html#l01290">Map.h:1291</a></div></div>
<div class="ttc" id="aclassUAbilitySystemComponent_html"><div class="ttname"><a href="classUAbilitySystemComponent.html">UAbilitySystemComponent</a></div><div class="ttdef"><b>Definition</b> <a href="AbilitySystemComponent_8h_source.html#l00109">AbilitySystemComponent.h:110</a></div></div>
<div class="ttc" id="aclassUPackageMap_html"><div class="ttname"><a href="classUPackageMap.html">UPackageMap</a></div><div class="ttdef"><b>Definition</b> <a href="CoreNet_8h_source.html#l00189">CoreNet.h:190</a></div></div>
<div class="ttc" id="anamespaceUE_1_1Net_html"><div class="ttname"><a href="namespaceUE_1_1Net.html">UE::Net</a></div><div class="ttdoc">Responsible for creating headers allowing remote factories to spawn replicated actors.</div><div class="ttdef"><b>Definition</b> <a href="GameplayEffectTypes_8h_source.html#l00038">GameplayEffectTypes.h:39</a></div></div>
<div class="ttc" id="astructFNetDeltaSerializeInfo_html"><div class="ttname"><a href="structFNetDeltaSerializeInfo.html">FNetDeltaSerializeInfo</a></div><div class="ttdoc">FNetDeltaSerializeInfo This is the parameter structure for delta serialization.</div><div class="ttdef"><b>Definition</b> <a href="CoreNet_8h_source.html#l00643">CoreNet.h:644</a></div></div>
<div class="ttc" id="astructFObjectKey_html"><div class="ttname"><a href="structFObjectKey.html">FObjectKey</a></div><div class="ttdoc">FObjectKey is an immutable, copyable key which can be used to uniquely identify an object for the lif...</div><div class="ttdef"><b>Definition</b> <a href="ObjectKey_8h_source.html#l00018">ObjectKey.h:19</a></div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_1_1FDelegates_html"><div class="ttname"><a href="structFPredictionKeyDelegates_1_1FDelegates.html">FPredictionKeyDelegates::FDelegates</a></div><div class="ttdef"><b>Definition</b> <a href="#l00440">GameplayPrediction.h:441</a></div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_1_1FDelegates_html_a3940c17052671ad4d33d33bd7e65852a"><div class="ttname"><a href="structFPredictionKeyDelegates_1_1FDelegates.html#a3940c17052671ad4d33d33bd7e65852a">FPredictionKeyDelegates::FDelegates::CaughtUpDelegates</a></div><div class="ttdeci">TArray&lt; FPredictionKeyEvent &gt; CaughtUpDelegates</div><div class="ttdoc">This delegate is called when replicated state has caught up with the prediction key.</div><div class="ttdef"><b>Definition</b> <a href="#l00448">GameplayPrediction.h:448</a></div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_1_1FDelegates_html_a711224b0b1c0bf65b30883142d99197b"><div class="ttname"><a href="structFPredictionKeyDelegates_1_1FDelegates.html#a711224b0b1c0bf65b30883142d99197b">FPredictionKeyDelegates::FDelegates::RejectedDelegates</a></div><div class="ttdeci">TArray&lt; FPredictionKeyEvent &gt; RejectedDelegates</div><div class="ttdoc">This delegate is called if the prediction key is associated with an action that is explicitly rejecte...</div><div class="ttdef"><b>Definition</b> <a href="#l00445">GameplayPrediction.h:445</a></div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html"><div class="ttname"><a href="structFPredictionKeyDelegates.html">FPredictionKeyDelegates</a></div><div class="ttdoc">This is a data structure for registering delegates associated with prediction key rejection and repli...</div><div class="ttdef"><b>Definition</b> <a href="#l00435">GameplayPrediction.h:436</a></div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_a08c533d54d019c4404db4ccdfac2740f"><div class="ttname"><a href="structFPredictionKeyDelegates.html#a08c533d54d019c4404db4ccdfac2740f">FPredictionKeyDelegates::CatchUpTo</a></div><div class="ttdeci">static void CatchUpTo(FPredictionKey::KeyType Key)</div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_a406ee3d72b3076e2216f9ff74cb6b19f"><div class="ttname"><a href="structFPredictionKeyDelegates.html#a406ee3d72b3076e2216f9ff74cb6b19f">FPredictionKeyDelegates::AddDependency</a></div><div class="ttdeci">static void AddDependency(FPredictionKey::KeyType ThisKey, FPredictionKey::KeyType DependsOn)</div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_a59c54cddb674d911a5a1d741fa29cd33"><div class="ttname"><a href="structFPredictionKeyDelegates.html#a59c54cddb674d911a5a1d741fa29cd33">FPredictionKeyDelegates::BroadcastCaughtUpDelegate</a></div><div class="ttdeci">static void BroadcastCaughtUpDelegate(FPredictionKey::KeyType Key)</div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_a77baf8abf222a8cde3f273cb36a379a7"><div class="ttname"><a href="structFPredictionKeyDelegates.html#a77baf8abf222a8cde3f273cb36a379a7">FPredictionKeyDelegates::NewCaughtUpDelegate</a></div><div class="ttdeci">static FPredictionKeyEvent &amp; NewCaughtUpDelegate(FPredictionKey::KeyType Key)</div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_a8abb7ede6be36610c490b1984b7108f3"><div class="ttname"><a href="structFPredictionKeyDelegates.html#a8abb7ede6be36610c490b1984b7108f3">FPredictionKeyDelegates::DelegateMap</a></div><div class="ttdeci">TMap&lt; FPredictionKey::KeyType, FDelegates &gt; DelegateMap</div><div class="ttdef"><b>Definition</b> <a href="#l00451">GameplayPrediction.h:451</a></div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_ab896b11716291cf7a1f638b83dfb5adf"><div class="ttname"><a href="structFPredictionKeyDelegates.html#ab896b11716291cf7a1f638b83dfb5adf">FPredictionKeyDelegates::NewRejectOrCaughtUpDelegate</a></div><div class="ttdeci">static void NewRejectOrCaughtUpDelegate(FPredictionKey::KeyType Key, FPredictionKeyEvent NewEvent)</div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_ac6ff13d6a3eb9fe639215235981b6f82"><div class="ttname"><a href="structFPredictionKeyDelegates.html#ac6ff13d6a3eb9fe639215235981b6f82">FPredictionKeyDelegates::NewRejectedDelegate</a></div><div class="ttdeci">static FPredictionKeyEvent &amp; NewRejectedDelegate(FPredictionKey::KeyType Key)</div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_ae1167cb2e6e052cc9bb5a0f1a28bdcb1"><div class="ttname"><a href="structFPredictionKeyDelegates.html#ae1167cb2e6e052cc9bb5a0f1a28bdcb1">FPredictionKeyDelegates::Reject</a></div><div class="ttdeci">static void Reject(FPredictionKey::KeyType Key)</div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_ae265c6b1bdbad3f34f88551c0005d133"><div class="ttname"><a href="structFPredictionKeyDelegates.html#ae265c6b1bdbad3f34f88551c0005d133">FPredictionKeyDelegates::BroadcastRejectedDelegate</a></div><div class="ttdeci">static void BroadcastRejectedDelegate(FPredictionKey::KeyType Key)</div></div>
<div class="ttc" id="astructFPredictionKeyDelegates_html_afb5fe87f965ca7ad9a363ef4f85bc54e"><div class="ttname"><a href="structFPredictionKeyDelegates.html#afb5fe87f965ca7ad9a363ef4f85bc54e">FPredictionKeyDelegates::Get</a></div><div class="ttdeci">static FPredictionKeyDelegates &amp; Get()</div></div>
<div class="ttc" id="astructFScopedDiscardPredictions_html_a2d27869591621c10dce9e8895709120d"><div class="ttname"><a href="structFScopedDiscardPredictions.html#a2d27869591621c10dce9e8895709120d">FScopedDiscardPredictions::PredictionKeyChainResult</a></div><div class="ttdeci">EGasPredictionKeyResult PredictionKeyChainResult</div><div class="ttdef"><b>Definition</b> <a href="#l00543">GameplayPrediction.h:543</a></div></div>
<div class="ttc" id="astructFScopedDiscardPredictions_html_a7768517379c40796b70379cf83729016"><div class="ttname"><a href="structFScopedDiscardPredictions.html#a7768517379c40796b70379cf83729016">FScopedDiscardPredictions::~FScopedDiscardPredictions</a></div><div class="ttdeci">GAMEPLAYABILITIES_API ~FScopedDiscardPredictions()</div></div>
<div class="ttc" id="astructFScopedDiscardPredictions_html_ac67b91e6153ecba441fb0ea6abf6c733"><div class="ttname"><a href="structFScopedDiscardPredictions.html#ac67b91e6153ecba441fb0ea6abf6c733">FScopedDiscardPredictions::Owner</a></div><div class="ttdeci">TWeakObjectPtr&lt; UAbilitySystemComponent &gt; Owner</div><div class="ttdef"><b>Definition</b> <a href="#l00537">GameplayPrediction.h:537</a></div></div>
<div class="ttc" id="astructFScopedDiscardPredictions_html_ad4ace3d7fe8ec91793361f2c3d2bfbf9"><div class="ttname"><a href="structFScopedDiscardPredictions.html#ad4ace3d7fe8ec91793361f2c3d2bfbf9">FScopedDiscardPredictions::BaseKeyToAck</a></div><div class="ttdeci">FPredictionKey BaseKeyToAck</div><div class="ttdef"><b>Definition</b> <a href="#l00546">GameplayPrediction.h:546</a></div></div>
<div class="ttc" id="astructFScopedDiscardPredictions_html_adc054b6324ebcca76f46726fccb438bf"><div class="ttname"><a href="structFScopedDiscardPredictions.html#adc054b6324ebcca76f46726fccb438bf">FScopedDiscardPredictions::FScopedDiscardPredictions</a></div><div class="ttdeci">GAMEPLAYABILITIES_API FScopedDiscardPredictions(UAbilitySystemComponent *AbilitySystemComponent, EGasPredictionKeyResult HowToHandlePredictions=EGasPredictionKeyResult::SilentlyDrop)</div></div>
<div class="ttc" id="astructFScopedDiscardPredictions_html_ae510bc07c62bba98e8a4ac72fc065a85"><div class="ttname"><a href="structFScopedDiscardPredictions.html#ae510bc07c62bba98e8a4ac72fc065a85">FScopedDiscardPredictions::KeyToRestoreOnOwner</a></div><div class="ttdeci">FPredictionKey KeyToRestoreOnOwner</div><div class="ttdef"><b>Definition</b> <a href="#l00540">GameplayPrediction.h:540</a></div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_a05269d04973ef4b72db3d14b2b4926d2"><div class="ttname"><a href="structFScopedPredictionWindow.html#a05269d04973ef4b72db3d14b2b4926d2">FScopedPredictionWindow::FScopedPredictionWindow</a></div><div class="ttdeci">GAMEPLAYABILITIES_API FScopedPredictionWindow(UAbilitySystemComponent *AbilitySystemComponent, FPredictionKey InPredictionKey, bool InSetReplicatedPredictionKey=true)</div><div class="ttdoc">To be called on server when a new prediction key is received from the client (In an RPC).</div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_a36f6e6ef50bbddcfa783d64debc61120"><div class="ttname"><a href="structFScopedPredictionWindow.html#a36f6e6ef50bbddcfa783d64debc61120">FScopedPredictionWindow::RestoreKey</a></div><div class="ttdeci">FPredictionKey RestoreKey</div><div class="ttdef"><b>Definition</b> <a href="#l00497">GameplayPrediction.h:497</a></div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_a398653e28a8d03b06a610c5fdba47702"><div class="ttname"><a href="structFScopedPredictionWindow.html#a398653e28a8d03b06a610c5fdba47702">FScopedPredictionWindow::Owner</a></div><div class="ttdeci">TWeakObjectPtr&lt; UAbilitySystemComponent &gt; Owner</div><div class="ttdef"><b>Definition</b> <a href="#l00494">GameplayPrediction.h:494</a></div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_a3bbc6a5aafc6d526c1e64357f7a14764"><div class="ttname"><a href="structFScopedPredictionWindow.html#a3bbc6a5aafc6d526c1e64357f7a14764">FScopedPredictionWindow::ClearScopedPredictionKey</a></div><div class="ttdeci">bool ClearScopedPredictionKey</div><div class="ttdef"><b>Definition</b> <a href="#l00495">GameplayPrediction.h:495</a></div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_a76219871e57628a0789b046808b01100"><div class="ttname"><a href="structFScopedPredictionWindow.html#a76219871e57628a0789b046808b01100">FScopedPredictionWindow::DebugBaseKeyOfChain</a></div><div class="ttdeci">TOptional&lt; FPredictionKey::KeyType &gt; DebugBaseKeyOfChain</div><div class="ttdef"><b>Definition</b> <a href="#l00502">GameplayPrediction.h:502</a></div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_aaa3f0561c55d36f36ce826a89ca8ad7d"><div class="ttname"><a href="structFScopedPredictionWindow.html#aaa3f0561c55d36f36ce826a89ca8ad7d">FScopedPredictionWindow::~FScopedPredictionWindow</a></div><div class="ttdeci">GAMEPLAYABILITIES_API ~FScopedPredictionWindow()</div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_aac29d71046ff294561ad9f9935efca3f"><div class="ttname"><a href="structFScopedPredictionWindow.html#aac29d71046ff294561ad9f9935efca3f">FScopedPredictionWindow::FScopedPredictionWindow</a></div><div class="ttdeci">GAMEPLAYABILITIES_API FScopedPredictionWindow(UAbilitySystemComponent *AbilitySystemComponent, bool CanGenerateNewKey=true)</div><div class="ttdoc">To be called in the callsite where the predictive code will take place.</div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_abb3ab359f85abd63f79eb392232c2417"><div class="ttname"><a href="structFScopedPredictionWindow.html#abb3ab359f85abd63f79eb392232c2417">FScopedPredictionWindow::DebugSavedNetDriver</a></div><div class="ttdeci">TWeakObjectPtr&lt; UNetDriver &gt; DebugSavedNetDriver</div><div class="ttdef"><b>Definition</b> <a href="#l00501">GameplayPrediction.h:501</a></div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_ade7c31f4a733658143dea159d11c345a"><div class="ttname"><a href="structFScopedPredictionWindow.html#ade7c31f4a733658143dea159d11c345a">FScopedPredictionWindow::DebugSavedOnSendRPC</a></div><div class="ttdeci">FOnSendRPC DebugSavedOnSendRPC</div><div class="ttdef"><b>Definition</b> <a href="#l00500">GameplayPrediction.h:500</a></div></div>
<div class="ttc" id="astructFScopedPredictionWindow_html_ae9bbf989416464b4be7059750e60e9dd"><div class="ttname"><a href="structFScopedPredictionWindow.html#ae9bbf989416464b4be7059750e60e9dd">FScopedPredictionWindow::SetReplicatedPredictionKey</a></div><div class="ttdeci">bool SetReplicatedPredictionKey</div><div class="ttdef"><b>Definition</b> <a href="#l00496">GameplayPrediction.h:496</a></div></div>
<div class="ttc" id="astructTOptional_html"><div class="ttname"><a href="structTOptional.html">TOptional</a></div><div class="ttdoc">When we have an optional value IsSet() returns true, and GetValue() is meaningful.</div><div class="ttdef"><b>Definition</b> <a href="Optional_8h_source.html#l00056">Optional.h:57</a></div></div>
<div class="ttc" id="astructTStructOpsTypeTraitsBase2_html"><div class="ttname"><a href="structTStructOpsTypeTraitsBase2.html">TStructOpsTypeTraitsBase2</a></div><div class="ttdoc">type traits to cover the custom aspects of a script struct</div><div class="ttdef"><b>Definition</b> <a href="Class_8h_source.html#l00944">Class.h:945</a></div></div>
<div class="ttc" id="astructTStructOpsTypeTraits_3_01FPredictionKey_01_4_html_aeb281d508aa042aee319b76b96283e14a445650e03d6fe5b2221e7ad9c4f8c2d6"><div class="ttname"><a href="structTStructOpsTypeTraits_3_01FPredictionKey_01_4.html#aeb281d508aa042aee319b76b96283e14a445650e03d6fe5b2221e7ad9c4f8c2d6">TStructOpsTypeTraits&lt; FPredictionKey &gt;::WithNetSerializer</a></div><div class="ttdeci">@ WithNetSerializer</div><div class="ttdef"><b>Definition</b> <a href="#l00422">GameplayPrediction.h:422</a></div></div>
<div class="ttc" id="astructTStructOpsTypeTraits_3_01FPredictionKey_01_4_html_aeb281d508aa042aee319b76b96283e14a8b911a1fc829ee5c2d7c5b6f6268f445"><div class="ttname"><a href="structTStructOpsTypeTraits_3_01FPredictionKey_01_4.html#aeb281d508aa042aee319b76b96283e14a8b911a1fc829ee5c2d7c5b6f6268f445">TStructOpsTypeTraits&lt; FPredictionKey &gt;::WithIdenticalViaEquality</a></div><div class="ttdeci">@ WithIdenticalViaEquality</div><div class="ttdef"><b>Definition</b> <a href="#l00423">GameplayPrediction.h:423</a></div></div>
<div class="ttc" id="astructTStructOpsTypeTraits_3_01FReplicatedPredictionKeyMap_01_4_html_a0197ded04d4a41b69f08e87f864cacdea4e015aee976a1673a840680910e1d0b2"><div class="ttname"><a href="structTStructOpsTypeTraits_3_01FReplicatedPredictionKeyMap_01_4.html#a0197ded04d4a41b69f08e87f864cacdea4e015aee976a1673a840680910e1d0b2">TStructOpsTypeTraits&lt; FReplicatedPredictionKeyMap &gt;::WithNetDeltaSerializer</a></div><div class="ttdeci">@ WithNetDeltaSerializer</div><div class="ttdef"><b>Definition</b> <a href="#l00620">GameplayPrediction.h:620</a></div></div>
<div class="ttc" id="astructTStructOpsTypeTraits_html"><div class="ttname"><a href="structTStructOpsTypeTraits.html">TStructOpsTypeTraits</a></div><div class="ttdef"><b>Definition</b> <a href="Class_8h_source.html#l00979">Class.h:980</a></div></div>
<div class="ttc" id="astructTWeakObjectPtr_html"><div class="ttname"><a href="structTWeakObjectPtr.html">TWeakObjectPtr</a></div><div class="ttdoc">TWeakObjectPtr is the templated version of the generic FWeakObjectPtr.</div><div class="ttdef"><b>Definition</b> <a href="WeakObjectPtrTemplates_8h_source.html#l00023">WeakObjectPtrTemplates.h:24</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_0b4eaef40a1fe20bedafe9e8e719ce66.html">Plugins</a></li><li class="navelem"><a href="dir_a60e1ce30f7313164a0e11a69cddad56.html">Runtime</a></li><li class="navelem"><a href="dir_f46e717474a1c0a8ef8ba9f0eeb12a5e.html">GameplayAbilities</a></li><li class="navelem"><a href="dir_67c1a443dc23b9e8ea4c93970aabc657.html">Source</a></li><li class="navelem"><a href="dir_cdbc2e5d083bc1bcab6e8761a6256fc8.html">GameplayAbilities</a></li><li class="navelem"><a href="dir_44b2b63824e6c19f6a332e7b5335822e.html">Public</a></li><li class="navelem"><a href="GameplayPrediction_8h.html">GameplayPrediction.h</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for Unreal Engine 5.6 C++ API by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
