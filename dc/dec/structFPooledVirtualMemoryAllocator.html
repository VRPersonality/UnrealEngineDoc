<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unreal Engine 5.6 C++ API: FPooledVirtualMemoryAllocator Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Unreal Engine 5.6 C++ API<span id="projectnumber">&#160;5.6.0</span>
   </div>
   <div id="projectbrief">C++ API documentation for Unreal Engine 5.6</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dc/dec/structFPooledVirtualMemoryAllocator.html','../../',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">FPooledVirtualMemoryAllocator Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class pools OS allocations made from <a class="el" href="../../d2/d2c/classFMallocBinned2.html">FMallocBinned2</a>.  
 <a href="#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>&quot;</code></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Collaboration diagram for FPooledVirtualMemoryAllocator:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 0 --></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:FPoolDescriptorBase" id="r_FPoolDescriptorBase"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d16/structFPooledVirtualMemoryAllocator_1_1FPoolDescriptorBase.html">FPoolDescriptorBase</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure that describes a pool of a particular size.  <a href="../../db/d16/structFPooledVirtualMemoryAllocator_1_1FPoolDescriptorBase.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5a6c34a34ac5acae3b704396b261f8ac" id="r_a5a6c34a34ac5acae3b704396b261f8ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a6c34a34ac5acae3b704396b261f8ac">FPooledVirtualMemoryAllocator</a> ()</td></tr>
<tr class="memitem:a71936d09b2ac76d2c99ebd6b845d70a3" id="r_a71936d09b2ac76d2c99ebd6b845d70a3"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a71936d09b2ac76d2c99ebd6b845d70a3">Allocate</a> (<a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a> <a class="el" href="../../d9/da4/SequenceHistory_8h.html#a41f48316f09703e0b7cd9ac6b643e9c8">Size</a>, <a class="el" href="../../d9/dd0/Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a> AllocationHint=0, <a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a> *Mutex=nullptr)</td></tr>
<tr class="memitem:ac3425fe11e9b7812bd41feb6730bf1a4" id="r_ac3425fe11e9b7812bd41feb6730bf1a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac3425fe11e9b7812bd41feb6730bf1a4">DumpAllocatorStats</a> (class <a class="el" href="../../d6/dfe/classFOutputDevice.html">FOutputDevice</a> &amp;<a class="el" href="../../d4/da3/StatsCommand_8h.html#a95a42fe4ca3180b042ae725512d41d7d">Ar</a>)</td></tr>
<tr class="memitem:a20e8241a2daf5732b70d51d38e72f312" id="r_a20e8241a2daf5732b70d51d38e72f312"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20e8241a2daf5732b70d51d38e72f312">Free</a> (void *Ptr, <a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a> <a class="el" href="../../d9/da4/SequenceHistory_8h.html#a41f48316f09703e0b7cd9ac6b643e9c8">Size</a>, <a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a> *Mutex=nullptr, <a class="el" href="../../da/d1e/RigVMController_8h.html#addff56abe65381e12af5473dd0c468ea">bool</a> ThreadIsTimeCritical=false)</td></tr>
<tr class="memitem:a2be4c6d34f6d6975761ddc639b6b0530" id="r_a2be4c6d34f6d6975761ddc639b6b0530"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2be4c6d34f6d6975761ddc639b6b0530">FreeAll</a> (<a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a> *Mutex=nullptr)</td></tr>
<tr class="memitem:aaac4667c7db2af9a19e21ae33f922ef4" id="r_aaac4667c7db2af9a19e21ae33f922ef4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dd0/Platform_8h.html#afddf25cca147311c233b23a9d3329bb4">uint64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaac4667c7db2af9a19e21ae33f922ef4">GetCachedFreeTotal</a> () const</td></tr>
<tr class="memdesc:aaac4667c7db2af9a19e21ae33f922ef4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns free memory in the pools.  <br /></td></tr>
<tr class="memitem:ab6b8ef2124222a82f39f7d6e0fe0e723" id="r_ab6b8ef2124222a82f39f7d6e0fe0e723"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dd0/Platform_8h.html#afddf25cca147311c233b23a9d3329bb4">uint64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab6b8ef2124222a82f39f7d6e0fe0e723">GetCachedImmediatelyFreeable</a> () const</td></tr>
<tr class="memitem:af7103935b852f4d47d2d6d6a95aacc81" id="r_af7103935b852f4d47d2d6d6a95aacc81"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7103935b852f4d47d2d6d6a95aacc81">Refresh</a> ()</td></tr>
<tr class="memdesc:af7103935b852f4d47d2d6d6a95aacc81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refresh allocator if needed.  <br /></td></tr>
<tr class="memitem:af726c9bfd41d4d6262e5aa5a575dab90" id="r_af726c9bfd41d4d6262e5aa5a575dab90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af726c9bfd41d4d6262e5aa5a575dab90">UpdateStats</a> ()</td></tr>
<tr class="memdesc:af726c9bfd41d4d6262e5aa5a575dab90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update memory stats (does nothing in that implementation)  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-types" class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a4957b140f093bdc4c576c5f4fa7d853b" id="r_a4957b140f093bdc4c576c5f4fa7d853b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853b">Limits</a> { <a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152">NumAllocationSizeClasses</a> = 64
, <a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853baa050f71854547ae578e9c43e0ae06035">MaxAllocationSizeToPool</a> = NumAllocationSizeClasses * 65536
, <a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853bae4cd34da78ef9c0284e8efee8c37d1fc">MaxOSAllocCacheSize</a> = 64 * 1024 * 1024
, <a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853bad02062152f0c3143de549da061a555eb">MaxOSAllocsCached</a> = 64
 }</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-methods" class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4362b1e9e6b91488c23521b97eb4d8cc" id="r_a4362b1e9e6b91488c23521b97eb4d8cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dd1/AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4362b1e9e6b91488c23521b97eb4d8cc">CalculateAllocationSizeFromClass</a> (<a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> <a class="el" href="../../d8/db1/UnrealNames_8h.html#adfd111cc8e912b039591d9ac852600faa9bd81329febf6efe22788e03ddeaf0af">Class</a>)</td></tr>
<tr class="memdesc:a4362b1e9e6b91488c23521b97eb4d8cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns allocation size for a class.  <br /></td></tr>
<tr class="memitem:aed1e20831814c9babc4a47be3d72acc6" id="r_aed1e20831814c9babc4a47be3d72acc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d16/structFPooledVirtualMemoryAllocator_1_1FPoolDescriptorBase.html">FPoolDescriptorBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed1e20831814c9babc4a47be3d72acc6">CreatePool</a> (<a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a> AllocationSize, <a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> NumPooledAllocations)</td></tr>
<tr class="memdesc:aed1e20831814c9babc4a47be3d72acc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a new pool.  <br /></td></tr>
<tr class="memitem:a67d0601bfce9ab582b4220b642a18813" id="r_a67d0601bfce9ab582b4220b642a18813"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67d0601bfce9ab582b4220b642a18813">DecideOnTheNextPoolSize</a> (<a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> SizeClass, <a class="el" href="../../da/d1e/RigVMController_8h.html#addff56abe65381e12af5473dd0c468ea">bool</a> bGrowing)</td></tr>
<tr class="memdesc:a67d0601bfce9ab582b4220b642a18813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the number of pooled allocations next time we need a pool.  <br /></td></tr>
<tr class="memitem:ac28c9ff833802554149fb8ce9f2832b0" id="r_ac28c9ff833802554149fb8ce9f2832b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac28c9ff833802554149fb8ce9f2832b0">DestroyPool</a> (<a class="el" href="../../db/d16/structFPooledVirtualMemoryAllocator_1_1FPoolDescriptorBase.html">FPoolDescriptorBase</a> *Pool)</td></tr>
<tr class="memdesc:ac28c9ff833802554149fb8ce9f2832b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a pool.  <br /></td></tr>
<tr class="memitem:a020554100b87d8923cf3f80068f5eeb0" id="r_a020554100b87d8923cf3f80068f5eeb0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dd1/AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a020554100b87d8923cf3f80068f5eeb0">GetAllocationSizeClass</a> (<a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a> <a class="el" href="../../d9/da4/SequenceHistory_8h.html#a41f48316f09703e0b7cd9ac6b643e9c8">Size</a>)</td></tr>
<tr class="memdesc:a020554100b87d8923cf3f80068f5eeb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buckets allocations by its size.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-attribs" class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2507e5bd86735fa4fe3a81e451984d2c" id="r_a2507e5bd86735fa4fe3a81e451984d2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d16/structFPooledVirtualMemoryAllocator_1_1FPoolDescriptorBase.html">FPoolDescriptorBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2507e5bd86735fa4fe3a81e451984d2c">ClassesListHeads</a> [<a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152">Limits::NumAllocationSizeClasses</a>]</td></tr>
<tr class="memdesc:a2507e5bd86735fa4fe3a81e451984d2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Head of the pool descriptor lists.  <br /></td></tr>
<tr class="memitem:a5e0fb51800d978b08c5e6888769caaa0" id="r_a5e0fb51800d978b08c5e6888769caaa0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e0fb51800d978b08c5e6888769caaa0">ClassesLocks</a> [<a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152">Limits::NumAllocationSizeClasses</a>]</td></tr>
<tr class="memdesc:a5e0fb51800d978b08c5e6888769caaa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per-class locks.  <br /></td></tr>
<tr class="memitem:a2345c5d59e482ec306f91a7d066f89ba" id="r_a2345c5d59e482ec306f91a7d066f89ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2345c5d59e482ec306f91a7d066f89ba">NextPoolSize</a> [<a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152">Limits::NumAllocationSizeClasses</a>]</td></tr>
<tr class="memdesc:a2345c5d59e482ec306f91a7d066f89ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">We only pool allocations that are divisible by 64KB.  <br /></td></tr>
<tr class="memitem:a2b879d0cf532498e9fa3d6190cf5daa6" id="r_a2b879d0cf532498e9fa3d6190cf5daa6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d35/structTCachedOSPageAllocator.html">TCachedOSPageAllocator</a>&lt; <a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853bad02062152f0c3143de549da061a555eb">MaxOSAllocsCached</a>, <a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853bae4cd34da78ef9c0284e8efee8c37d1fc">MaxOSAllocCacheSize</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b879d0cf532498e9fa3d6190cf5daa6">OsAllocatorCache</a></td></tr>
<tr class="memdesc:a2b879d0cf532498e9fa3d6190cf5daa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Caching allocator for larger allocs.  <br /></td></tr>
<tr class="memitem:a38b408cb41058c981a571d9d0594d95a" id="r_a38b408cb41058c981a571d9d0594d95a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a38b408cb41058c981a571d9d0594d95a">OsAllocatorCacheLock</a></td></tr>
<tr class="memdesc:a38b408cb41058c981a571d9d0594d95a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock for accessing the caching allocator for larger allocs.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class pools OS allocations made from <a class="el" href="../../d2/d2c/classFMallocBinned2.html">FMallocBinned2</a>. </p>
<p>The class fulfills <a class="el" href="../../d2/d2c/classFMallocBinned2.html">FMallocBinned2</a> requirements of returning a 64KB-aligned address and it also avoids fragmenting the memory into too many small VMAs (virtual memory areas).</p>
<p>The logic is like follows:</p>
<p>There are N buckets that represent allocation sizes from 64KB to N*64 KB. Each bucket is a linked list of pools that hold varied number of same-sized allocations (called blocks). Each bucket starts empty (linked list is empty).</p>
<p>Whenever an allocation request arrives, it is first bucketed based on its size (if it is larger than the largest bucket, it is passed through to a caching OS allocator). Then, the linked list of that bucket is walked, and the allocation is fulfilled by the first pool that has empty "blocks". If there are no such pool, a new pool is created (with number of blocks being possibly larger than in the existing list, if any), this pool becomes the new head of the list and the allocation happens there.</p>
<p>Whenever a free request arrives, it is again first bucketed based on the size (which must be passed in and <em>must</em> match allocation size). If it is larger than the largest bucket, it is passed through to a platform function BinnedFreeToOS(). Otherwise, the appropriate bucket's list of pools is walked to find the pool where the allocation belongs, and the appropriate block becomes free (a platform-specific function is called to evict the memory range from the RAM). If this was the last used block in the pool, the whole pool is destroyed and the list shrinks by one.</p>
<p>So, to visualize an example state:</p>
<p>64KB bucket: Head -&gt; [ A pool of 200 64KB "blocks", of which 50 are empty ] -&gt; [ A pool of 100 64KB blocks, of which 30 are empty ] -&gt; null 128KB bucket: Head -&gt; [ A pool of 60 128KB "blocks", of which 25 are empty ] -&gt; null 192KB bucket: Head -&gt; null 256KB bucket: Head -&gt; [ A pool of 40 256KB "blocks", of which 10 are empty ] -&gt; [ A pool of 20 256KB blocks, of which 10 are emtpy ] -&gt; [ A pool of 4 256 KB blocks of which 0 are empty ] -&gt; null ... 4MB bucket: Head -&gt; [ A pool of 2 4MB "blocks", of which 1 is empty ] -&gt; null</p>
<p>Each pool uses one distinct VMA on Linux (or one distinct VirtualAlloc on <a class="el" href="../../d5/d0f/namespaceWindows.html">Windows</a>).</p>
<p>The class also maintains an idea of what current size of each pool (per bucket) should be. Each time we add a new pool to a particular bucket, this size can grow (exponentially or otherwise). Each time we delete a pool from a particular bucket, this size can shrink. The logic that handles that is in <a class="el" href="#a67d0601bfce9ab582b4220b642a18813" title="Increases the number of pooled allocations next time we need a pool.">DecideOnTheNextPoolSize()</a>.</p>
<p>Right now the class is less multithread friendly than it could be. There are per-bucket locks so allocations of different sizes would not block each other if happening on different threads. It is possible to make allocations within one bucket lock-free as well (e.g. with hazard pointers), but since <a class="el" href="../../d2/d2c/classFMallocBinned2.html">FMallocBinned2</a> itself needs a lock to maintain its own structures when making a call here, the point is moot.</p>
<p>This class is somewhat similar to <a class="el" href="../../d7/d22/structFCachedOSPageAllocator.html">FCachedOSPageAllocator</a>. However, unlike FCOSPA, this is not a cache and we cannot "trim" anything here. Also, it does not make sense to put the global cap on the pooled memory since BinnedAllocFromOS() can support only a limited number of allocations on some platforms.</p>
<p>CachedOSPageAllocator sits "below" this and is used for allocs larger than the largest bucketed. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00060">60</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>
</div><a name="doc-enum-members" id="doc-enum-members"></a><h2 id="header-doc-enum-members" class="groupheader">Member Enumeration Documentation</h2>
<a id="a4957b140f093bdc4c576c5f4fa7d853b" name="a4957b140f093bdc4c576c5f4fa7d853b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4957b140f093bdc4c576c5f4fa7d853b">&#9670;&#160;</a></span>Limits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853b">FPooledVirtualMemoryAllocator::Limits</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152" name="a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152"></a>NumAllocationSizeClasses&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4957b140f093bdc4c576c5f4fa7d853baa050f71854547ae578e9c43e0ae06035" name="a4957b140f093bdc4c576c5f4fa7d853baa050f71854547ae578e9c43e0ae06035"></a>MaxAllocationSizeToPool&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4957b140f093bdc4c576c5f4fa7d853bae4cd34da78ef9c0284e8efee8c37d1fc" name="a4957b140f093bdc4c576c5f4fa7d853bae4cd34da78ef9c0284e8efee8c37d1fc"></a>MaxOSAllocCacheSize&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4957b140f093bdc4c576c5f4fa7d853bad02062152f0c3143de549da061a555eb" name="a4957b140f093bdc4c576c5f4fa7d853bad02062152f0c3143de549da061a555eb"></a>MaxOSAllocsCached&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00095">95</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

</div>
</div>
<a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5a6c34a34ac5acae3b704396b261f8ac" name="a5a6c34a34ac5acae3b704396b261f8ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a6c34a34ac5acae3b704396b261f8ac">&#9670;&#160;</a></span>FPooledVirtualMemoryAllocator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FPooledVirtualMemoryAllocator::FPooledVirtualMemoryAllocator </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a71936d09b2ac76d2c99ebd6b845d70a3" name="a71936d09b2ac76d2c99ebd6b845d70a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71936d09b2ac76d2c99ebd6b845d70a3">&#9670;&#160;</a></span>Allocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * FPooledVirtualMemoryAllocator::Allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a></td>          <td class="paramname"><span class="paramname"><em>Size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/dd0/Platform_8h.html#a8c7a127091efbdfc5a16939041653e05">uint32</a></td>          <td class="paramname"><span class="paramname"><em>AllocationHint</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a> *</td>          <td class="paramname"><span class="paramname"><em>Mutex</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="../../d9/da4/SequenceHistory_8h_source.html#l00069">TSequenceHistory&lt; HistorySize &gt;::Size</a>.</p>

</div>
</div>
<a id="a4362b1e9e6b91488c23521b97eb4d8cc" name="a4362b1e9e6b91488c23521b97eb4d8cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4362b1e9e6b91488c23521b97eb4d8cc">&#9670;&#160;</a></span>CalculateAllocationSizeFromClass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dd1/AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a> FPooledVirtualMemoryAllocator::CalculateAllocationSizeFromClass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a></td>          <td class="paramname"><span class="paramname"><em>Class</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns allocation size for a class. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00122">122</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

<p class="reference">References <a class="el" href="../../d8/db1/UnrealNames_8h_source.html#l00133">Class</a>, and <a class="el" href="../../d7/dd1/AndroidPlatform_8h_source.html#l00140">FORCEINLINE</a>.</p>

</div>
</div>
<a id="aed1e20831814c9babc4a47be3d72acc6" name="aed1e20831814c9babc4a47be3d72acc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed1e20831814c9babc4a47be3d72acc6">&#9670;&#160;</a></span>CreatePool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d16/structFPooledVirtualMemoryAllocator_1_1FPoolDescriptorBase.html">FPoolDescriptorBase</a> * FPooledVirtualMemoryAllocator::CreatePool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a></td>          <td class="paramname"><span class="paramname"><em>AllocationSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a></td>          <td class="paramname"><span class="paramname"><em>NumPooledAllocations</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocates a new pool. </p>

</div>
</div>
<a id="a67d0601bfce9ab582b4220b642a18813" name="a67d0601bfce9ab582b4220b642a18813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d0601bfce9ab582b4220b642a18813">&#9670;&#160;</a></span>DecideOnTheNextPoolSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FPooledVirtualMemoryAllocator::DecideOnTheNextPoolSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a></td>          <td class="paramname"><span class="paramname"><em>SizeClass</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d1e/RigVMController_8h.html#addff56abe65381e12af5473dd0c468ea">bool</a></td>          <td class="paramname"><span class="paramname"><em>bGrowing</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases the number of pooled allocations next time we need a pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bGrowing</td><td>- if true, we are allocating it, if false, we have just deleted a pool of this size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac28c9ff833802554149fb8ce9f2832b0" name="ac28c9ff833802554149fb8ce9f2832b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac28c9ff833802554149fb8ce9f2832b0">&#9670;&#160;</a></span>DestroyPool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FPooledVirtualMemoryAllocator::DestroyPool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d16/structFPooledVirtualMemoryAllocator_1_1FPoolDescriptorBase.html">FPoolDescriptorBase</a> *</td>          <td class="paramname"><span class="paramname"><em>Pool</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroys a pool. </p>

</div>
</div>
<a id="ac3425fe11e9b7812bd41feb6730bf1a4" name="ac3425fe11e9b7812bd41feb6730bf1a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3425fe11e9b7812bd41feb6730bf1a4">&#9670;&#160;</a></span>DumpAllocatorStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FPooledVirtualMemoryAllocator::DumpAllocatorStats </td>
          <td>(</td>
          <td class="paramtype">class <a class="el" href="../../d6/dfe/classFOutputDevice.html">FOutputDevice</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Ar</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="../../d4/da3/StatsCommand_8h_source.html#l00016">Ar</a>.</p>

</div>
</div>
<a id="a20e8241a2daf5732b70d51d38e72f312" name="a20e8241a2daf5732b70d51d38e72f312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20e8241a2daf5732b70d51d38e72f312">&#9670;&#160;</a></span>Free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FPooledVirtualMemoryAllocator::Free </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>Ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a></td>          <td class="paramname"><span class="paramname"><em>Size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a> *</td>          <td class="paramname"><span class="paramname"><em>Mutex</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d1e/RigVMController_8h.html#addff56abe65381e12af5473dd0c468ea">bool</a></td>          <td class="paramname"><span class="paramname"><em>ThreadIsTimeCritical</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="../../d9/da4/SequenceHistory_8h_source.html#l00069">TSequenceHistory&lt; HistorySize &gt;::Size</a>.</p>

</div>
</div>
<a id="a2be4c6d34f6d6975761ddc639b6b0530" name="a2be4c6d34f6d6975761ddc639b6b0530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2be4c6d34f6d6975761ddc639b6b0530">&#9670;&#160;</a></span>FreeAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FPooledVirtualMemoryAllocator::FreeAll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a> *</td>          <td class="paramname"><span class="paramname"><em>Mutex</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a020554100b87d8923cf3f80068f5eeb0" name="a020554100b87d8923cf3f80068f5eeb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a020554100b87d8923cf3f80068f5eeb0">&#9670;&#160;</a></span>GetAllocationSizeClass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dd1/AndroidPlatform_8h.html#a724fb9f82013c782db5c3c12ea36aac8">FORCEINLINE</a> <a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> FPooledVirtualMemoryAllocator::GetAllocationSizeClass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dd0/Platform_8h.html#a2c46f1fb01e11216aa2c983307deafb4">SIZE_T</a></td>          <td class="paramname"><span class="paramname"><em>Size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buckets allocations by its size. </p>
<p>Allocation size class is an index into a number of tables containing per-class elements. Index of 0 (smallest possible) represents allocations of size 65536 or less, index of NumAllocationSizeClasses - 1 (largest possible) represents allocations of size larger or equal than (NumAllocationSizeClasses - 1 * 65536) and smaller than (NumAllocationSizeClasses * 65536).</p>
<p>This function should not be passed 0 as Size! </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00114">114</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

<p class="reference">References <a class="el" href="../../d7/dd1/AndroidPlatform_8h_source.html#l00140">FORCEINLINE</a>, and <a class="el" href="../../d9/da4/SequenceHistory_8h_source.html#l00069">TSequenceHistory&lt; HistorySize &gt;::Size</a>.</p>

</div>
</div>
<a id="aaac4667c7db2af9a19e21ae33f922ef4" name="aaac4667c7db2af9a19e21ae33f922ef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaac4667c7db2af9a19e21ae33f922ef4">&#9670;&#160;</a></span>GetCachedFreeTotal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dd0/Platform_8h.html#afddf25cca147311c233b23a9d3329bb4">uint64</a> FPooledVirtualMemoryAllocator::GetCachedFreeTotal </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns free memory in the pools. </p>

<p class="reference">Referenced by <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00080">GetCachedImmediatelyFreeable()</a>.</p>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 1 --></div>
</div>

</div>
</div>
<a id="ab6b8ef2124222a82f39f7d6e0fe0e723" name="ab6b8ef2124222a82f39f7d6e0fe0e723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6b8ef2124222a82f39f7d6e0fe0e723">&#9670;&#160;</a></span>GetCachedImmediatelyFreeable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dd0/Platform_8h.html#afddf25cca147311c233b23a9d3329bb4">uint64</a> FPooledVirtualMemoryAllocator::GetCachedImmediatelyFreeable </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00080">80</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

<p class="reference">References <a class="el" href="#aaac4667c7db2af9a19e21ae33f922ef4">GetCachedFreeTotal()</a>.</p>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 2 --></div>
</div>

</div>
</div>
<a id="af7103935b852f4d47d2d6d6a95aacc81" name="af7103935b852f4d47d2d6d6a95aacc81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7103935b852f4d47d2d6d6a95aacc81">&#9670;&#160;</a></span>Refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FPooledVirtualMemoryAllocator::Refresh </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Refresh allocator if needed. </p>
<p>(does nothing in that implementation) </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00086">86</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

</div>
</div>
<a id="af726c9bfd41d4d6262e5aa5a575dab90" name="af726c9bfd41d4d6262e5aa5a575dab90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af726c9bfd41d4d6262e5aa5a575dab90">&#9670;&#160;</a></span>UpdateStats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FPooledVirtualMemoryAllocator::UpdateStats </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update memory stats (does nothing in that implementation) </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00089">89</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Field Documentation</h2>
<a id="a2507e5bd86735fa4fe3a81e451984d2c" name="a2507e5bd86735fa4fe3a81e451984d2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2507e5bd86735fa4fe3a81e451984d2c">&#9670;&#160;</a></span>ClassesListHeads</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d16/structFPooledVirtualMemoryAllocator_1_1FPoolDescriptorBase.html">FPoolDescriptorBase</a>* FPooledVirtualMemoryAllocator::ClassesListHeads[<a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152">Limits::NumAllocationSizeClasses</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Head of the pool descriptor lists. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00138">138</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

</div>
</div>
<a id="a5e0fb51800d978b08c5e6888769caaa0" name="a5e0fb51800d978b08c5e6888769caaa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e0fb51800d978b08c5e6888769caaa0">&#9670;&#160;</a></span>ClassesLocks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a> FPooledVirtualMemoryAllocator::ClassesLocks[<a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152">Limits::NumAllocationSizeClasses</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel mutable">mutable</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Per-class locks. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00141">141</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

</div>
</div>
<a id="a2345c5d59e482ec306f91a7d066f89ba" name="a2345c5d59e482ec306f91a7d066f89ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2345c5d59e482ec306f91a7d066f89ba">&#9670;&#160;</a></span>NextPoolSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dd0/Platform_8h.html#a8dbb3cd84ca9fd010dadfc3815eefa5d">int32</a> FPooledVirtualMemoryAllocator::NextPoolSize[<a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853ba43f29aca206e7b9a9e4575ef10488152">Limits::NumAllocationSizeClasses</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We only pool allocations that are divisible by 64KB. </p>
<p>Max allocation size is pooled is NumAllocationSizeClasses * 64KB, after which we just allocate directly from the OS.</p>
<p>This array keeps the number of pooled allocations for each allocation size class that we keep bumping up whenever the pool is exhausted. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00135">135</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

</div>
</div>
<a id="a2b879d0cf532498e9fa3d6190cf5daa6" name="a2b879d0cf532498e9fa3d6190cf5daa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b879d0cf532498e9fa3d6190cf5daa6">&#9670;&#160;</a></span>OsAllocatorCache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d35/structTCachedOSPageAllocator.html">TCachedOSPageAllocator</a>&lt;<a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853bad02062152f0c3143de549da061a555eb">MaxOSAllocsCached</a>, <a class="el" href="#a4957b140f093bdc4c576c5f4fa7d853bae4cd34da78ef9c0284e8efee8c37d1fc">MaxOSAllocCacheSize</a>&gt; FPooledVirtualMemoryAllocator::OsAllocatorCache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Caching allocator for larger allocs. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00159">159</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

</div>
</div>
<a id="a38b408cb41058c981a571d9d0594d95a" name="a38b408cb41058c981a571d9d0594d95a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38b408cb41058c981a571d9d0594d95a">&#9670;&#160;</a></span>OsAllocatorCacheLock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d75/namespaceUE.html#a30602c02de16f3a41a9ee9e8b3c5bde1">UE::FPlatformRecursiveMutex</a> FPooledVirtualMemoryAllocator::OsAllocatorCacheLock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock for accessing the caching allocator for larger allocs. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html#l00156">156</a> of file <a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="../../d2/d46/PooledVirtualMemoryAllocator_8h_source.html">PooledVirtualMemoryAllocator.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="../../dc/dec/structFPooledVirtualMemoryAllocator.html">FPooledVirtualMemoryAllocator</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for Unreal Engine 5.6 C++ API by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
